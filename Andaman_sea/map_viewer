/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var depth_pal = {"opacity":1,"bands":["depth"],"max":5,"palette":["e4e1ff","7f89ff","3a52ff","0007ff","000258"]},
    geo = ee.Image("projects/coral_atlas/nth_cari/in_out/nth_cari_geo"),
    benthic = ee.Image("projects/coral_atlas/nth_cari/in_out/nth_cari_benthic"),
    pixels = ee.Image("projects/coral_atlas/nth_cari/in_out/nth_cari_pixels"),
    geo_train = ee.FeatureCollection("projects/coral_atlas/nth_cari/training/nth_cari_geo_training"),
    wcmc = ee.FeatureCollection("projects/coral_atlas/global_datasets/wcmc_reefs_2018v4_dissolved"),
    benthic_baha = ee.Image("projects/coral_atlas/nth_cari/in_out/nth_cari_benthic_baha"),
    benthic_cari = ee.Image("projects/coral_atlas/nth_cari/in_out/nth_cari_benthic_cari"),
    geo_clean = ee.Image("projects/coral_atlas/nth_cari/in_out/nth_cari_geo-clean3"),
    benthic_clean = ee.Image("projects/coral_atlas/nth_cari/in_out/nth_cari_benthic-clean"),
    low_rrs = ee.Image("projects/coral_atlas/workflow/mapping/andaman_sea/andaman_sea_low_tide_normalized_sr_feb2018_feb2020/20200317T185458Z/andaman_sea_low_tide_normalized_sr_feb2018_feb2020"),
    noreefmask = /* color: #43ff06 */ee.Geometry.MultiPolygon(
        [[[[94.09109703919786, 15.733448346326067],
           [94.13263909242052, 15.686187125648821],
           [94.15598503968614, 15.68023738426514],
           [94.1813909234752, 15.699077636699126],
           [94.20027367494005, 15.72188192837816],
           [94.21503655335802, 15.725847631459953],
           [94.26275841615099, 15.835204413268006],
           [94.26584832093614, 15.84214046463901],
           [94.2631017389049, 15.855681592454987],
           [94.26756493470567, 15.869882286608888],
           [94.28404442689317, 15.876486919780298],
           [94.2857610406627, 15.871533465196691],
           [94.28644768617052, 15.859974931040837],
           [94.26413170716661, 15.831901447948411],
           [94.21743981263536, 15.723534314053536],
           [94.2143499078502, 15.694119844260944],
           [94.15046645654691, 15.45894224981689],
           [94.27131606592191, 15.225856920532353],
           [94.88105727685941, 14.944752323700595],
           [95.69953872217191, 14.92882966094028],
           [97.01240493310941, 14.711102172322283],
           [97.58369399560941, 14.541017286257746],
           [97.70610393230112, 14.436741286978643],
           [97.75760234538706, 14.467992382108076],
           [97.7768284196058, 14.471316708056587],
           [97.7884950258869, 14.429634464481294],
           [97.78780838037909, 14.410681589596535],
           [97.78695007349432, 14.395551383935008],
           [97.80153005597514, 14.34993644379455],
           [97.79672353742045, 14.315342218457458],
           [97.79191701886576, 14.288727647729356],
           [97.80290334699076, 14.288062243092005],
           [97.81114309308451, 14.298043105959746],
           [97.82281606671732, 14.286731427913253],
           [97.81938283917826, 14.26410636607746],
           [97.81114309308451, 14.242810115101893],
           [97.80221670148295, 14.217518207377598],
           [97.79741018292826, 14.19355484303154],
           [97.79989397398157, 14.190651468753622],
           [97.8045288311593, 14.185242650460248],
           [97.80907785764856, 14.18682370300518],
           [97.81903421751184, 14.192981381464485],
           [97.82341158262415, 14.192814959922588],
           [97.82590067258997, 14.188487956926991],
           [97.82555734983606, 14.184909795887657],
           [97.82281076780481, 14.181081933176012],
           [97.82015001646204, 14.180499426663074],
           [97.81877672544641, 14.178169385647923],
           [97.8177467571847, 14.173925320862123],
           [97.8155151592843, 14.165686615526958],
           [97.81457102171106, 14.16169198408123],
           [97.81328356138391, 14.158612741043955],
           [97.81130945554895, 14.154534760336812],
           [97.81473148449508, 14.143850856789035],
           [97.81764404677544, 14.135330620882536],
           [97.8236521949688, 14.128339036112129],
           [97.82227890395318, 14.123011970234284],
           [97.81798736952935, 14.119016589041069],
           [97.81163589858208, 14.110526171337073],
           [97.80150787734185, 14.103533825144469],
           [97.78039359114425, 14.070900740705866],
           [97.7941265013005, 14.04825415306905],
           [97.8270854856755, 13.97896834688147],
           [97.86828421614425, 13.94565043081375],
           [97.90124320051925, 13.953647169905832],
           [97.92184256575362, 13.953647169905832],
           [97.92057240786679, 13.896178855264285],
           [97.92022908511288, 13.885680468877123],
           [97.92263234439022, 13.875181606927278],
           [97.92812550845272, 13.864848929601594],
           [97.9293271380914, 13.854015790152655],
           [97.92881215396054, 13.847348991684113],
           [97.93293202700741, 13.841515386158168],
           [97.92915547671444, 13.83151457908892],
           [97.92812550845272, 13.822180104710235],
           [97.92555058779843, 13.813178650049416],
           [97.91765416445858, 13.7941744374813],
           [97.91748250308163, 13.784505033424445],
           [97.9216023761285, 13.780170343005373],
           [97.9216023761285, 13.76866635161251],
           [97.87752689585007, 13.773050467950945],
           [97.86379398569382, 13.887729386473401],
           [97.81160892710007, 13.954377127777196],
           [97.72371830210007, 13.975700341686306],
           [97.67977298960007, 14.132897874547607],
           [97.72921146616257, 14.3245850199133],
           [97.62209476694382, 14.4629240942178],
           [97.46279300913132, 14.521426289039512],
           [97.11672367319382, 14.51344962657249],
           [97.19088138803757, 13.722360430280009],
           [97.38863529428757, 13.244274398213838],
           [97.81160892710007, 13.18812382599196],
           [98.15218509897507, 13.217537642273655],
           [98.22908939585007, 13.23892728174591],
           [98.2534538404951, 13.229559018826176],
           [98.26718675065135, 13.206497348719815],
           [98.27508317399119, 13.184436321413514],
           [98.27748643326854, 13.163041909529328],
           [98.29362260270213, 13.107207074328466],
           [98.30220567154979, 13.097844303277313],
           [98.33447801041697, 13.086140338879149],
           [98.3361946241865, 13.074770241278094],
           [98.32692490983104, 13.047680545236473],
           [98.32314835953807, 13.030622546631585],
           [98.31490861344432, 12.97040846026203],
           [98.3083854811201, 12.929588397611177],
           [98.32095500562252, 12.86827122238279],
           [98.32747813794674, 12.837142183783047],
           [98.31649180982174, 12.843502193418585],
           [98.31305858228268, 12.858899444780612],
           [98.30722209546627, 12.876973273749554],
           [98.29177257154049, 12.923156022701077],
           [98.2485139045483, 12.943902015381486],
           [98.2155549201733, 12.950259312833673],
           [98.20353862378659, 12.92984846687055],
           [98.19804545972409, 12.904081573023861],
           [98.13250750171925, 12.908428221690327],
           [98.05560320484425, 12.901735203729237],
           [97.96084612476612, 12.864250995898296],
           [97.8935548650005, 12.838812092511178],
           [97.89630144703175, 12.787926567301593],
           [97.88531511890675, 12.720956304119994],
           [97.88119524585987, 12.6579881386003],
           [97.89492815601612, 12.60840651518299],
           [97.87570208179737, 12.601705558786287],
           [97.89218157398487, 12.564176967603174],
           [97.87982195484425, 12.540048550384842],
           [97.89492815601612, 12.498488757918915],
           [97.866089044688, 12.464967927062046],
           [97.855102716563, 12.43278385026841],
           [97.88119524585987, 12.41266677745308],
           [97.92514055835987, 12.40998438355831],
           [98.05148333179737, 12.463627003572391],
           [98.162719904063, 12.664687619819802],
           [98.2231447087505, 12.68612477640401],
           [98.32888811695362, 12.785248097233724],
           [98.35910051929737, 12.777212516567156],
           [98.371460138438, 12.707560127640638],
           [98.38519304859425, 12.664687619819802],
           [98.36871355640675, 12.637888639660103],
           [98.30142229664112, 12.624488095168571],
           [98.27670305835987, 12.624488095168571],
           [98.25335711109425, 12.671386925014062],
           [98.23687761890675, 12.65530829684492],
           [98.22589129078175, 12.623148002097215],
           [98.18677525796166, 12.60438596237472],
           [98.14420323647728, 12.58428225240241],
           [98.1290970353054, 12.544070110329441],
           [98.15244298257103, 12.517258525294158],
           [98.18677525796166, 12.478376780300954],
           [98.18128209389916, 12.442171284857855],
           [98.1675491837429, 12.400595787346315],
           [98.12772374428978, 12.392548149915845],
           [98.09476475991478, 12.354989226909348],
           [98.05367277756345, 12.302874620986497],
           [98.03032683029782, 12.241146733763994],
           [98.06465910568845, 12.202223905180713],
           [98.08113859787595, 12.159267941009452],
           [98.0289535392822, 12.108248721373151],
           [98.03856657639157, 12.051847717859397],
           [98.0399398674072, 11.944384479081597],
           [98.02758024826657, 11.869134810904002],
           [98.02620695725095, 11.831502177766188],
           [98.04268644943845, 11.830158059282732],
           [98.06877897873532, 11.850319142639902],
           [98.09349821701657, 11.846287044968504],
           [98.09899138107907, 11.781765400612795],
           [98.0948715080322, 11.723951886223734],
           [98.09075163498532, 11.676885432798862],
           [98.1003646720947, 11.648641722684738],
           [98.11959074631345, 11.615014516073298],
           [98.15804289475095, 11.562547976685648],
           [98.21160124436032, 11.641916606462717],
           [98.23082731857907, 11.654021698502742],
           [98.2706527580322, 11.625775664132235],
           [98.2651595939697, 11.46296909162726],
           [98.29125212326657, 11.405089540084111],
           [98.3036117424072, 11.304108634484903],
           [98.2981185783447, 11.19635644950406],
           [98.27889250412595, 11.174801185694541],
           [98.23906706467282, 11.150549599044474],
           [98.30086516037595, 11.065653138264423],
           [98.32833098068845, 11.031957236355929],
           [98.32833098068845, 11.003649692274218],
           [98.30635832443845, 10.999605535232755],
           [98.26378630295407, 11.057566474793298],
           [98.21160124436032, 11.073739578529603],
           [98.1827621330322, 11.023869644527936],
           [98.17589567795407, 10.979383918138094],
           [98.26241301193845, 10.835096358085597],
           [98.3200912345947, 10.756855273673601],
           [98.35717009201657, 10.685341353449582],
           [98.37090300217282, 10.652952143567546],
           [98.3640365470947, 10.607061535755538],
           [98.34069059982907, 10.578713895797238],
           [98.2918228652383, 10.523781354704576],
           [98.30967564844143, 10.442759273114936],
           [98.3137955214883, 10.364417848222867],
           [98.35499425195705, 10.297415181908914],
           [98.3797134902383, 10.25282337261239],
           [98.37284703516018, 10.094674729053008],
           [98.29456944726955, 9.998666201925039],
           [98.28619695568449, 9.880852518237386],
           [98.34112859630949, 9.815905931813456],
           [98.43451238537199, 9.875440791265538],
           [98.49631048107511, 9.880852518237386],
           [98.72565008068449, 9.909262623059979],
           [98.92340398693449, 9.891675705036358],
           [99.06585265140608, 12.751756662347935],
           [98.31878233890608, 15.796437009383085],
           [98.16497374515608, 16.913843182084616],
           [96.8465310497674, 17.998706208070473],
           [95.17669249515608, 16.892819817687297],
           [94.36370421390608, 16.282133563690067]]],
         [[[98.28875334151691, 9.88263671605484],
           [98.26540739425128, 9.804835025347186],
           [98.26472074874347, 9.704003957420044],
           [98.14661772139972, 9.691144116065262],
           [98.04871086811562, 9.491390401430104],
           [97.98965935444375, 9.271893100778485],
           [97.99103264545937, 9.152602224369545],
           [98.01712517475625, 9.080737236519171],
           [98.13934807514687, 9.016995849072925],
           [98.20251946186562, 8.973591012817511],
           [98.22174553608437, 8.955956313355287],
           [98.234105155225, 8.934250893725997],
           [98.22998528217812, 8.896263300518692],
           [98.19153313374062, 8.875911181256285],
           [98.1077623817875, 8.86098557609556],
           [97.98965935444375, 8.837917539792628],
           [97.95670037006875, 8.721198358457286],
           [97.95120720600625, 8.631598403099487],
           [98.16406731342812, 8.656036873477472],
           [98.22586540913125, 8.685903959733382],
           [98.23547844624062, 8.664182677867782],
           [98.24097161030312, 8.626167416853235],
           [98.26019768452187, 8.590864104765672],
           [98.22723870014687, 8.56098950395976],
           [98.18878655170937, 8.555557506170537],
           [98.15994744038125, 8.384410165715863],
           [98.23685173725625, 8.188720986564299],
           [98.25338683598491, 8.1464127273116],
           [98.26608977787944, 8.12194217878376],
           [98.29218230717632, 8.111065900394246],
           [98.32891784184429, 8.113105225017607],
           [98.37728658365077, 8.07378287436696],
           [98.4171120231039, 8.079221553710479],
           [98.44320455240077, 8.08058121209791],
           [98.47616353677577, 8.06698442220795],
           [98.50088277505702, 8.03163063002967],
           [98.5379616324789, 7.936432079444191],
           [98.56268087076015, 7.937792214645813],
           [98.56268087076015, 7.956833634413586],
           [98.56680074380702, 8.001713477837239],
           [98.6038796012289, 8.018032197238576],
           [98.76730123208827, 8.035710071100935],
           [98.8290993277914, 7.982674146164554],
           [98.81399312661952, 7.922830479981754],
           [98.80026021646327, 7.838490562331474],
           [98.82772603677577, 7.731000438878468],
           [98.8785378043539, 7.649344054078905],
           [98.96047772085721, 7.549520484153332],
           [98.91103924429471, 7.383399608212374],
           [98.96185101187284, 7.290780457867688],
           [99.07171429312284, 7.327558015376026],
           [99.14175213491971, 7.448766167542537],
           [99.19668377554471, 7.462382976476771],
           [99.24474896109159, 7.42425484571609],
           [99.28457440054471, 7.40246585678119],
           [99.31066692984159, 7.38476151040134],
           [99.30242718374784, 7.342540595334171],
           [99.26534832632596, 7.2839694671545026],
           [99.26946819937284, 7.241739018498298],
           [99.30105389273221, 7.213129046436801],
           [99.33675945913846, 7.237651990603825],
           [99.37246502554471, 7.247188331395104],
           [99.41091717398221, 7.233564925684745],
           [99.41091717398221, 7.21585388369498],
           [99.33126629507596, 7.1545410884665985],
           [99.38482464468534, 7.125925627645656],
           [99.43978230210722, 7.141847911639146],
           [99.46999470445097, 7.080525183083854],
           [99.4878474876541, 7.043727627883744],
           [99.49059406968534, 6.990570452050379],
           [99.50020710679472, 6.9278644745530364],
           [99.5482722923416, 6.926501208240948],
           [99.5867244407791, 6.900598400478361],
           [99.60457722398222, 6.8665136001803075],
           [99.60732380601347, 6.835153426930449],
           [99.72268025132597, 6.746515756713307],
           [99.69933430406034, 6.679685853314214],
           [99.69933430406034, 6.6292164019034],
           [99.73229328843534, 6.445027573728057],
           [99.7954646751541, 6.488693268399135],
           [99.84902302476347, 6.498244635490301],
           [99.91219441148222, 6.464131779222771],
           [99.93416706773222, 6.431381271966836],
           [99.92455403062284, 6.353590378799301],
           [99.94240681382597, 6.320832791504552],
           [99.9437801048416, 6.30035824523497],
           [99.8833553001541, 6.2457555127976265],
           [99.8558894798416, 6.158379314459688],
           [99.88428678411502, 6.071891194625445],
           [99.98591031927127, 6.052772640574602],
           [100.0641879071619, 6.1005677526995665],
           [100.1026400555994, 6.040481784187257],
           [100.06556119817752, 5.961267374674438],
           [100.16993131536502, 5.813734318202781],
           [100.28116788763064, 5.827396426553401],
           [100.30863370794314, 5.819199201390491],
           [100.28666105169314, 5.703059082703872],
           [100.39103116888064, 5.659329625601617],
           [100.7782992352869, 5.590995736638626],
           [100.87626103442342, 5.904010631562902],
           [99.34896432285977, 8.279944124543295],
           [98.77218209629727, 9.955821478000098]]],
         [[[100.29991446446982, 5.704829222817308],
           [100.25596915196982, 5.59003270528241],
           [99.74510489415732, 5.442404161809887],
           [99.75059805821982, 4.70921180466154],
           [99.87694083165732, 4.013604492411981],
           [100.19005118321982, 3.268047269229756],
           [100.60203848790732, 2.7030216183687044],
           [101.38756094884482, 2.615225640178804],
           [101.87095938634482, 3.4983579108027],
           [100.90965567540732, 5.2509800190266365],
           [100.71739493321982, 5.682964976637016]]]]),
    BondariesWCMCForAS = 
    /* color: #00ffff */
    /* shown: false */
    /* locked: true */
    ee.Geometry.Polygon(
        [[[95.33964749157768, 16.695208856448673],
          [94.52665921032768, 16.716254129013105],
          [94.53013127193786, 16.325955825315507],
          [94.18255928154173, 16.130520451735464],
          [93.79599336585677, 15.923912941488357],
          [92.63701077282768, 14.281497396856706],
          [91.91191311657768, 13.449542299295437],
          [91.69218655407768, 9.791427198556617],
          [92.37333889782768, 10.029519571253923],
          [92.32939358532768, 8.533299882177115],
          [93.69169827282768, 6.0270213246383095],
          [94.35087796032768, 6.20180251803793],
          [94.26298733532768, 7.532488322545196],
          [94.10917874157768, 8.7288141619164],
          [92.81279202282768, 9.726463092351683],
          [94.04326077282768, 11.411190094259377],
          [95.05400296032768, 14.387940164517607],
          [94.57060452282768, 14.749464259117644],
          [95.64726467907768, 14.5794091414448],
          [96.63603421032768, 15.51304919048502],
          [97.03154202282768, 13.812555573922232],
          [96.85576077282768, 12.292853979096211],
          [96.74589749157768, 11.001670519523495],
          [97.16337796032768, 9.878026222910373],
          [97.03154202282768, 8.598482547196216],
          [97.20732327282768, 7.924402770453385],
          [98.02031155407768, 6.376525792771139],
          [99.16288967907768, 5.392979274561236],
          [99.58037014782768, 5.19606917966658],
          [99.73417874157768, 4.057233177125881],
          [100.54716702282768, 2.4778242025663926],
          [102.15117092907768, 2.4119662418636683],
          [101.55790921032768, 4.101067163409808],
          [100.98662014782768, 5.633560206346016],
          [100.72294827282768, 6.834887057813266],
          [98.94316311657768, 8.81567666647138],
          [99.22880764782768, 11.432727589597851],
          [99.16288967907768, 12.31432197234051],
          [98.98710842907768, 13.235746870414042],
          [98.39384671032768, 14.791957346870896],
          [98.30595608532768, 17.05266104344462],
          [97.60283108532768, 17.01064303748174],
          [97.00956936657768, 18.037320002837806],
          [96.37236233532768, 17.786428365136604],
          [96.26249905407768, 17.409430504634983],
          [95.75712796032768, 17.178658281709335],
          [95.62529202282768, 16.84247692714126]]]),
    rivermouth = /* color: #c20707 */ee.Geometry.MultiPoint();
/***** End of imports. If edited, may not auto-convert in the playground. *****/
// little viewing script for looking at reefs and classifications for each region. 
//From this region Andaman Sea onwards the map_viewer script is going to be used from the very beginning
//in the workflow 

// imports
//var pkg_vis = require('users/mitchest/global_reefs:Modules/pkg_vis')
//var map_palettes = require('users/mitchest/global_reefs:Modules/colour_pals')

// choogse where to centre (link this dynamically to map app?)
var centre_map = ee.Geometry.Point([95.68022366345264, 12.587883996209781])
Map.centerObject(centre_map, 7)
//splitting North Cari regions


// add some background data
//Map.addLayer(any_rrs, {bands: ['b3','b2','b1'], min: 66, max: 1260}, "Any tide mosaic", false)
//Map.addLayer(high_rrs, {bands: ['b3','b2','b1'], min: 66, max: 1260}, "High tide mosaic", false)

Map.addLayer(low_rrs, {bands: ['b3','b2','b1'], min: 66, max: 1260}, "Dove low tide mosaic", false)
//Map.addLayer(Artifact_layer, {color: 'ffff00'}, 'Artifact Layer', false)

//Map.addLayer(any_depth, {min: -1, max: 1200, palette:['#d0d1e6','#a6bddb','#74a9cf','#3690c0','#0570b0','#045a8d','#023858']}, "Any tide depth", false)
//Map.addLayer(high_depth, {min: -1, max: 1200, palette:['#d0d1e6','#a6bddb','#74a9cf','#3690c0','#0570b0','#045a8d','#023858']}, "High tide depth", false)
//Map.addLayer(low_depth, {min: -1, max: 1200, palette:['#d0d1e6','#a6bddb','#74a9cf','#3690c0','#0570b0','#045a8d','#023858']}, "Low tide depth", false)
//Map.addLayer(pixels.select('depth'), {min: -1, max: 2500, palette:['#d0d1e6','#a6bddb','#74a9cf','#3690c0','#0570b0','#045a8d','#023858']}, "Depth covariate (S2/LS8/Dove)", false)

/*

// nth cari
//Map.addLayer(benthic.updateMask(geo.gt(2)), map_palettes.benthic, "Nth. Cari & Baha Benthic - RAW", false)
Map.addLayer(ee.ImageCollection([benthic_baha,benthic_cari]).mosaic(), map_palettes.benthic, "Nth. Cari & Baha Benthic - RAW", false)
Map.addLayer(benthic_clean, map_palettes.benthic, "Nth. Cari & Baha Benthic - FINAL", false)
Map.addLayer(geo, map_palettes.geo, "Nth. Cari & Baha Geo - RAW", false)
Map.addLayer(geo_clean, map_palettes.geo, "Nth. Cari & Baha Geo - FINAL", false)

// wave data
var kd1 = ee.Image('users/danleeharris/reefwave/fiji_v1_kd1')
var kd2 = ee.Image('users/danleeharris/reefwave/fiji_v1_kd2')

Map.addLayer(kd1, {}, "waves - kd1", false)
Map.addLayer(kd2, {}, "waves - kd2", false)*/

// add training data / sample point distributions
// ----> possibly - points are only intermediate in the mapping script, so will have to pull those out if we want that
//Map.addLayer(ee.Image().byte().paint(fiji_training_geo_oldmaps, 'class_num'), map_palettes.geo, "Training data - geo (old maps) ", false)
//Map.addLayer(ee.Image().byte().paint(fiji_training_geo, 'class_num'), map_palettes.geo, "Training data - geo (new maps)", false)
//Map.addLayer(ee.Image().byte().paint(fiji_training_benthic, 'class_num'), map_palettes.benthic, "Training - benthic (manual curation)", false)
//Map.addLayer(geo_train, {}, "geomorphic training locations", false)

// WCMC

//Map.addLayer(Artifact_layer, {color: 'ffff00'}, 'Artifact Layer', false)
//Map.addLayer(any_depth, {min: -1, max: 1200, palette:['#d0d1e6','#a6bddb','#74a9cf','#3690c0','#0570b0','#045a8d','#023858']}, "Any tide depth", false)
//Map.addLayer(high_depth, {min: -1, max: 1200, palette:['#d0d1e6','#a6bddb','#74a9cf','#3690c0','#0570b0','#045a8d','#023858']}, "High tide depth", false)
//Map.addLayer(low_depth, {min: -1, max: 1200, palette:['#d0d1e6','#a6bddb','#74a9cf','#3690c0','#0570b0','#045a8d','#023858']}, "Low tide depth", false)
//Map.addLayer(pixels.select('depth'), {min: -1, max: 2500, palette:['#d0d1e6','#a6bddb','#74a9cf','#3690c0','#0570b0','#045a8d','#023858']}, "Depth covariate (S2/LS8/Dove)", false)
/*

// nth cari
//Map.addLayer(benthic.updateMask(geo.gt(2)), map_palettes.benthic, "Nth. Cari & Baha Benthic - RAW", false)
Map.addLayer(ee.ImageCollection([benthic_baha,benthic_cari]).mosaic(), map_palettes.benthic, "Nth. Cari & Baha Benthic - RAW", false)
Map.addLayer(benthic_clean, map_palettes.benthic, "Nth. Cari & Baha Benthic - FINAL", false)
Map.addLayer(geo, map_palettes.geo, "Nth. Cari & Baha Geo - RAW", false)
Map.addLayer(geo_clean, map_palettes.geo, "Nth. Cari & Baha Geo - FINAL", false)

// wave data
var kd1 = ee.Image('users/danleeharris/reefwave/fiji_v1_kd1')
var kd2 = ee.Image('users/danleeharris/reefwave/fiji_v1_kd2')

Map.addLayer(kd1, {}, "waves - kd1", false)
Map.addLayer(kd2, {}, "waves - kd2", false)*/
// add training data / sample point distributions
// ----> possibly - points are only intermediate in the mapping script, so will have to pull those out if we want that
//Map.addLayer(ee.Image().byte().paint(fiji_training_geo_oldmaps, 'class_num'), map_palettes.geo, "Training data - geo (old maps) ", false)
//Map.addLayer(ee.Image().byte().paint(fiji_training_geo, 'class_num'), map_palettes.geo, "Training data - geo (new maps)", false)
//Map.addLayer(ee.Image().byte().paint(fiji_training_benthic, 'class_num'), map_palettes.benthic, "Training - benthic (manual curation)", false)
//Map.addLayer(geo_train, {}, "geomorphic training locations", false)
// WCMC

var wcmc=wcmc.filterBounds(BondariesWCMCForAS)

Map.addLayer(wcmc, {color:'#ffff00'}, "WCMC layer", false)

// #############
// example confidence layers

/*
// depth and nir combos
var depth_nir_flag = fiji_dove_ocean.select('b4').multiply(fiji_high_depth_ocean).gt(250000)
//Map.addLayer(depth_nir_flag, {}, "NIR flag", false)
var conf_flag = fiji_high_depth_ocean.eq(-1)
                        .or(fiji_high_depth_ocean.gt(1000))
                        .add(depth_nir_flag.eq(1))
                        .selfMask()
Map.addLayer(conf_flag, {min:1,max:2,palette:["#f7f7f7","#bababa"]}, "Confidence flag", false)

//straight depth missing/-1
var depth_flag = fiji_high_depth_ocean.gt(0).selfMask()
//Map.addLayer(depth_flag, {min:0,max:1,palette:["#ffff00"]}, "Valid depth retrievals", false)

//Map.addLayer(fiji_geo_clean.gt(0).updateMask(fiji_high_depth_ocean.lte(0)), {min:0,max:1,palette:["#ff0000"]}, "Unmapped area via original algorithm", false)
*/


/*

////////// UI SET UP //////////


//Generate title
var title = ui.Label({
  value: 'Coral Atlas map classes',
  style: {fontWeight: 'bold', fontSize: '18px'}
})

// generate the legend
var geo_legend = pkg_vis.discrete_legend(map_palettes.geo_atlas_names, map_palettes.geo_atlas_cols, 'Geomorphic Zone', false)
var benthic_legend = pkg_vis.discrete_legend(map_palettes.benthic_atlas_names, map_palettes.benthic_atlas_cols, 'Benthic Habitat', false)
//var mask_legend = pkg_vis.discrete_legend(["Low confidence depth","Water conditions"], ["#f7f7f7","#bababa"], 'Confidence Mask reason', false)
pkg_vis.add_lgds([title, geo_legend, benthic_legend])//, mask_legend])
// generate the legend




///////// LINK TO DATA EXPORT /////////
// hopefully eventually we can link this to a download link in the app?

// // map to export 
// var export_map = gbr_geo_map10
// // extent
// var export_convhull = export_map.gt(0).reduceToVectors({scale: 1000, maxPixels: 1e13, bestEffort: true, geometry: export_map.geometry().bounds()}).geometry().convexHull({maxError: 100})
// // export
// Export.image.toDrive({
//     image: export_map,
//     description: 'gbr_sent2_geo_map',
//     folder: 'GBR Mapping',
//     region: export_convhull,
//     scale: 10,
//     maxPixels: 1e13
// })

*/