/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var depth_pal = {"opacity":1,"bands":["depth"],"max":5,"palette":["e4e1ff","7f89ff","3a52ff","0007ff","000258"]},
    wcmc = ee.FeatureCollection("projects/coral_atlas/global_datasets/wcmc_reefs_2018v4_dissolved"),
    BondariesWCMCForWIO = 
    /* color: #00ffff */
    /* shown: false */
    /* locked: true */
    ee.Geometry.Polygon(
        [[[54.701770985703206, -2.9751249685105154],
          [52.548450673203206, -4.772691629173448],
          [52.196888173203206, -5.910289150084192],
          [51.757435048203206, -8.091037974566733],
          [48.285755360703206, -8.65623438835204],
          [44.814075673203206, -9.350691639103687],
          [46.440052235703206, -10.864858654100164],
          [45.736927235703206, -11.72673086956205],
          [43.583606923203206, -10.605801768506067],
          [41.781849110703206, -10.605801768506067],
          [41.737903798203206, -12.543027437564627],
          [44.638294423203206, -13.954584744088688],
          [46.352161610703206, -13.783928424683062],
          [48.857044423203206, -10.99430318398806],
          [49.955677235703206, -10.908013101551091],
          [52.680286610703206, -10.95116128603305],
          [53.339466298203206, -8.438948520327026],
          [54.613880360703206, -6.827435160865552],
          [55.624622548203206, -6.914694536706059],
          [56.108020985703206, -11.511507059571993],
          [58.788685048203206, -15.865441173681486],
          [56.942981923203206, -19.631456469862268],
          [54.438099110703206, -20.539442163648662],
          [54.130481923203206, -21.482966628121225],
          [54.965442860703206, -22.420415520660942],
          [55.844349110703206, -22.095048738332846],
          [57.074817860703206, -21.196440284100703],
          [58.481067860703206, -20.827232047085705],
          [59.184192860703206, -17.883867297837703],
          [63.754505360703206, -20.909357190677294],
          [64.9849741107032, -20.00354040738218],
          [63.666614735703206, -19.009403584868657],
          [61.776966298203206, -19.175515382142862],
          [60.370716298203206, -18.009288625640345],
          [60.458606923203206, -15.187980739313776],
          [58.964466298203206, -15.187980739313776],
          [56.811145985703206, -11.55456509703201],
          [57.514270985703206, -10.216806458907836],
          [56.327747548203206, -9.17720313716965],
          [56.327747548203206, -7.786369242288465],
          [57.250599110703206, -7.089164748909251],
          [56.108020985703206, -5.866575713917645],
          [57.602161610703206, -5.647957630653708],
          [57.206653798203206, -4.422260866394937],
          [56.547474110703206, -3.4138941523262103]]]),
    no_reef = 
    /* color: #01ff14 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[55.2248077855843, -20.980851493012523],
          [55.33741764886555, -21.08595829180467],
          [55.4884796605843, -21.2191575703884],
          [55.5763702855843, -21.37014202611179],
          [55.5763702855843, -21.549074333518252],
          [55.95265202386555, -21.487750868105195],
          [56.05702214105305, -21.23195887279921],
          [55.8839874730843, -20.93981411727935],
          [55.6917267308968, -20.672797751973356],
          [55.42530827386555, -20.62910598668815],
          [55.1479034887093, -20.793527159750223],
          [55.1204376683968, -20.867971649301655]]]),
    low_rrs = ee.Image("projects/coral_atlas/workflow/mapping/west_indian_ocean/west_indian_ocean_islands_low_tide_normalized_sr_jan2018_jan2020_v2_shift_mosaic/20200131T210330Z/west_indian_ocean_islands_low_tide_normalized_sr_jan2018_jan2020_v2_shift_mosaic"),
    wio_geo = ee.Image("projects/coral_atlas/west_indian_ocean/in_out/wio_geo"),
    wio_benthic = ee.Image("projects/coral_atlas/west_indian_ocean/in_out/wio_benthic"),
    RCtoIRF = 
    /* color: #fffe44 */
    /* shown: false */
    ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.659204329888894,
                -4.334751664179756
              ],
              [
                55.669160689752175,
                -4.329274193622515
              ],
              [
                55.66529830877073,
                -4.323283164810927
              ],
              [
                55.65182289067991,
                -4.329445365177744
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.641437377374245,
                -4.348102832274304
              ],
              [
                55.65422614995725,
                -4.352638752251315
              ],
              [
                55.647445525567605,
                -4.339202079783282
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                47.27158998556605,
                -11.579461643890012
              ],
              [
                47.28480791159144,
                -11.599472871643533
              ],
              [
                47.31931184835902,
                -11.596782369818476
              ],
              [
                47.31364702291957,
                -11.590224163011682
              ],
              [
                47.31965517111293,
                -11.587197246399292
              ],
              [
                47.32703661032191,
                -11.58047064766063
              ],
              [
                47.3208568007516,
                -11.570716792066495
              ],
              [
                47.2853228957223,
                -11.555749007824549
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                46.13475192333875,
                -9.376827643454927
              ],
              [
                46.2308822944325,
                -9.497396375688599
              ],
              [
                46.24324191357312,
                -9.357857947235685
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                51.15290579490269,
                -10.10397714507844
              ],
              [
                51.16492209128941,
                -10.126622223923384
              ],
              [
                51.18586477927769,
                -10.133043671935397
              ],
              [
                51.18895468406285,
                -10.127974118400282
              ],
              [
                51.18277487449254,
                -10.111413018656622
              ],
              [
                51.17247519187535,
                -10.105329134887462
              ],
              [
                51.16148886375035,
                -10.108709084533347
              ],
              [
                51.15668234519566,
                -10.105329134887462
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                51.153592440410506,
                -10.187451824088079
              ],
              [
                51.1422627895316,
                -10.196237364397888
              ],
              [
                51.15530905418004,
                -10.200630043705933
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                53.29520670442564,
                -5.758073615577071
              ],
              [
                53.29709497957212,
                -5.767638068513723
              ],
              [
                53.30550628571076,
                -5.773018001300501
              ],
              [
                53.305592138037454,
                -5.78236870635847
              ],
              [
                53.312201180744,
                -5.782838385015353
              ],
              [
                53.31614939241392,
                -5.764051417546372
              ],
              [
                53.318724313068216,
                -5.757561229623883
              ],
              [
                53.31443277864439,
                -5.744580631479481
              ],
              [
                53.29812494783384,
                -5.750558575310261
              ],
              [
                53.29374759236438,
                -5.752949724696832
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                53.28197481703087,
                -5.413085971490063
              ],
              [
                53.29141619276329,
                -5.418896402244171
              ],
              [
                53.30549242567345,
                -5.416332983798188
              ],
              [
                53.30755236219689,
                -5.412915075622324
              ],
              [
                53.30223085951134,
                -5.406933689833423
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                53.34832207834808,
                -5.434191158585586
              ],
              [
                53.343086267226184,
                -5.4484603740577935
              ],
              [
                53.357505822890246,
                -5.4484603740577935
              ],
              [
                53.36523058485314,
                -5.442821115768935
              ],
              [
                53.36591723036095,
                -5.437010915552233
              ],
              [
                53.36523058485314,
                -5.431713331183104
              ],
              [
                53.35699083875939,
                -5.424364991894854
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.65503862645146,
                -3.805372220554712
              ],
              [
                55.66018848849534,
                -3.8033168345054644
              ],
              [
                55.66602495457646,
                -3.798863445531388
              ],
              [
                55.65950182225224,
                -3.793039763102444
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.838132991883604,
                -4.376751939394748
              ],
              [
                55.85126508722052,
                -4.383170441037057
              ],
              [
                55.85624326715216,
                -4.367338037459903
              ],
              [
                55.85006345758185,
                -4.364171516610309
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.822170534207224,
                -4.362437891154656
              ],
              [
                55.822127618862986,
                -4.365561628485353
              ],
              [
                55.823372163845896,
                -4.368514190174713
              ],
              [
                55.824659624173044,
                -4.371124416191418
              ],
              [
                55.82676247604072,
                -4.373563471631376
              ],
              [
                55.82852200515449,
                -4.37510392360749
              ],
              [
                55.83152607925117,
                -4.370996044632586
              ],
              [
                55.82551793105781,
                -4.362181145042702
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.851256740269505,
                -4.29519975149983
              ],
              [
                55.86636294144138,
                -4.290021561595102
              ],
              [
                55.87430228012546,
                -4.295285341120438
              ],
              [
                55.87812174576267,
                -4.284329791695867
              ],
              [
                55.84769476669773,
                -4.281334106310278
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.258010829058826,
                -4.379818527407898
              ],
              [
                55.229343379107654,
                -4.376823220073382
              ],
              [
                55.23586651143187,
                -4.409257480001241
              ],
              [
                55.26118656453246,
                -4.408915173285934
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.35521307790457,
                -4.645910963031452
              ],
              [
                55.396583469750276,
                -4.663704862431732
              ],
              [
                55.433833988549104,
                -4.6086107570909345
              ],
              [
                55.435550602318635,
                -4.554710216817644
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.44239585237682,
                -4.670518558602551
              ],
              [
                55.43432776766002,
                -4.6806128762013195
              ],
              [
                55.446515725423694,
                -4.688311834135644
              ],
              [
                55.45767371492565,
                -4.679073074445793
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.48256461458385,
                -4.724068102288702
              ],
              [
                55.48101966219127,
                -4.740833565150735
              ],
              [
                55.45552795307652,
                -4.746650032094654
              ],
              [
                55.45977651222561,
                -4.757769776019711
              ],
              [
                55.4798180325526,
                -4.75315078889819
              ],
              [
                55.49578254060924,
                -4.746992204509995
              ],
              [
                55.493722604085804,
                -4.7278318129657775
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.496154133136905,
                -4.780879444567066
              ],
              [
                55.49254924422089,
                -4.786524537272645
              ],
              [
                55.50456554060761,
                -4.790715560827764
              ],
              [
                55.502162251106206,
                -4.783146035573707
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                56.58070870804062,
                -10.364343193524466
              ],
              [
                56.59293998006754,
                -10.361515146625672
              ],
              [
                56.60199537568282,
                -10.381566937137512
              ],
              [
                56.60917296190687,
                -10.391645121766105
              ],
              [
                56.61211808261318,
                -10.398921138931383
              ],
              [
                56.620135645987546,
                -10.409422664929936
              ],
              [
                56.628840417912855,
                -10.41992397410005
              ],
              [
                56.632420012635734,
                -10.42530086518548
              ],
              [
                56.644509449261996,
                -10.433644867449976
              ],
              [
                56.64712070388197,
                -10.43317417859072
              ],
              [
                56.626901575544764,
                -10.413119442525527
              ],
              [
                56.620156695204436,
                -10.385379068692718
              ],
              [
                56.61686552172269,
                -10.381123614468525
              ],
              [
                56.60641558074419,
                -10.355942536279686
              ],
              [
                56.620705808870696,
                -10.343741537412575
              ],
              [
                56.57641717361679,
                -10.32668504484843
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                56.65022822086627,
                -10.436970217172895
              ],
              [
                56.65782440565385,
                -10.444735949859266
              ],
              [
                56.66280258558549,
                -10.441612819923167
              ],
              [
                56.649927982314004,
                -10.426587594314393
              ],
              [
                56.64537895582475,
                -10.42785379300262
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                57.70443238575737,
                -20.436191397651676
              ],
              [
                57.72571839649956,
                -20.442625554565332
              ],
              [
                57.73670472462456,
                -20.436834825460004
              ],
              [
                57.74700440724175,
                -20.425252713029234
              ],
              [
                57.74734772999565,
                -20.40305122731986
              ],
              [
                57.77962006886284,
                -20.387604827810698
              ],
              [
                57.7995327885894,
                -20.36121364858639
              ],
              [
                57.79644283083761,
                -20.321940832249453
              ],
              [
                57.77412690480034,
                -20.3599261585281
              ],
              [
                57.688639539077684,
                -20.400155145353963
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                57.78449161612187,
                -20.309407230127995
              ],
              [
                57.81264408194218,
                -20.27817211313118
              ],
              [
                57.80921085440312,
                -20.25176226021794
              ],
              [
                57.79376135112857,
                -20.23726741952989
              ],
              [
                57.78929813467656,
                -20.25240645643799
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                57.726741869244194,
                -20.177436349040182
              ],
              [
                57.76931389072857,
                -20.164223429866812
              ],
              [
                57.744937975201225,
                -20.13070271457168
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                63.32898554372036,
                -19.68283257145161
              ],
              [
                63.3094161467477,
                -19.730991499789965
              ],
              [
                63.35404810475551,
                -19.797872762078914
              ],
              [
                63.45498499440395,
                -19.763627890677096
              ],
              [
                63.49137720631801,
                -19.72808298279924
              ],
              [
                63.49137720631801,
                -19.684125617921634
              ],
              [
                63.43953547047817,
                -19.66602201763201
              ],
              [
                63.40348658131801,
                -19.673780953911027
              ],
              [
                63.39078363942348,
                -19.66957824338178
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    SSBRStoSL = 
    /* color: #61f1f4 */
    /* shown: false */
    ee.Geometry.MultiPolygon(
        [[[[47.59276366952485, -9.687179116346291],
           [47.585897214446724, -9.690224948811181],
           [47.55602813485688, -9.724404059517544],
           [47.583150632415474, -9.759594740247222],
           [47.602376706634224, -9.75485774946257],
           [47.61027312997407, -9.741999863736947],
           [47.62675262216157, -9.741323119180288],
           [47.635335691009224, -9.753504311155895],
           [47.64460540536469, -9.738277751694888],
           [47.65112853768891, -9.715605810020225],
           [47.640828855071724, -9.702746413933353],
           [47.59894347909516, -9.685486975255515]]],
         [[[46.25038479518611, -9.40622340341489],
           [46.25931118678767, -9.425867826694434],
           [46.330036784724705, -9.429933909852755],
           [46.334842192647045, -9.405545989593882],
           [46.270640837666576, -9.387932764844745]]]]),
    RCtoORF = 
    /* color: #ffc756 */
    /* shown: false */
    ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.33929678436959,
                -5.819532133315801
              ],
              [
                55.333116974799275,
                -5.8584678623598325
              ],
              [
                55.36813589569771,
                -5.845148049131459
              ],
              [
                55.363329377143025,
                -5.816116589567722
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                43.506915678114375,
                -11.926392658304064
              ],
              [
                43.50296746644445,
                -11.913627711464002
              ],
              [
                43.51309548768469,
                -11.909596550929056
              ],
              [
                43.51876031312414,
                -11.903717667927056
              ],
              [
                43.52133523377844,
                -11.900190277085507
              ],
              [
                43.522880186171015,
                -11.895151067927433
              ],
              [
                43.52133523377844,
                -11.88809601826973
              ],
              [
                43.51704369935461,
                -11.883560532624061
              ],
              [
                43.512923826307734,
                -11.883056585110332
              ],
              [
                43.511378873915156,
                -11.881376753328569
              ],
              [
                43.51532708558508,
                -11.87364939369107
              ],
              [
                43.49232446107336,
                -11.313008866314455
              ],
              [
                43.14350854310461,
                -11.338593277865346
              ],
              [
                43.17646752747961,
                -11.832321102203176
              ],
              [
                43.523910154432734,
                -12.027147416453223
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                43.718756638793565,
                -12.274879754714837
              ],
              [
                43.71832748421397,
                -12.269595971553105
              ],
              [
                43.71103185572926,
                -12.266408876448143
              ],
              [
                43.709315237298256,
                -12.26204752601617
              ],
              [
                43.70090380682758,
                -12.258860339613284
              ],
              [
                43.690432434174625,
                -12.258021599842035
              ],
              [
                43.68322263662195,
                -12.25684735975713
              ],
              [
                43.67678531739249,
                -12.255169864897628
              ],
              [
                43.67275126404055,
                -12.25248585102713
              ],
              [
                43.6659706211712,
                -12.24861085673042
              ],
              [
                43.62674588940111,
                -12.242739394259143
              ],
              [
                43.62073772450368,
                -12.251965917921538
              ],
              [
                43.59699679070081,
                -12.333640628673626
              ],
              [
                43.63622152122414,
                -12.41634119358034
              ],
              [
                43.67707704212393,
                -12.4257292488325
              ],
              [
                43.715185973631854,
                -12.42363373080356
              ],
              [
                43.73887530940788,
                -12.425142505939043
              ],
              [
                43.751664117489675,
                -12.394043208962541
              ],
              [
                43.83431929997707,
                -12.425226325763028
              ],
              [
                43.92384173926684,
                -12.410463780361823
              ],
              [
                43.898092459853586,
                -12.367206327954133
              ],
              [
                43.88092627529285,
                -12.38598563886182
              ],
              [
                43.872477288280706,
                -12.386781646407787
              ],
              [
                43.87256311890763,
                -12.376134646365466
              ],
              [
                43.872477287777095,
                -12.368840781586716
              ],
              [
                43.869129881502616,
                -12.362468963054202
              ],
              [
                43.854109469371224,
                -12.355593932309587
              ],
              [
                43.795229454284915,
                -12.329601329923106
              ],
              [
                43.73734219526262,
                -12.292662771154447
              ],
              [
                43.76111736127429,
                -12.302055266699165
              ],
              [
                43.77004377736395,
                -12.292830497210288
              ],
              [
                43.766438895508784,
                -12.29345946332129
              ],
              [
                43.768756313488424,
                -12.289643683453892
              ],
              [
                43.75708330780394,
                -12.28394086775953
              ],
              [
                43.75124680497305,
                -12.27966367486131
              ],
              [
                43.74669776600604,
                -12.280502345612716
              ],
              [
                43.73365146561086,
                -12.270605860477158
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                44.20584584919939,
                -12.185539758565815
              ],
              [
                44.214772240800954,
                -12.195103827515704
              ],
              [
                44.22181035725603,
                -12.200640762387955
              ],
              [
                44.23193837849627,
                -12.206513142648076
              ],
              [
                44.24258138386736,
                -12.210204286460636
              ],
              [
                44.25185109822283,
                -12.215573131055422
              ],
              [
                44.26215078084002,
                -12.219767465116897
              ],
              [
                44.27348043171892,
                -12.225639421085694
              ],
              [
                44.280690209550954,
                -12.228659233386793
              ],
              [
                44.291676537675954,
                -12.233524413978877
              ],
              [
                44.310902611894704,
                -12.245099828335048
              ],
              [
                44.315880791826345,
                -12.247448401212063
              ],
              [
                44.32326223103533,
                -12.248287172175354
              ],
              [
                44.33150197712908,
                -12.246777382522277
              ],
              [
                44.34729482380877,
                -12.243925534061237
              ],
              [
                44.349354760332204,
                -12.246777382522277
              ],
              [
                44.354332940263845,
                -12.249964706104828
              ],
              [
                44.369095818681814,
                -12.249964706104828
              ],
              [
                44.377335564775564,
                -12.254829494190743
              ],
              [
                44.39244176594744,
                -12.277642475310643
              ],
              [
                44.39810659138689,
                -12.28334541188367
              ],
              [
                44.40458869607414,
                -12.275860388430385
              ],
              [
                44.44235419900383,
                -12.300013318766805
              ],
              [
                44.4931127855162,
                -12.345062595559995
              ],
              [
                44.48246978014511,
                -12.34724258476482
              ],
              [
                44.48246978014511,
                -12.364681844525578
              ],
              [
                44.53516982286972,
                -12.38312594922794
              ],
              [
                44.54615615099472,
                -12.328963651938503
              ],
              [
                44.56240267151398,
                -12.20500231531322
              ],
              [
                44.53974336975617,
                -12.178827126149779
              ],
              [
                44.50986612291689,
                -12.091877617636053
              ],
              [
                44.485490207389546,
                -12.062669651488353
              ],
              [
                44.450400298859655,
                -12.042530368595646
              ],
              [
                44.39066213967997,
                -12.071740529508805
              ],
              [
                44.373496001984655,
                -12.134850451637787
              ],
              [
                44.337790435578405,
                -12.160450307103437
              ],
              [
                44.22410006952882,
                -12.15188656860394
              ],
              [
                44.184961275583504,
                -12.164220682316332
              ],
              [
                44.197149233347176,
                -12.167576804704852
              ],
              [
                44.204444841867684,
                -12.175547425480426
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                45.03757112960229,
                -12.626090775472209
              ],
              [
                45.016285118860104,
                -12.62357811094676
              ],
              [
                44.99208086470971,
                -12.644516227491131
              ],
              [
                45.01010530928979,
                -12.669472219779344
              ],
              [
                45.05387896041284,
                -12.651216062400536
              ],
              [
                45.04752748946557,
                -12.63212106961759
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                46.45964661355934,
                -12.32157784418613
              ],
              [
                46.45054856058083,
                -12.328118343611097
              ],
              [
                46.44127884622536,
                -12.337677241544574
              ],
              [
                46.428919227084734,
                -12.352434153335853
              ],
              [
                46.43578568216286,
                -12.362830568753916
              ],
              [
                46.44591370340309,
                -12.365848805478324
              ],
              [
                46.455355079135515,
                -12.365848805478324
              ],
              [
                46.472864539584734,
                -12.349751140343505
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                46.456385047397234,
                -12.314198623406687
              ],
              [
                46.48968735452614,
                -12.31822367864954
              ],
              [
                46.50994339700661,
                -12.285853779466972
              ],
              [
                46.463079841098406,
                -12.277802615711543
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                47.70351453091799,
                -10.118734474066663
              ],
              [
                47.773380711337914,
                -10.116030601574497
              ],
              [
                47.77698560025393,
                -10.04876446170537
              ],
              [
                47.70557446744143,
                -10.043017457841731
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                46.47070188457929,
                -9.768643115754143
              ],
              [
                46.541769694637885,
                -9.763906253670994
              ],
              [
                46.55241270000898,
                -9.693352885253203
              ],
              [
                46.48666639263593,
                -9.691999197968842
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                46.244958527342654,
                -9.362600468405482
              ],
              [
                46.24358523632703,
                -9.382586096129732
              ],
              [
                46.50279391552625,
                -9.449648075277832
              ],
              [
                46.527856476561404,
                -9.443890739902903
              ],
              [
                46.531289704100466,
                -9.368697900517295
              ],
              [
                46.390869441313534,
                -9.357886654018097
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                46.23363469612714,
                -9.4723263312725
              ],
              [
                46.22917150032636,
                -9.501448274289746
              ],
              [
                46.261958823324406,
                -9.50805116129674
              ],
              [
                46.26487706673261,
                -9.477405917969836
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                50.71165643323697,
                -9.32507794343911
              ],
              [
                50.71208558667935,
                -9.33303931666807
              ],
              [
                50.71766458143033,
                -9.349723732317948
              ],
              [
                50.744443756235015,
                -9.342779047271694
              ],
              [
                50.73955140699185,
                -9.317370483535326
              ],
              [
                50.71217141736783,
                -9.321012491291235
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                51.01557669334019,
                -10.172921360856117
              ],
              [
                51.05265555076207,
                -10.215159243411277
              ],
              [
                51.07050833396519,
                -10.251986098728617
              ],
              [
                51.08836111716832,
                -10.250634730068873
              ],
              [
                51.09797415427769,
                -10.238810008505872
              ],
              [
                51.101407381816756,
                -10.226309109255142
              ],
              [
                51.11170706443394,
                -10.23306641323344
              ],
              [
                51.129903170390975,
                -10.223268275553675
              ],
              [
                51.14191946677769,
                -10.214821362582716
              ],
              [
                51.151875826640975,
                -10.21245618673018
              ],
              [
                51.15668234519566,
                -10.197588964483849
              ],
              [
                51.11136374168004,
                -10.203671093884072
              ],
              [
                51.167325350566756,
                -10.175962675350625
              ],
              [
                51.18346152000035,
                -10.150279554085666
              ],
              [
                51.145352694316756,
                -10.10127314840611
              ],
              [
                51.04029593162144,
                -10.133043671935397
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                52.80185682073075,
                -6.996809805421099
              ],
              [
                52.705726449637,
                -6.96784379746837
              ],
              [
                52.69821885367281,
                -7.059506527882589
              ],
              [
                52.70611527701266,
                -7.154216960447623
              ],
              [
                52.731864483555626,
                -7.159667325120352
              ],
              [
                52.746627361973594,
                -7.100391122599057
              ],
              [
                52.77512315054781,
                -7.067683736538138
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                53.30035654573423,
                -5.772078652575925
              ],
              [
                53.301558175372904,
                -5.775836042688255
              ],
              [
                53.3067080166815,
                -5.775152882703018
              ],
              [
                53.30636469392759,
                -5.77088311413417
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                52.69178327345392,
                -5.953770872489208
              ],
              [
                52.8277390840008,
                -6.34700139607899
              ],
              [
                53.22736676954767,
                -6.27875321290522
              ],
              [
                53.24796613478205,
                -5.878642172794373
              ],
              [
                53.25482451449747,
                -5.5903299808824904
              ],
              [
                53.0969041230633,
                -5.75841520595583
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                53.63972405482917,
                -5.6922589406145185
              ],
              [
                53.64238480617195,
                -5.707461266500242
              ],
              [
                53.66126755763679,
                -5.701739089967022
              ],
              [
                53.67045144130378,
                -5.697554178464409
              ],
              [
                53.685900965229564,
                -5.68739069503575
              ],
              [
                53.70143631984382,
                -5.6756896556542165
              ],
              [
                53.68821839381843,
                -5.669454698233348
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                53.30720903944298,
                -5.4332513443483865
              ],
              [
                53.33536150526329,
                -5.432909563984309
              ],
              [
                53.35699083875939,
                -5.425561239275976
              ],
              [
                53.36814882826134,
                -5.4207762355237845
              ],
              [
                53.322315240614856,
                -5.397021549006774
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.210666939191654,
                -3.717638233692893
              ],
              [
                55.20937947560395,
                -3.7200364315433716
              ],
              [
                55.21092442799653,
                -3.7232911195414613
              ],
              [
                55.213327687273875,
                -3.7171243320922356
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.66877153660771,
                -3.795924953390395
              ],
              [
                55.664050856192574,
                -3.7965672804065105
              ],
              [
                55.66018846776005,
                -3.7989224318837214
              ],
              [
                55.6600168063831,
                -3.8038040174246266
              ],
              [
                55.658815176744426,
                -3.8120255726546812
              ],
              [
                55.66139009739872,
                -3.817934766932993
              ],
              [
                55.668084891099895,
                -3.8165645226041076
              ],
              [
                55.671088965196574,
                -3.8116830094216483
              ],
              [
                55.67289140965458,
                -3.8084286519038124
              ],
              [
                55.67374971653935,
                -3.8044891500253337
              ],
              [
                55.67340639378544,
                -3.8009778396900873
              ],
              [
                55.672290594835246,
                -3.7972952305645626
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.64312993577388,
                -4.354694517053291
              ],
              [
                55.64862309983638,
                -4.3516135261936135
              ],
              [
                55.64089833787349,
                -4.348190188230165
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.660050636501005,
                -4.334208518921855
              ],
              [
                55.66238952276199,
                -4.337353769542509
              ],
              [
                55.66889119741409,
                -4.333823385293336
              ],
              [
                55.66663814184158,
                -4.3306353271695155
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.666691992990636,
                -4.301611100513004
              ],
              [
                55.678708289377354,
                -4.328999056865401
              ],
              [
                55.69072458576407,
                -4.326260305722466
              ],
              [
                55.71201059650626,
                -4.359124664009533
              ],
              [
                55.78136179279532,
                -4.390618325840266
              ],
              [
                55.82530801453865,
                -4.350907942829453
              ],
              [
                55.86058418476101,
                -4.369736300421399
              ],
              [
                55.90873580733793,
                -4.362719778609833
              ],
              [
                55.94727291298534,
                -4.344061577173539
              ],
              [
                55.86654849223383,
                -4.290699231399096
              ],
              [
                55.81706735920157,
                -4.313935803109915
              ],
              [
                55.75114939045157,
                -4.263266308588703
              ],
              [
                55.685918067209386,
                -4.275591629732688
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.66898822786148,
                -4.206977904255943
              ],
              [
                55.65682172776993,
                -4.20755570014019
              ],
              [
                55.65940062280913,
                -4.217635755050811
              ],
              [
                55.67688862558623,
                -4.217892549756221
              ],
              [
                55.67712465997954,
                -4.21207184893395
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.18918378062324,
                -4.525006112002212
              ],
              [
                55.28325421519355,
                -4.55888832609282
              ],
              [
                55.28771741099433,
                -4.451958954340111
              ],
              [
                55.189527103377145,
                -4.452985814233423
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.455037319292884,
                -4.579017315359618
              ],
              [
                55.46843212520337,
                -4.586657030600836
              ],
              [
                55.48096340572095,
                -4.6075323446688286
              ],
              [
                55.49203083706309,
                -4.652059088429053
              ],
              [
                55.50524876308848,
                -4.658389606607151
              ],
              [
                55.52965917426029,
                -4.666636467080723
              ],
              [
                55.54356374579349,
                -4.658595082585807
              ],
              [
                55.523525384424154,
                -4.637082744185579
              ],
              [
                55.519233850000326,
                -4.597386550660362
              ],
              [
                55.46378629825307,
                -4.549132887254035
              ],
              [
                55.44404616689486,
                -4.56350615276884
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.40394370393932,
                -4.654606881736762
              ],
              [
                55.39424519368318,
                -4.671031684869496
              ],
              [
                55.36965465160435,
                -4.6629903828397605
              ],
              [
                55.3780228360194,
                -4.69327333985834
              ],
              [
                55.433984444906116,
                -4.680955053909141
              ],
              [
                55.44205252962291,
                -4.670176375797151
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.457424236490894,
                -4.679586342074018
              ],
              [
                55.44575126285808,
                -4.688996181848227
              ],
              [
                55.470642162516285,
                -4.742715377449574
              ],
              [
                55.48025519962566,
                -4.740833565150735
              ],
              [
                55.48240105025933,
                -4.725008880905564
              ],
              [
                55.48797996158855,
                -4.710894954129992
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.4590590221943,
                -4.775132575467983
              ],
              [
                55.492962144142545,
                -4.786080683517018
              ],
              [
                55.49811198545114,
                -4.777869618879127
              ],
              [
                55.482490800148405,
                -4.752637086726823
              ],
              [
                55.459230683571256,
                -4.7578547371020425
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.50370723372284,
                -4.812801609576332
              ],
              [
                55.5452492869455,
                -4.8078409639443604
              ],
              [
                55.54130107527558,
                -4.788853331710609
              ],
              [
                55.52979976301972,
                -4.7878269581748185
              ],
              [
                55.53366214400116,
                -4.799202512070735
              ],
              [
                55.504651371296085,
                -4.790906074160919
              ],
              [
                55.49847156172577,
                -4.788682269561601
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.525721578714546,
                -4.7119223526496405
              ],
              [
                55.52638672978261,
                -4.703539225599299
              ],
              [
                55.52868272451027,
                -4.698663391095348
              ],
              [
                55.533349763044306,
                -4.684506082337838
              ],
              [
                55.51913418282717,
                -4.679245285923883
              ],
              [
                55.512181824925236,
                -4.735360294227143
              ],
              [
                55.51029354977875,
                -4.776417176015497
              ],
              [
                55.52848965573578,
                -4.790786504972009
              ],
              [
                55.52986294675141,
                -4.774877587179928
              ],
              [
                55.5211082165268,
                -4.762389683476179
              ],
              [
                55.52024990964203,
                -4.753322981137168
              ],
              [
                55.51973492551117,
                -4.747506543221497
              ],
              [
                55.523683137181095,
                -4.741861130112805
              ],
              [
                55.52677304196625,
                -4.735873520335364
              ],
              [
                55.528146332981876,
                -4.729543705062217
              ],
              [
                55.526429719212345,
                -4.72133196661392
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                55.94070296643315,
                -4.61506257813227
              ],
              [
                55.975550225954635,
                -4.574680697719454
              ],
              [
                55.92473845837651,
                -4.569718359978716
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                56.23470609447059,
                -7.20002195173387
              ],
              [
                56.24517743846473,
                -7.194401760594204
              ],
              [
                56.25015561839637,
                -7.186737751446522
              ],
              [
                56.25770871898231,
                -7.178051718148766
              ],
              [
                56.27968137523231,
                -7.145520199901992
              ],
              [
                56.29015271922645,
                -7.129877220087756
              ],
              [
                56.29530256053504,
                -7.104496754813049
              ],
              [
                56.29701917430457,
                -7.095468465938217
              ],
              [
                56.30165403148231,
                -7.088313847087497
              ],
              [
                56.286719491687386,
                -7.083544039459868
              ],
              [
                56.25908200999793,
                -7.119997742775561
              ],
              [
                56.24208753367957,
                -7.152531078575268
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                56.59425666924863,
                -10.367250038432584
              ],
              [
                56.599149018491794,
                -10.377803542939352
              ],
              [
                56.602324753965426,
                -10.384388749403044
              ],
              [
                56.6079037487164,
                -10.39224016045171
              ],
              [
                56.61344364714999,
                -10.404380878595553
              ],
              [
                56.618850980524016,
                -10.41062785398809
              ],
              [
                56.62451580596347,
                -10.41729678420743
              ],
              [
                56.63155392241855,
                -10.42683563885913
              ],
              [
                56.63352801317178,
                -10.429790093851283
              ],
              [
                56.63618877959628,
                -10.430887453305116
              ],
              [
                56.64707435124772,
                -10.438984603552885
              ],
              [
                56.657445538411594,
                -10.448431961874661
              ],
              [
                56.640708554158664,
                -10.431127945000114
              ],
              [
                56.63121511533664,
                -10.423628453894944
              ],
              [
                56.621258755473356,
                -10.411472569145063
              ],
              [
                56.61233236387179,
                -10.400413678998051
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                56.63885404661105,
                -10.418444011635303
              ],
              [
                56.64142896726535,
                -10.416333613878242
              ],
              [
                56.63790990903781,
                -10.410762095147744
              ],
              [
                56.63387586667941,
                -10.406203505780546
              ],
              [
                56.63181593015597,
                -10.404008605660888
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                56.65696609876908,
                -10.446028129736344
              ],
              [
                56.660399326308145,
                -10.451008170218506
              ],
              [
                56.66529167555131,
                -10.455397292247318
              ],
              [
                56.67121399305619,
                -10.459701947817265
              ],
              [
                56.67602051161088,
                -10.465441395699422
              ],
              [
                56.67842377088822,
                -10.474978772727388
              ],
              [
                56.681342014296426,
                -10.474725571819171
              ],
              [
                56.69301498792924,
                -10.4578450448925
              ],
              [
                56.68168533705033,
                -10.452865114031871
              ],
              [
                56.668124088271036,
                -10.443833510290423
              ],
              [
                56.663060071672184,
                -10.441934315199815
              ],
              [
                56.65954101942338,
                -10.443749101540735
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                56.678072268568656,
                -10.477265553348614
              ],
              [
                56.679617220961234,
                -10.483004676069841
              ],
              [
                56.67841559132256,
                -10.486296183755394
              ],
              [
                56.679617220961234,
                -10.489250071111206
              ],
              [
                56.686826998793265,
                -10.493554256495555
              ],
              [
                56.691290194594046,
                -10.49482018197677
              ],
              [
                56.694809252821585,
                -10.493976232231628
              ],
              [
                56.69961577137627,
                -10.49017842988596
              ],
              [
                56.704078967177054,
                -10.484270644705441
              ],
              [
                56.70622473438897,
                -10.477265553348614
              ],
              [
                56.70618181685344,
                -10.472412519647731
              ],
              [
                56.705795580946585,
                -10.470935515294137
              ],
              [
                56.70287733753838,
                -10.463845719229592
              ],
              [
                56.69592505177178,
                -10.458190646680686
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                57.31309297409219,
                -20.474757675502545
              ],
              [
                57.314809587861724,
                -20.479260482840335
              ],
              [
                57.33334901657266,
                -20.478295606678298
              ],
              [
                57.336782244111724,
                -20.485692835493918
              ],
              [
                57.345021990205474,
                -20.4799037302437
              ],
              [
                57.331289080049224,
                -20.46961144817966
              ],
              [
                57.31961610641641,
                -20.47411440652451
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                57.32407930221719,
                -20.380332202554676
              ],
              [
                57.30073335495157,
                -20.434712093771715
              ],
              [
                57.31309297409219,
                -20.440502902827188
              ],
              [
                57.32613923874063,
                -20.423129821496676
              ],
              [
                57.34708192672891,
                -20.386125057053448
              ],
              [
                57.342275408174224,
                -20.378723037686818
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    MoreDeep = 
    /* color: #1b27ff */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[54.97193475746061, -4.238376289551878],
          [55.42237421058561, -4.271244437181423],
          [55.45533319496061, -4.068535503752379],
          [55.23147412172192, -3.952120122279829],
          [55.01313348792936, -3.9753817066470383]]]),
    RCtoTRF = 
    /* color: #1bb154 */
    /* shown: false */
    ee.Geometry.MultiPolygon(
        [[[[45.073189372763345, -12.641816757163951],
           [45.03061644512276, -12.704790238145707],
           [45.04022966177205, -12.822656060410678],
           [45.02237646888026, -12.953850806424729],
           [45.099282412872824, -13.0261123446533],
           [45.20777474691597, -12.993998705479559],
           [45.209148063155624, -12.947158874228037],
           [45.22837454758383, -12.923066387289424],
           [45.24348105953236, -12.836046427772416],
           [45.28262067629399, -12.785996297994584],
           [45.26614083016702, -12.763730013415087],
           [45.1967881608094, -12.706129941477421],
           [45.10752236879109, -12.633776473358088]]],
         [[[55.44316226022716, -4.6560067816257265],
           [55.527962980442005, -4.681328369657116],
           [55.530709562473255, -4.667641138251842],
           [55.49431735055919, -4.654295830588358],
           [55.49019747751232, -4.648478565957279],
           [55.48058444040294, -4.608098585251912],
           [55.46959811227794, -4.587907733447742],
           [55.45792513864513, -4.582089924314073]]],
         [[[57.34732274077801, -20.321186397229415],
           [57.34938267730145, -20.383954784993914],
           [57.33530644439129, -20.415490284194323],
           [57.31711033843426, -20.437689975613402],
           [57.30646733306317, -20.461173116712434],
           [57.30646733306317, -20.46728457839002],
           [57.31608037017254, -20.474682338057747],
           [57.33290318511395, -20.470822681848425],
           [57.349726000055355, -20.486260724163873],
           [57.3686087515202, -20.489155184128293],
           [57.39847783111004, -20.510057994550003],
           [57.42079381011395, -20.51359511110877],
           [57.432810446352896, -20.512470196564095],
           [57.44894627593426, -20.50619922877649],
           [57.49065792992171, -20.52179786528858],
           [57.52138789575497, -20.52581350304676],
           [57.457872667535824, -20.49108479375075],
           [57.36139897368817, -20.454096383531194],
           [57.38749150298504, -20.381214211913445],
           [57.3917791348685, -20.250416429785062],
           [57.35376316534087, -20.25713966477227]]],
         [[[57.617420766960635, -19.97898078086932],
           [57.593875963482475, -19.986223715236807],
           [57.577396471294975, -19.99558017372633],
           [57.555423815044975, -19.997838545938574],
           [57.548214037212944, -20.002677805875933],
           [57.581859667095756, -20.025904181999344],
           [57.631298143658256, -20.028484678712353],
           [57.73429496983013, -20.115551570248186],
           [57.721935350689506, -20.091048742724038],
           [57.71163566807232, -20.03525828100439],
           [57.69069298008404, -20.00783951915069],
           [57.65189750889263, -19.985255774015737]]],
         [[[57.539628386597684, -20.01933145802638],
           [57.50907266150003, -20.03578208658018],
           [57.48710000525003, -20.097053572332136],
           [57.4912198782969, -20.12768033218439],
           [57.3538907767344, -20.218235921032488],
           [57.4205072883496, -20.225176414134246],
           [57.50426614294534, -20.16893637346761],
           [57.51269724933418, -20.13869287240998],
           [57.56556895343574, -20.02325522930491],
           [57.5521793660334, -20.01357782636538]]]]),
    geoclean3 = ee.Image("projects/coral_atlas/west_indian_ocean/in_out/wio_geo-clean_manual2"),
    benthic_clean = ee.Image("projects/coral_atlas/west_indian_ocean/in_out/wio_benthic-clean");
/***** End of imports. If edited, may not auto-convert in the playground. *****/
// little viewing script for looking at reefs and classifications for each region. 
//The map_viewer WIO script is going to be used from the very beginning
//in the workflow to annotate masks 
// little viewing script for looking at reefs and classifications for each region. 
//The map_viewer WIO script is going to be used from the very beginning
//in the workflow to annotate masks 


// Current Region: West Indian Ocean  <--------- Indicate region here

// imports
var pkg_vis = require('users/mitchest/global_reefs:Modules/pkg_vis')
var map_palettes = require('users/mitchest/global_reefs:Modules/colour_pals')

// choogse where to centre (link this dynamically to map app?)
var centre_map = ee.Geometry.Point([50.26077595263271,-9.927142570159555]) // <---- change for region
Map.centerObject(centre_map, 5)

//splitting North Cari regions


//4. add turbidity for reference
//Map.addLayer(turbidity.focal_mode(5), {min:5, max:20, palette: ['#ffffe5','#fff7bc','#fee391','#fec44f','#fe9929','#ec7014','#cc4c02','#993404','#662506']}, "Accumulative turbidity (smooth)", false)
//Map.addLayer(turbidity, {min:5, max:20, palette: ['#ffffe5','#fff7bc','#fee391','#fec44f','#fe9929','#ec7014','#cc4c02','#993404','#662506']}, "Accumulative turbidity", false)



// add some background data
//Map.addLayer(any_rrs, {bands: ['b3','b2','b1'], min: 66, max: 1260}, "Any tide mosaic", false)
//Map.addLayer(high_rrs, {bands: ['b3','b2','b1'], min: 66, max: 1260}, "High tide mosaic", false)

var imageVisParam = {"opacity":1,"bands":["b3","b2","b1"],"max":1536,"gamma":1};
Map.addLayer(low_rrs, imageVisParam, 'Dove sr lowtide', false)
//Map.addLayer(Artifact_layer, {color: 'ffff00'}, 'Artifact Layer', false)

// West Indian Ocean classification

//Map.addLayer(benthic.updateMask(geo.gt(2)), map_palettes.benthic, "Nth. Cari & Baha Benthic - RAW", false)
//Map.addLayer(ee.ImageCollection([benthic_baha,benthic_cari]).mosaic(), map_palettes.benthic, "Nth. Cari & Baha Benthic - RAW", false)
Map.addLayer(wio_benthic, map_palettes.benthic, "wio_benthic - RAW", false)
Map.addLayer(benthic_clean, map_palettes.benthic, "WIO benthic - clean", false)
Map.addLayer(wio_geo, map_palettes.geo, "wio_geo - RAW", false)
//Map.addLayer(geoclean1, map_palettes.geo, "wio_geo - firstPass", false)
//Map.addLayer(geoclean2, map_palettes.geo, "wio_geo - 2ndPass", false)
Map.addLayer(geoclean3, map_palettes.geo, "wio_geo - 3rd pass", false)
//Map.addLayer(geoclean4, map_palettes.geo, "wio_geo - manual CR edits", false)
//Map.addLayer(waves.lte(0.4), {}, "waves 0.4 threshold", false)
//Map.addLayer(ee.ImageCollection([hawaii_geo_west, hawaii_geo_east]).mosaic(), map_palettes.geo, "Hawaii east/west Geo - RAW", false)
//Map.addLayer(geo_clean, map_palettes.geo, "Nth. Cari & Baha Geo - FINAL", false)




var wcmc=wcmc.filterBounds(BondariesWCMCForWIO)

Map.addLayer(wcmc, {color:'#ffff00'}, "WCMC layer", false)

// #############
// example confidence layers

/*
// depth and nir combos
var depth_nir_flag = fiji_dove_ocean.select('b4').multiply(fiji_high_depth_ocean).gt(250000)
//Map.addLayer(depth_nir_flag, {}, "NIR flag", false)
var conf_flag = fiji_high_depth_ocean.eq(-1)
                        .or(fiji_high_depth_ocean.gt(1000))
                        .add(depth_nir_flag.eq(1))
                        .selfMask()
Map.addLayer(conf_flag, {min:1,max:2,palette:["#f7f7f7","#bababa"]}, "Confidence flag", false)

//straight depth missing/-1
var depth_flag = fiji_high_depth_ocean.gt(0).selfMask()
//Map.addLayer(depth_flag, {min:0,max:1,palette:["#ffff00"]}, "Valid depth retrievals", false)

//Map.addLayer(fiji_geo_clean.gt(0).updateMask(fiji_high_depth_ocean.lte(0)), {min:0,max:1,palette:["#ff0000"]}, "Unmapped area via original algorithm", false)
*/

////////// UI SET UP //////////


//Generate title
var title = ui.Label({
  value: 'Coral Atlas map classes',
  style: {fontWeight: 'bold', fontSize: '18px'}
})

// generate the legend
var geo_legend = pkg_vis.discrete_legend(map_palettes.geo_atlas_names, map_palettes.geo_atlas_cols, 'Geomorphic Zone', false)
var benthic_legend = pkg_vis.discrete_legend(map_palettes.benthic_atlas_names, map_palettes.benthic_atlas_cols, 'Benthic Habitat', false)
//var mask_legend = pkg_vis.discrete_legend(["Low confidence depth","Water conditions"], ["#f7f7f7","#bababa"], 'Confidence Mask reason', false)
pkg_vis.add_lgds([title, geo_legend, benthic_legend])//, mask_legend])


//show confidence layers
var conf_str = {"opacity":1,"bands":["constant"],"min":0,"max":9,"palette":["4d004b","810f7c","88419d","8c6bb1","8c96c6","9ebcda","bfd3e6","e0ecf4","f7fcfd"]};
Map.addLayer(benthic_conf_clean,conf_str,'confidence_benthic',false);
Map.addLayer(geo_conf_clean,conf_str,'confidence_geo',false);

//Confidence legend

var legend=ui.Panel({
  style: {
    position: 'bottom-right',
    padding: "8px 15px"
  }
});

//var vis = {min: 'low', max: 'high', palette: 'ece2f0,a6bddb,1c9099'};
var vis = {min: 'low', max: 'high', palette: '4d004b,810f7c,88419d,8c6bb1,8c96c6,9ebcda,bfd3e6,e0ecf4,f7fcfd'};

function makeColorBarParams(palette) {
  return {
    bbox: [0, 0, 1, 0.1],
    dimensions: '100x10',
    format: 'png',
    min: 0,
    max: 1,
    palette: palette,
  };
}

var colorBar=ui.Thumbnail({
  image: ee.Image.pixelLonLat().select(0),
  params: makeColorBarParams(vis.palette),
  style:{stretch:'horizontal', margin: '0px 8px',maxHeight: '24px'}
})
// Create a panel with three numbers for the legend.
var legendLabels = ui.Panel({
  widgets: [
    ui.Label(vis.min, {margin: '4px 8px'}),
    ui.Label(
        (' '),
        {margin: '4px 8px', textAlign: 'center', stretch: 'horizontal'}),
    ui.Label(vis.max, {margin: '4px 8px'})
  ],
  layout: ui.Panel.Layout.flow('horizontal')
});

var legendTitle = ui.Label({
  value: 'Confidence Layer Legend',
  style: {fontWeight: 'bold',position: 'bottom-right'}
});

legend.add(legendTitle);
legend.add(colorBar)
legend.add(legendLabels);

Map.add(legend)