/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var notReef_mask = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.MultiPolygon(
        [[[[71.60342946217652, 12.65909936158879],
           [71.68308034108277, 12.474125345239695],
           [72.21866383717652, 12.433896045657525],
           [72.04562916920777, 12.675177750692391],
           [71.88907399342652, 12.675177750692391]]],
         [[[72.71755096164087, 7.914742843027254],
           [72.47310516085962, 7.264063722961609],
           [73.53654615747737, 7.143550264651811],
           [73.13365813937524, 7.720187402744904],
           [73.11443206515649, 7.948746666513787]]],
         [[[72.61774093367676, 4.713846678989372],
           [72.70425826766113, 4.445541267884463],
           [72.86905318953613, 4.50167465686995],
           [72.7797892735205, 4.745324820875827]]],
         [[[72.88046310200002, 2.000226206221777],
           [73.06860397114065, 2.089433271265267],
           [72.84887740864065, 2.1649122234602767]]],
         [[[72.96822759144477, 4.536532520872901],
           [73.05886479847602, 4.294181595870132],
           [73.21541997425727, 4.343479687246037],
           [73.1289026402729, 4.607716403032213],
           [73.05062505238227, 4.6036098332757875]]]]),
    artifact_layer = 
    /* color: #98ff00 */
    /* shown: false */
    ee.Geometry.MultiPoint(),
    center_map = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Point([73.36350406430057, 3.4513743887798998]),
    region_extent = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[70.16383984620248, 13.135866931352913],
          [70.14682558742047, 12.617194359154508],
          [70.2690563075083, 11.807120477151644],
          [70.75799813787245, 10.497269313191726],
          [71.1883486767209, 9.918038419941574],
          [71.47614859713114, 8.090218465993845],
          [71.59908832513908, 5.52591426513123],
          [71.49717465104942, 4.724023756667231],
          [71.63786599252497, 1.9241941877135522],
          [71.79169706752515, -0.00897274020001368],
          [71.76991375572192, -1.3710512046844305],
          [71.49502445725186, -2.765513665803016],
          [71.35011857751672, -3.4180227969815036],
          [70.78266724738901, -4.467873920373559],
          [70.37679876655831, -5.156730459644507],
          [70.0414366086369, -5.673827050931439],
          [69.63155494916931, -6.620623477840547],
          [69.61632242222679, -7.654629654247595],
          [69.88596916257875, -8.325549044857805],
          [70.33702213279423, -8.649621844082038],
          [71.15440380682881, -8.861512281458042],
          [72.50302938219875, -8.730914493557336],
          [73.42866829614745, -8.55743897796769],
          [74.30064119056354, -7.7866094054231425],
          [74.78510906713221, -6.8540012175349405],
          [74.87181187774016, -5.590383988857091],
          [74.71281221914346, -4.718369474096369],
          [74.42252946027796, -3.890078116525247],
          [74.39495159818864, -2.819413619339805],
          [74.80701657465998, 0.26047582105125183],
          [74.97178689803962, 2.752606230303411],
          [74.95623341371372, 3.7796590463055497],
          [73.98795167784473, 8.437740216584354],
          [73.80616705637192, 9.279013186527788],
          [73.88180364769623, 9.530197153338912],
          [74.05559477809774, 9.730752468582905],
          [74.36104571392184, 9.786128362399857],
          [72.93930746651232, 14.377460777937939],
          [72.04231647306855, 14.34492727644073],
          [71.49518330115245, 14.31657896080115],
          [70.94844908898446, 14.180519984144992],
          [70.70783078637048, 14.098023158448601],
          [70.48943631098639, 13.930058399473841]]]),
    pixels = ee.Image("projects/coral_atlas/central_indian_ocean/in_out/cio_pixels"),
    segmentation = ee.Image("projects/coral_atlas/central_indian_ocean/in_out/cio_segmentation"),
    geo = ee.Image("projects/coral_atlas/central_indian_ocean/in_out/cio_geo"),
    ben = ee.Image("projects/coral_atlas/central_indian_ocean/in_out/cio_benthic"),
    deepwater = /* color: #25d610 */ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                72.4610278099535,
                -5.562233749561943
              ],
              [
                72.41845578846913,
                -5.63808761806013
              ],
              [
                72.45072812733632,
                -5.657220366789967
              ],
              [
                72.51733274159413,
                -5.650387314784492
              ],
              [
                72.57226438221913,
                -5.63740429392719
              ],
              [
                72.61140317616444,
                -5.686601569370111
              ],
              [
                72.61620969471913,
                -5.712565104599872
              ],
              [
                72.6196429222582,
                -5.7408150998525755
              ],
              [
                72.56059140858632,
                -5.774290997216448
              ],
              [
                72.48574704823476,
                -5.790003492188808
              ],
              [
                72.35185117421132,
                -5.762677133849532
              ],
              [
                72.32163877186757,
                -5.809131157116495
              ],
              [
                72.45965451893788,
                -5.887684373332356
              ],
              [
                72.51115293202382,
                -6.0311006197836265
              ],
              [
                72.6196429222582,
                -6.040660364522768
              ],
              [
                72.60453672108632,
                -5.889050418406293
              ],
              [
                72.61758298573476,
                -5.874023737994912
              ],
              [
                72.697233864641,
                -5.792052915868868
              ],
              [
                72.68487424550038,
                -5.667024561906921
              ],
              [
                72.62856931385976,
                -5.531034052292801
              ],
              [
                72.48094052968007,
                -5.553587425032556
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                71.78100203075167,
                -5.265004840441034
              ],
              [
                71.74804304637667,
                -5.294405329632169
              ],
              [
                71.76383589305635,
                -5.340896270048868
              ],
              [
                71.7665824750876,
                -5.373711283082955
              ],
              [
                71.76040266551729,
                -5.3860164577893785
              ],
              [
                71.76383589305635,
                -5.43660177444672
              ],
              [
                71.7995414594626,
                -5.441386652544458
              ],
              [
                71.82632063426729,
                -5.419512613874888
              ],
              [
                71.79610823192354,
                -5.423614056571237
              ],
              [
                71.79610823192354,
                -5.413360397610425
              ],
              [
                71.80709456004854,
                -5.403790159017131
              ],
              [
                71.92245100536104,
                -5.3853328435036465
              ],
              [
                71.94442366161104,
                -5.2793633930522885
              ],
              [
                71.84760664500948,
                -5.289619298546896
              ],
              [
                71.80846785106417,
                -5.271842287856811
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                72.19239869176108,
                -4.976010111362473
              ],
              [
                72.23634400426108,
                -5.060827757725262
              ],
              [
                72.26518311558921,
                -5.076558846254171
              ],
              [
                72.3307577615853,
                -5.077584773495865
              ],
              [
                72.36989655553062,
                -4.9164944187053585
              ],
              [
                72.3468939310189,
                -4.901443628438987
              ],
              [
                72.26140656529624,
                -4.900759493544874
              ],
              [
                72.32251801549155,
                -4.861420562169714
              ],
              [
                72.40903534947593,
                -4.723887409659959
              ],
              [
                72.31136449486583,
                -4.764262339979951
              ],
              [
                72.27616944371421,
                -4.816263479725225
              ],
              [
                72.14776673375327,
                -4.872367278902863
              ],
              [
                72.16973939000327,
                -4.95104153565564
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                72.66961731969077,
                -4.991101947052824
              ],
              [
                72.7259222513314,
                -5.030775174492281
              ],
              [
                72.73965516148765,
                -4.855647795717727
              ],
              [
                72.66137757359702,
                -4.861121223246245
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                72.98181641590334,
                7.063209563896412
              ],
              [
                73.02301488294474,
                6.994380021590522
              ],
              [
                73.04086755594926,
                6.950760001655663
              ],
              [
                73.11983126394941,
                6.989609298212766
              ],
              [
                73.19055528580948,
                6.991653926952329
              ],
              [
                73.24136672759002,
                6.968481177299848
              ],
              [
                73.25235302815241,
                6.847146314440994
              ],
              [
                73.17954620961095,
                6.7380237872686735
              ],
              [
                73.10196064912606,
                6.652777971790251
              ],
              [
                73.07690973010838,
                6.600609439729977
              ],
              [
                73.13150428985752,
                6.47613601915642
              ],
              [
                73.30433529429187,
                6.2737923489920755
              ],
              [
                73.37222899978823,
                6.430542527762638
              ],
              [
                73.27256993814869,
                6.64324121812711
              ],
              [
                73.34779614622636,
                6.832147754172214
              ],
              [
                73.41165368580648,
                6.991654016808153
              ],
              [
                73.32239030585097,
                7.108923996097985
              ],
              [
                73.05254041767088,
                7.152529039536659
              ],
              [
                72.86028096938519,
                7.245176050026708
              ],
              [
                72.65772190570137,
                7.147759935756022
              ],
              [
                72.69136727968218,
                6.969223496978494
              ],
              [
                72.79161685800864,
                6.844480083254243
              ],
              [
                72.73943211808674,
                6.702655658608265
              ],
              [
                72.69480231897919,
                6.537091009723519
              ],
              [
                72.50237949405404,
                6.492470856330917
              ],
              [
                72.45980767154325,
                6.334849482180626
              ],
              [
                72.4831534174284,
                6.16284396178369
              ],
              [
                72.59850916070347,
                6.0276575143678714
              ],
              [
                72.73789741839964,
                6.098668742594431
              ],
              [
                72.85325320403494,
                6.183323695890067
              ],
              [
                72.86835931734319,
                6.261139688199975
              ],
              [
                72.95625053266174,
                6.385271217744781
              ],
              [
                72.93410628150833,
                6.4072690456142425
              ],
              [
                72.92329274517981,
                6.3647815622752475
              ],
              [
                72.91625506918268,
                6.364431461759824
              ],
              [
                72.90921735602296,
                6.367493328622234
              ],
              [
                72.89342594446661,
                6.387930686846399
              ],
              [
                72.88784741245405,
                6.405996027142641
              ],
              [
                72.87917858019566,
                6.422014222737903
              ],
              [
                72.8494794138085,
                6.443814785614828
              ],
              [
                72.81068144150953,
                6.404168416004473
              ],
              [
                72.72691119325134,
                6.401438989966372
              ],
              [
                72.64794741273423,
                6.294979765097016
              ],
              [
                72.6074355425604,
                6.1939597935067185
              ],
              [
                72.58408972674056,
                6.177576350047933
              ],
              [
                72.53396490626685,
                6.211707976609216
              ],
              [
                72.5415179758063,
                6.254028097231452
              ],
              [
                72.60537567356712,
                6.4184977337266185
              ],
              [
                72.7035653967296,
                6.468305902568732
              ],
              [
                72.83231066178965,
                6.455683612665194
              ],
              [
                72.86509780562777,
                6.436877704163534
              ],
              [
                72.85428292854921,
                6.473678831941828
              ],
              [
                72.85805929939528,
                6.487238707825903
              ],
              [
                72.87659902523298,
                6.499348177399833
              ],
              [
                72.91591208742445,
                6.473934835111385
              ],
              [
                72.90089099232189,
                6.450822412852586
              ],
              [
                72.95384663275317,
                6.4427197361884705
              ],
              [
                72.92363654306497,
                6.4809271925329615
              ],
              [
                72.96826834474798,
                6.463017606830318
              ],
              [
                73.00054033349932,
                6.526039664540044
              ],
              [
                72.9507584625299,
                6.531795655803544
              ],
              [
                72.90672709524122,
                6.524025076385805
              ],
              [
                72.9265539188687,
                6.511137748761915
              ],
              [
                72.91196302350913,
                6.501053502882291
              ],
              [
                72.89136199610144,
                6.5157214455699135
              ],
              [
                72.91093142331862,
                6.533458521473744
              ],
              [
                72.88827211256068,
                6.526977655231305
              ],
              [
                72.87359483691874,
                6.542241525300062
              ],
              [
                72.87883063582458,
                6.554094013898953
              ],
              [
                72.8986144983649,
                6.557632878821506
              ],
              [
                72.90741235315723,
                6.565264249519909
              ],
              [
                72.87329455465533,
                6.565051455524459
              ],
              [
                72.86732945872113,
                6.5593807069876915
              ],
              [
                72.86063454343794,
                6.577798121582522
              ],
              [
                72.8611497348348,
                6.59519212017706
              ],
              [
                72.87900192186831,
                6.611732742039424
              ],
              [
                72.87659906593547,
                6.664079352218576
              ],
              [
                72.89651160403173,
                6.7397755179977406
              ],
              [
                72.93565014627545,
                6.797051394842799
              ],
              [
                72.93221693532782,
                6.882952389545241
              ],
              [
                72.90337800914504,
                6.925215435078045
              ],
              [
                72.82510093356602,
                6.992010581536532
              ],
              [
                72.7639898909312,
                7.051300315586192
              ],
              [
                72.79969522387162,
                7.103087429918986
              ],
              [
                72.84913337019356,
                7.103768798602654
              ],
              [
                72.90749784809522,
                7.112626525545035
              ],
              [
                72.96105583907988,
                7.116714652662706
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                73.03501025240526,
                8.380884273019994
              ],
              [
                73.10230151217088,
                8.349634628890383
              ],
              [
                73.08994189303026,
                8.302076025576719
              ],
              [
                73.05972949068651,
                8.242279897296612
              ],
              [
                72.96634570162401,
                8.235484309449424
              ],
              [
                72.83725634615526,
                8.2218927838777
              ],
              [
                72.92102709810838,
                8.102267354130591
              ],
              [
                73.16547289888963,
                8.107705649124126
              ],
              [
                73.26297656099901,
                8.28848679363447
              ],
              [
                73.24512377779588,
                8.503141269298094
              ],
              [
                73.10779467623338,
                8.539810789972956
              ],
              [
                73.04462328951463,
                8.497708448923209
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                72.3019705579088,
                10.219349309906503
              ],
              [
                72.41320713017443,
                10.030082651297162
              ],
              [
                72.54504306767443,
                10.232864070245974
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                72.12893588994005,
                9.87453074950338
              ],
              [
                72.3019705579088,
                9.923233218130521
              ],
              [
                72.13442905400255,
                10.059831933302098
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                72.39398105595568,
                10.973921429023482
              ],
              [
                72.29712629950366,
                10.905829139478357
              ],
              [
                72.22554241290074,
                10.912401712234674
              ],
              [
                72.22812345706197,
                10.843451949285749
              ],
              [
                72.18386753056505,
                10.759483706782845
              ],
              [
                72.2360525891588,
                10.68662093802307
              ],
              [
                72.39398105595568,
                10.72170520211932
              ],
              [
                72.4997244641588,
                10.570544171130882
              ],
              [
                72.63293369267443,
                10.601592277125762
              ],
              [
                72.62881381962755,
                10.632637234297222
              ],
              [
                72.67962558720568,
                10.704163577688568
              ],
              [
                72.8348074719713,
                10.979314095484108
              ],
              [
                72.55053623173693,
                11.182814823425264
              ],
              [
                72.4557791516588,
                11.026495721714456
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                71.94537890571331,
                10.996459785849844
              ],
              [
                72.16991028128317,
                10.784740207030643
              ],
              [
                72.14022919895335,
                10.831118915297832
              ],
              [
                72.13251650256032,
                10.853217133466172
              ],
              [
                72.18159616771788,
                10.885250679785315
              ],
              [
                72.23308166800192,
                10.95467031671939
              ],
              [
                71.96117004690817,
                11.11237529415959
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                71.95705017386129,
                11.27942257319617
              ],
              [
                71.98726257620504,
                11.233628889427926
              ],
              [
                72.13832458792379,
                11.256526641893506
              ],
              [
                72.30037292776754,
                11.182439110793444
              ],
              [
                72.27840027151754,
                11.387143576725533
              ],
              [
                71.99824890433004,
                11.384451047042944
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                72.64644226370504,
                11.337327658472587
              ],
              [
                72.90874084768942,
                11.294236615470934
              ],
              [
                72.99113830862692,
                11.428874524587675
              ],
              [
                72.97465881643942,
                11.515009281135061
              ],
              [
                72.99937805472067,
                11.60246289878074
              ],
              [
                72.88814148245504,
                11.597081926837859
              ],
              [
                72.83183354899933,
                11.714418409565544
              ],
              [
                72.75075681027974,
                11.79677555536155
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                73.5401607513071,
                10.831640510360986
              ],
              [
                73.72986618025084,
                10.68369441689829
              ],
              [
                73.83782327013353,
                10.755606533826699
              ],
              [
                73.79482816057362,
                10.804902129541292
              ],
              [
                73.65843838606366,
                10.792117302928778
              ],
              [
                73.64796632942821,
                10.825255409764363
              ],
              [
                73.77362022396335,
                10.820175287424046
              ],
              [
                73.93017539974458,
                10.789824052387177
              ],
              [
                73.82305870052585,
                10.970537018554417
              ],
              [
                73.71112822532903,
                10.99417049101018
              ],
              [
                73.50445518490085,
                10.943571902422399
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                73.72040907825026,
                10.16990058229804
              ],
              [
                73.78084778419493,
                10.244369448592453
              ],
              [
                73.63528893170363,
                10.300055354163321
              ],
              [
                73.51392965942735,
                10.219170464868753
              ],
              [
                73.50637655884141,
                9.978512117924138
              ],
              [
                73.60848349351011,
                9.973702528862324
              ],
              [
                73.65998190659604,
                10.04402684201001
              ],
              [
                73.63869589585386,
                10.04740743433586
              ],
              [
                73.63251608628354,
                10.056196808960681
              ],
              [
                73.6132900120648,
                10.073098780262537
              ],
              [
                73.6132900120648,
                10.107576053870927
              ],
              [
                73.62702292222104,
                10.123123419070001
              ],
              [
                73.64144247788511,
                10.142725544963
              ],
              [
                73.6682216526898,
                10.179222856822875
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                73.1762064536691,
                6.9118868873587695
              ],
              [
                73.17345987163785,
                6.885983279299325
              ],
              [
                73.14187417827847,
                6.892118472382655
              ],
              [
                73.13157449566128,
                6.888028352479177
              ],
              [
                73.12196145855191,
                6.872349232943703
              ],
              [
                73.13020120464566,
                6.847806964615679
              ],
              [
                73.15904031597378,
                6.8553061252003795
              ],
              [
                73.18650613628628,
                6.834171825289565
              ],
              [
                73.2311380942941,
                6.84167120009405
              ],
              [
                73.23628806127743,
                6.861782484441609
              ],
              [
                73.2201517661691,
                6.8634868930743345
              ],
              [
                73.18787942730191,
                6.912568542107598
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    chagos = 
    /* color: #12d6cd */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.Polygon(
        [[[69.78325931094987, -4.155237145551639],
          [69.78325931094987, -8.260972289180684],
          [73.91411868594987, -8.260972289180684],
          [73.91411868594987, -4.155237145551639]]], null, false),
    maldives = 
    /* color: #f331ff */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.Polygon(
        [[[69.95904056094987, 13.298212886857753],
          [69.95904056094987, -2.312553106145913],
          [76.02349368594987, -2.312553106145913],
          [76.02349368594987, 13.298212886857753]]], null, false),
    TwoDepths = ee.Image("projects/coral_atlas/central_indian_ocean/in_out/cio_geo_clean2_twodepths"),
    RCdist500IRF = ee.Image("projects/coral_atlas/central_indian_ocean/in_out/geo_map_clean2_RCdist2"),
    RC500IRFdeep = ee.Image("projects/coral_atlas/central_indian_ocean/in_out/geo_map_clean2_RCdist2_deep"),
    RCdist500ORF = ee.Image("projects/coral_atlas/central_indian_ocean/in_out/geo_map_clean2_distRC_500orfB"),
    RCdist250ORF = ee.Image("projects/coral_atlas/central_indian_ocean/in_out/geo_map_clean2_distRC_250orf"),
    RCdist250ORFdeep = ee.Image("projects/coral_atlas/central_indian_ocean/in_out/geo_map_clean2_distRC_250orf_deep"),
    SRStoRS = /* color: #88d4d6 */ee.Geometry.MultiPolygon(
        [[[[72.99809025742242, 6.151675331411386],
           [73.01173704622582, 6.1393014623204],
           [73.01881817062814, 6.1048236106398095],
           [73.02243384099022, 6.080414573477545],
           [73.0325673227821, 6.047768183433615],
           [73.08398063361324, 6.01411150538943],
           [73.09245663465171, 6.01282448419583],
           [73.09474737982418, 5.987748176549546],
           [73.12167022758304, 5.939691935750457],
           [73.1284814765931, 5.884396168938947],
           [73.15278691121165, 5.8308749778375955],
           [73.1571894624973, 5.832906044507342],
           [73.15026230252555, 5.857649634233323],
           [73.15391753421754, 5.86137077038416],
           [73.13260651944535, 5.942531600657149],
           [73.1292950131843, 5.953566676575292],
           [73.1163203059443, 5.96590478409166],
           [73.10665099574159, 6.000059874979753],
           [73.09904437690997, 6.0152931268454655],
           [73.05986264027801, 6.035935956219135],
           [73.04201110868614, 6.058415796245551],
           [73.04939525000303, 6.066502737143688],
           [73.02504080293969, 6.124452368006432],
           [73.01371115206078, 6.150224669804175],
           [73.00547140596703, 6.152272746237948],
           [72.99448507784203, 6.1689984081692515],
           [72.98924940584496, 6.16677972824131]]],
         [[[72.71800631217779, 5.522242173399679],
           [72.79455772474729, 5.037356585183495],
           [72.83129325941526, 4.979898605637685],
           [72.86734214857542, 4.988791241854478],
           [72.83266655043089, 5.040947540875825],
           [72.82116523817503, 5.0741201909275615],
           [72.84874409494164, 5.156072722925499],
           [72.85612553415062, 5.221720552473264],
           [72.87277668771507, 5.274541553581147],
           [72.85612553415062, 5.322572284202641],
           [72.87200990165047, 5.377743120643074],
           [72.87441316092782, 5.412094215032077],
           [72.87303986991219, 5.448664877279525],
           [72.85604539359383, 5.445418039165164],
           [72.84162583792977, 5.496169233146508],
           [72.78858247245125, 5.5200908573657905],
           [72.8184515520411, 5.587237103060289],
           [72.82531800711922, 5.607909083591118],
           [72.83922257865242, 5.635413640787188],
           [72.84351411307625, 5.649080017392245],
           [72.84265580619149, 5.666504179832769],
           [72.84282746756844, 5.695201653472803],
           [72.85003724540047, 5.71176005504717],
           [72.84711900199227, 5.743529666185075],
           [72.8601652666407, 5.76522080276451],
           [72.87750306571297, 5.770173780783638],
           [72.88049085639076, 5.797536568492202],
           [72.9045234491642, 5.841938484998761],
           [72.9264961054142, 5.850476912316861],
           [72.93662412665444, 5.9058027532677295],
           [72.93851240180092, 5.91604767450254],
           [72.90795667670326, 5.915535432946331]]]]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
// Viewing script for looking at reefs and classifications for each region. 
// From this region Timor Sea onwards the map_viewer script is going to be used from the very beginning
// in the workflow 

//Viewer for cio

// Load and libraries needed
var map_palettes = require('users/mitchest/global_reefs:Modules/colour_pals');
var param_module = require('users/mitchest/global_reefs:Modules/reef_params');
var pkg_vis = require('users/mitchest/global_reefs:Modules/pkg_vis');

// ###########################################
// SENSOR GENERICS
var sensor_params = param_module.dove ;      //<------------ THIS IS WHERE YOU CHOOSE THE SENSOR
// REGION AND SENSOR SPECIFIC LOAD PATHS
var region_params = param_module.cio;       //<------------ THIS IS WHERE YOU CHOOSE THE REGION
//  ^^ all the data paths are in this module ^^
// ###########################################



// Choose which layers will be shown in the map viewer
var vars = {
  raw: true, // set to true if you want to view the raw classifications for benthic and geo
  geo_cleanup_stage: 2, // set to 0, 1, 2 or 3 - this controls the display of the geo clean stages (0 = cleanup not ready)
  benthic_cleanup_stage: 0, // set to 0, 1 or 2 - this controls the display of the benthic clean stages (0 = cleanup not ready)
};


// choose where to centre the map (link this dynamically to map app?)
Map.centerObject(center_map, 6);

// Add low-tide base map to viewer
// var low_tide_image = ee.Image(region_params.pixels);
// Map.addLayer(low_tide_image, {bands: ['b3','b2','b1'], min: 0, max: 3000}, sensor_params.sname + " from stack", false); // image data

//print (region_params.image[0])
var low_tide_image_dove = ee.Image(region_params.image);
Map.addLayer(low_tide_image_dove, {bands: ['b3','b2','b1'], min: 0, max: 3000}, sensor_params.sname + ' low tide', false); // image data

Map.addLayer(pixels, {color:'#00FFFF'}, "pixels", false)
Map.addLayer(segmentation, {color:'#00FF00'}, "segments", false)


// Load the raw classifications
if (vars.raw) {
// geo raw (test if more than one map exists for the region)
  if (ee.List(region_params.geo_map).length().getInfo() > 1) {
    var geo_map_raw = ee.Image(region_params.geo_map[0]).unmask(0, false)
                 .add(ee.Image(region_params.geo_map[1]).unmask(0, false))
                 .selfMask();
  } else {
    var geo_map_raw = ee.Image(region_params.geo_map);
  }

  // benthic raw (test if more than one map exists for the region)
  if (ee.List(region_params.benthic_map).length().getInfo() > 1) {
    var benthic_map_raw = ee.Image(region_params.benthic_map[0]).unmask(0, false)
                     .add(ee.Image(region_params.benthic_map[1]).unmask(0, false))
                     .selfMask();
  } else {
      var benthic_map_raw = ee.Image(region_params.benthic_map);
  }

  // Add the raw region classification to the viewer
  Map.addLayer(geo_map_raw, map_palettes.geo, 'Geomorphic RAW', false);
  Map.addLayer(benthic_map_raw.updateMask(geo_map_raw.gt(2)), map_palettes.benthic, 'Benthic RAW', false);
  //Map.addLayer(benthic_subreg2_no_b4p.updateMask(geo_map_raw.gt(2)), map_palettes.benthic, 'Benthic RAW (no band4 outer reefs)', false); // test without band b4p
}

// Add geo clean stage 1 to the viewer
if (vars.geo_cleanup_stage == 1||vars.geo_cleanup_stage == 2) {
  Map.addLayer(ee.Image(region_params.geo_map_clean1), map_palettes.geo, 'Geomorphic - stage 1 clean', false);
  //Map.addLayer(ee.Image(region_params.geo_map_clean1), map_palettes.geo, 'timor_geo_clean1_10m_5m', false);
  //Map.addLayer(ee.Image(timor_geo_clean1_10m_4m), map_palettes.geo, 'timor_geo_clean1_10m_4m', false);
  //Map.addLayer(ee.Image(timor_geo_clean1_15m), map_palettes.geo, 'timor_geo_clean1_15m_5m', false);
  //Map.addLayer(ee.Image(timor_geo_clean1_15m_4m), map_palettes.geo, 'timor_geo_clean1_15m_4m', false);
  }
/*
// Add geo clean stage 2 to the viewer
if (vars.geo_cleanup_stage == 2||vars.geo_cleanup_stage == 3) {
  Map.addLayer(ee.Image(region_params.geo_map_clean2), map_palettes.geo, 'Geomorphic - stage 2 clean', false);
  //Map.addLayer(ee.Image(region_params.geo_map_clean1), map_palettes.geo, 'timor_geo_clean2_10m_5m', false);
  //Map.addLayer(ee.Image(timor_geo_clean2_10m_4m), map_palettes.geo, 'timor_geo_clean2_10m_4m', false);
  //Map.addLayer(ee.Image(timor_geo_clean2_15m), map_palettes.geo, 'timor_geo_clean2_15m_5m', false);
  //Map.addLayer(ee.Image(timor_geo_clean2_15m_4m), map_palettes.geo, 'timor_geo_clean2_15m_4m', false);
}
*/
// Add geo clean stage 3 to the viewer
if (vars.geo_cleanup_stage == 3) {
  var geo_map_clean3 = ee.Image(region_params.geo_map_clean3)
  Map.addLayer(geo_map_clean3.updateMask(geo_map_clean3.gt(2)), map_palettes.geo, 'Geomorphic - stage 3 clean', true);
}

// Add benthic clean stage 1 to the viewer
if (vars.benthic_cleanup_stage == 1||vars.benthic_cleanup_stage == 2) {
  Map.addLayer(ee.Image(region_params.benthic_map_clean1), map_palettes.benthic, 'Benthic - stage 1 clean', false);
  }

// Add geo clean stage 2 to the viewer
if (vars.benthic_cleanup_stage == 2) {
  Map.addLayer(ee.Image(region_params.benthic_map_clean2), map_palettes.benthic, 'Benthic - stage 2 clean', false);
}

// Geo Training Data - Needs more work + add flag to show
var geo_train = ee.FeatureCollection(region_params.geo_train_library);

var geo_buff = function(feature) {
  return feature.buffer(20);   // substitute in your value of Z here
};

var geo_train_buff = geo_train.map(geo_buff)

// Create an empty image into which to paint the features, cast to byte.
var empty = ee.Image().byte();

// Paint the interior of the polygons with different colors.
var geo_fill = empty.paint({
  featureCollection: geo_train_buff,
  color: 'class_num',
});

Map.addLayer(geo_fill, map_palettes.geo, 'Geo Training Data', false);
Map.addLayer(TwoDepths, map_palettes.geo, 'Geo 2', false);
//Map.addLayer(RCdist500IRF, map_palettes.geo, 'Geo 2+ RC500m_IRF', false);
//Map.addLayer(RC500IRFdeep, map_palettes.geo, 'Geo 2+ RC500m_IRF + deepwaterclean', false);
//Map.addLayer(RCdist500ORF, map_palettes.geo, 'Geo 2+ RC500m_ORF', false);
Map.addLayer(RCdist250ORF, map_palettes.geo, 'Geo 2+ RC250m_ORF', false);
//Map.addLayer(RCdist250ORFdeep, map_palettes.geo, 'Geo 2+ RC250m_ORF + deepwaterclean', false);
//Map.addLayer(ReefMask, map_palettes.geo, 'Geo 2 + RCtoORF reefmask', false);
//Map.addLayer(clean1_2depths, map_palettes.geo, 'Geo 1 two depths', false);
//Map.addLayer(clean2_2depths, map_palettes.geo, 'Geo 2 two depths', false);



////////// UI SET UP //////////

//Generate title
var title = ui.Label({
  value: 'Coral Atlas map classes',
  style: {fontWeight: 'bold', fontSize: '14px'}
});

// generate the legend
var geo_legend = pkg_vis.discrete_legend(map_palettes.geo_atlas_names, map_palettes.geo_atlas_cols, 'Geomorphic Zone', false);
var benthic_legend = pkg_vis.discrete_legend(map_palettes.benthic_atlas_names, map_palettes.benthic_atlas_cols, 'Benthic Habitat', false);
//var mask_legend = pkg_vis.discrete_legend(["Low confidence depth","Water conditions"], ["#f7f7f7","#bababa"], 'Confidence Mask reason', false)
pkg_vis.add_lgds([title, geo_legend, benthic_legend]);//, mask_legend])
// generate the legend

