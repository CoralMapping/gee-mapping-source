/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var reef_mask = ee.Image("projects/coral_atlas/reefMask/global_reef_mask_combined"),
    imageVisParam = {"opacity":1,"bands":["b3","b2","b1"],"min":17.26,"max":845.74,"gamma":1},
    region_extent = 
    /* color: #d63000 */
    /* shown: false */
    /* displayProperties: [
      {
        "type": "rectangle"
      }
    ] */
    ee.Geometry.Polygon(
        [[[-77.43628196678644, 21.15751521857745],
          [-77.43628196678644, 7.527230111136917],
          [-58.89136009178644, 7.527230111136917],
          [-58.89136009178644, 21.15751521857745]]], null, false),
    refined_mask = 
    /* color: #26de41 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-77.20021003885455, 7.7587513745741905],
                  [-76.87062019510455, 7.432053761196195],
                  [-76.32130378885455, 7.432053761196195],
                  [-76.16749519510455, 7.9328870654002],
                  [-75.83790535135455, 8.585226525700948],
                  [-75.20069832010455, 8.802428332674591],
                  [-75.02491707010455, 9.27981948323113],
                  [-74.93702644510455, 10.254245026265725],
                  [-74.18995613260455, 10.232622590478856],
                  [-73.64063972635455, 10.686379811050672],
                  [-72.69581550760455, 11.031646577765171],
                  [-72.34425300760455, 10.556802785429563],
                  [-71.75099128885455, 10.340719978842051],
                  [-70.80616707010455, 10.556802785429563],
                  [-69.59767097635455, 11.031646577765171],
                  [-69.07032722635455, 10.815901561122251],
                  [-68.82862800760455, 10.189373302582048],
                  [-66.67530769510455, 10.037954736658373],
                  [-65.84034675760455, 9.626607222466955],
                  [-65.07130378885455, 9.474930621325338],
                  [-63.77491707010454, 9.821519823434043],
                  [-63.09376472635454, 9.344868707265228],
                  [-62.25880378885454, 9.041203024044176],
                  [-60.67677253885454, 8.997801094798232],
                  [-60.03956550760454, 10.146118146125685],
                  [-59.86378425760454, 11.48419247544146],
                  [-60.56690925760454, 12.043479921932697],
                  [-60.34718269510454, 12.644488135716559],
                  [-59.51222175760454, 12.451457791994489],
                  [-58.67726082010454, 12.623047480949168],
                  [-58.61134285135454, 13.286858093195423],
                  [-59.07276863260454, 13.756855640747373],
                  [-60.25929207010454, 14.055456393759476],
                  [-60.08351082010454, 15.224692737202892],
                  [-60.23731941385454, 15.880899723278983],
                  [-60.12745613260454, 16.68236708052783],
                  [-60.83058113260454, 17.16584944896842],
                  [-60.87452644510454, 17.940974823164854],
                  [-61.40187019510454, 18.337706464105043],
                  [-62.50050300760454, 19.128427698309387],
                  [-63.64308113260454, 19.335891538919807],
                  [-65.53272957010455, 19.294419755720643],
                  [-68.01563972635455, 19.25293746096122],
                  [-68.54298347635455, 20.369214590226118],
                  [-69.31202644510455, 21.10896788541374],
                  [-70.16896003885455, 21.211423595471498],
                  [-70.71827644510455, 20.41040646254153],
                  [-71.61915535135455, 20.41040646254153],
                  [-73.28907722635455, 20.616200208974835],
                  [-73.83839363260455, 20.204337302277743],
                  [-73.75050300760455, 19.23219237770955],
                  [-74.08009285135455, 19.066137566341755],
                  [-75.09083503885455, 18.983047646373862],
                  [-75.53028816385455, 18.712719797490877],
                  [-75.50831550760455, 18.149893153986135],
                  [-75.31056160135455, 17.899161444253334],
                  [-74.7929665623841, 17.787659277340225],
                  [-74.1777321873841, 17.59925998828697],
                  [-72.3320290623841, 17.724881484227698],
                  [-72.3100564061341, 17.137903997233437],
                  [-71.6948220311341, 16.927815458203217],
                  [-71.4531228123841, 16.843714177911753],
                  [-70.5302712498841, 17.683017399919922],
                  [-69.1020485936341, 17.766735794090987],
                  [-68.1352517186341, 17.45259111630931],
                  [-66.3334939061341, 17.284824946557396],
                  [-65.2348610936341, 17.179893313460493],
                  [-64.4438454686341, 17.032889227706466],
                  [-63.828611093634095, 16.75957550719494],
                  [-63.389157968634095, 16.422650223993518],
                  [-63.784665781134095, 16.10625128434183],
                  [-64.1801735936341, 15.704755013613845],
                  [-64.1582009373841, 15.132848581940964],
                  [-63.564939218634095, 15.026768528841718],
                  [-62.576169687384095, 15.154058232846513],
                  [-61.851072031134095, 13.472168542375663],
                  [-62.400388437384095, 12.573061828325276],
                  [-62.883786874884095, 12.14379288677894],
                  [-65.79077415428644, 12.266201418450507],
                  [-67.50464134178644, 12.738135957004745],
                  [-69.15259056053644, 12.909532643852069],
                  [-70.22925071678644, 13.2519722536736],
                  [-71.85522727928644, 13.166407024341712],
                  [-73.08569602928644, 12.63095403709118],
                  [-74.46997337303644, 11.922442760955986],
                  [-75.70044212303644, 11.427528833337906],
                  [-76.97485618553644, 9.43957499290479],
                  [-77.48022727928644, 9.33118237960734],
                  [-77.37036399803644, 8.114970512594807]]]),
            {
              "system:index": "0"
            })]),
    wcmc = ee.FeatureCollection("projects/coral_atlas/global_datasets/wcmc_reefs_2018v4_dissolved"),
    no_ReefMask = 
    /* color: #d63000 */
    /* shown: false */
    ee.FeatureCollection(
        [ee.Feature(
            ee.Geometry.Polygon(
                [[[-73.01083660985321, 18.189262147524083],
                  [-73.01032162572236, 18.17833520701118],
                  [-72.92088604832978, 18.15011770421887],
                  [-72.88998700047821, 18.14555028098585],
                  [-72.89015866185517, 18.154521892156293],
                  [-72.91539288426728, 18.169854124786326],
                  [-72.96809292699189, 18.179313766899778],
                  [-72.9991636362204, 18.188446727838784]]]),
            {
              "system:index": "0"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-68.68469629103987, 19.865446468643228],
                  [-68.93806848342268, 19.898378104911647],
                  [-69.0376320820555, 19.786641093551644],
                  [-68.64281091506331, 19.734944250580956],
                  [-68.62633142287581, 19.83186207123778]]]),
            {
              "system:index": "1"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.33248457907654, 20.60745165688543],
                  [-69.58242354392029, 20.33985070440121],
                  [-69.52199873923279, 20.16205134085554],
                  [-69.35445723532654, 20.2290720957754],
                  [-69.32973799704529, 20.46341681320274]]]),
            {
              "system:index": "2"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.7479051113031, 20.975277073774386],
                  [-69.91544661520935, 20.941933820622133],
                  [-69.9017137050531, 20.40486398243984],
                  [-69.63941512106872, 20.308299748575337],
                  [-69.5171922206781, 20.37911942611898],
                  [-69.54603133200622, 20.43317802494921],
                  [-69.64078841208435, 20.584955159187924],
                  [-69.70807967184997, 20.686484415242955],
                  [-69.66276106833435, 20.82003962457418]]]),
            {
              "system:index": "3"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.28211578388434, 18.233455624064888],
                  [-72.27215942402105, 18.21095434896923],
                  [-72.07028564472418, 18.22106397738695],
                  [-72.06204589863043, 18.24454213858588],
                  [-72.20383819599371, 18.241933610535494]]]),
            {
              "system:index": "4"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.94074043293219, 18.441412768452018],
                  [-70.00288185138922, 18.428710298876762],
                  [-70.00425514240484, 18.414052437138544],
                  [-69.9465769197486, 18.41893852982125],
                  [-69.87396415729744, 18.4646981901591],
                  [-69.8719480354872, 18.474753918250155],
                  [-69.89877149018034, 18.471132146448927]]]),
            {
              "system:index": "5"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-67.86685145256479, 18.124617815120207],
                  [-67.916741081296, 18.12123520421136],
                  [-67.93710248212078, 18.112299184629432],
                  [-67.88776814898873, 18.11120340850232],
                  [-67.86018482339618, 18.114158992218112],
                  [-67.84307635185678, 18.083663907056245],
                  [-67.838613156056, 18.100797184291633],
                  [-67.84427798149545, 18.111728971849953],
                  [-67.85440600273569, 18.1195602808574]]]),
            {
              "system:index": "6"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-74.82317126152475, 18.547623608566948],
                  [-74.803945187306, 18.39522630621209],
                  [-74.76274645683725, 18.337879537123083],
                  [-74.71193468925912, 18.551529449037155]]]),
            {
              "system:index": "7"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-74.39570443212398, 18.332298614548872],
                  [-74.40720574437984, 18.338816462666923],
                  [-74.44153801977046, 18.348429840027812],
                  [-74.44643036901363, 18.357716832159134],
                  [-74.44334046422847, 18.368795397441726],
                  [-74.44488541662105, 18.393638122594847],
                  [-74.45587174474605, 18.408134845214544],
                  [-74.46127907812007, 18.40585454276226],
                  [-74.4536830621899, 18.39783252452474],
                  [-74.45934788762935, 18.38480103875221],
                  [-74.45282475530513, 18.369324869888043],
                  [-74.456944628352, 18.352706806332254],
                  [-74.44338337957271, 18.34179014923161],
                  [-74.4155742365063, 18.333479992752203],
                  [-74.40767781316646, 18.321910286333544],
                  [-74.39308659612544, 18.323376911666745]]]),
            {
              "system:index": "8"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-74.03615601679158, 18.605778158382908],
                  [-74.03529770990681, 18.602605679515833],
                  [-74.021822291816, 18.600572008117208],
                  [-74.01907570978474, 18.60236164023077],
                  [-74.01650078913045, 18.602687025866448],
                  [-74.01607163568806, 18.606022192769572],
                  [-74.0232814135201, 18.606591604977677]]]),
            {
              "system:index": "9"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-73.78659221022319, 18.64145161164519],
                  [-73.78075572340678, 18.640963644217027],
                  [-73.7737176069517, 18.642508869596718],
                  [-73.76796695082378, 18.64307815961374],
                  [-73.7502329040206, 18.638436133725975],
                  [-73.72379705196983, 18.629977683085677],
                  [-73.71941968685752, 18.630465682067324],
                  [-73.71315404659873, 18.63184833823909],
                  [-73.71135160214072, 18.63412562976326],
                  [-73.7198488402999, 18.64046935234954],
                  [-73.7429372955001, 18.647463438535137],
                  [-73.75924512631065, 18.649984491987954],
                  [-73.77975866085654, 18.646812838018768]]]),
            {
              "system:index": "10"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.84545386069514, 18.444301518848526],
                  [-72.84313643210628, 18.442265964064784],
                  [-72.82313788169124, 18.44112604285171],
                  [-72.81206572287776, 18.43933472280918],
                  [-72.80485594504573, 18.437136259054025],
                  [-72.80309641593196, 18.43723804040431],
                  [-72.80339682334163, 18.438866533810867],
                  [-72.80665838950374, 18.440983552168344],
                  [-72.81644308799007, 18.444484717596065],
                  [-72.82871687644221, 18.444566139198947],
                  [-72.83798659079768, 18.44432187427457]]]),
            {
              "system:index": "11"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.7702541083105, 18.436108085934965],
                  [-72.76763627231196, 18.432891744981276],
                  [-72.75308797061518, 18.42739532685776],
                  [-72.74982640445307, 18.429390343379126],
                  [-72.74467656314448, 18.42605173125968],
                  [-72.74287411868647, 18.426011016077695],
                  [-72.74304578006343, 18.427802474966462],
                  [-72.74905392825679, 18.43044891417452],
                  [-72.75081345737055, 18.43044891417452],
                  [-72.75737950503901, 18.43101891113405],
                  [-72.7618427008398, 18.434398140009197],
                  [-72.76424596011714, 18.43826585056292],
                  [-72.76789376437739, 18.438591548530862]]]),
            {
              "system:index": "12"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-73.33806459059909, 19.85505654880623],
                  [-73.31231538405612, 19.852311757118347],
                  [-73.28416291823581, 19.85828565470779],
                  [-73.27334825148776, 19.867326801533668],
                  [-73.26390687575534, 19.873138695147556],
                  [-73.2702583467026, 19.889604569684895],
                  [-73.32210008254245, 19.876367432860537],
                  [-73.34578935256198, 19.868134021720756],
                  [-73.35334245314792, 19.863129190318393]]]),
            {
              "system:index": "13"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.86318947522375, 19.95342634879487],
                  [-72.88782288281652, 19.944148071579956],
                  [-72.88602043835851, 19.937854668874383],
                  [-72.87795235364172, 19.936079561231416],
                  [-72.87640740124914, 19.934143057416406],
                  [-72.87451912610265, 19.929624456206597],
                  [-72.8688543006632, 19.92905962196968],
                  [-72.8534906074259, 19.940275238056262],
                  [-72.85623718945715, 19.949069660452857]]]),
            {
              "system:index": "14"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.7821618243385, 19.955070225521137],
                  [-72.78147517883069, 19.948454535157307],
                  [-72.73546992980725, 19.931994785652847],
                  [-72.70474254333264, 19.921343445627848],
                  [-72.69152461730725, 19.922473167233466],
                  [-72.68997966491467, 19.927476123008653],
                  [-72.69701778136975, 19.935706447583456],
                  [-72.72208034240491, 19.945388633407045],
                  [-72.72860347472913, 19.93957939314266],
                  [-72.73667155944592, 19.93990213431928],
                  [-72.74061977111585, 19.94409770959521],
                  [-72.74559795104749, 19.946195455429603],
                  [-72.75074779235608, 19.946356819339343],
                  [-72.75898753844983, 19.94522726850777],
                  [-72.76396571838147, 19.95442480452265],
                  [-72.77134715759045, 19.959910798862126]]]),
            {
              "system:index": "15"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.5734215899635, 19.892613527460313],
                  [-72.57651149474866, 19.883896678525105],
                  [-72.52896129333264, 19.840951128789165],
                  [-72.50801860534436, 19.830939593467534],
                  [-72.512996785276, 19.84014377030319],
                  [-72.51574336730725, 19.843050241641087],
                  [-72.51831828796155, 19.85225371650728],
                  [-72.54441081725842, 19.87259634565072],
                  [-72.55814372741467, 19.88615664838891]]]),
            {
              "system:index": "16"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-71.78319796989344, 19.761509232215214],
                  [-71.77924975822351, 19.762478540761453],
                  [-71.7730699486532, 19.772979005658158],
                  [-71.7727266258993, 19.780571218589774],
                  [-71.74835071037195, 19.80173058303843],
                  [-71.73993930290125, 19.810128940242876],
                  [-71.68861255119226, 19.820464771146913],
                  [-71.68620929191492, 19.831122892957453],
                  [-71.68620929191492, 19.836128733723122],
                  [-71.67196139762781, 19.839358224688294],
                  [-71.68329104850672, 19.842910588894792],
                  [-71.69238910148523, 19.841134416725655],
                  [-71.6987405724325, 19.832576217817294],
                  [-71.71916827628992, 19.82547094768468],
                  [-71.7456041283407, 19.81723489616089],
                  [-71.75830707023523, 19.803991722820193],
                  [-71.77341327140711, 19.788809168009255],
                  [-71.78560122917078, 19.78073275110478],
                  [-71.78422793815515, 19.772171302144603]]]),
            {
              "system:index": "17"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-68.1412360178535, 18.679972701211863],
                  [-68.1412360178535, 18.521419442143735],
                  [-68.1387390488987, 18.391153913008047],
                  [-68.07132289877582, 18.305835694623397],
                  [-67.89654043635774, 18.334279834507832],
                  [-67.75421773216176, 18.521419442143735],
                  [-67.9215094553535, 18.637390808588556],
                  [-68.05384478664446, 18.746189843509004]]]),
            {
              "system:index": "18"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-68.60267101175688, 18.336640606825508],
                  [-68.59970594494209, 18.341380760795186],
                  [-68.60844507434942, 18.361673091983402],
                  [-68.59798933117256, 18.375298725084637],
                  [-68.5872214878311, 18.379593534375115],
                  [-68.59752117044829, 18.384332514090985],
                  [-68.61702814319707, 18.37396582960477],
                  [-68.62233403982665, 18.361673091983402],
                  [-68.61421913694195, 18.343898919377114]]]),
            {
              "system:index": "19"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-68.89971588487613, 18.413598089123433],
                  [-68.91235640254679, 18.39923509601979],
                  [-68.91813046513933, 18.397606227457484],
                  [-68.91781835449736, 18.361174783391252],
                  [-68.89050859474453, 18.35584270332149],
                  [-68.86607025499332, 18.389180285134298],
                  [-68.88598297471988, 18.40397353561034]]]),
            {
              "system:index": "20"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.25066513458208, 18.442770506459908],
                  [-69.24957274471583, 18.440105749765966],
                  [-69.23622997286205, 18.440253792336506],
                  [-69.22585226520371, 18.4461754104402],
                  [-69.21789341764, 18.44669354057365],
                  [-69.20915429347136, 18.448395962120244],
                  [-69.20252192399406, 18.44484306366543],
                  [-69.19542138331511, 18.445731295168542],
                  [-69.19721602736448, 18.451578705612306],
                  [-69.20954443439317, 18.454687375097805],
                  [-69.23092407623247, 18.450246403236527],
                  [-69.2427843172982, 18.446397466403052]]]),
            {
              "system:index": "21"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.33523958008212, 18.428706054096143],
                  [-69.332430573827, 18.423079958926028],
                  [-69.31526443613168, 18.42796579520964],
                  [-69.28733044461754, 18.429446319735828],
                  [-69.26267364103754, 18.436256588226836],
                  [-69.24878465984423, 18.439661621289073],
                  [-69.24987705232982, 18.44484306366543],
                  [-69.30215574725938, 18.442474425528047],
                  [-69.31869766367075, 18.450172383788136],
                  [-69.33726830449362, 18.435516356882005]]]),
            {
              "system:index": "22"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-69.99058759562446, 18.41974092889817],
                  [-70.01305964566542, 18.433954177559578],
                  [-70.07548194169773, 18.36524600647628],
                  [-70.14102536510451, 18.287620270446315],
                  [-70.16100048810019, 18.250276434962487],
                  [-70.34140100493802, 18.244940939968448],
                  [-70.42754379357918, 18.250276434962487],
                  [-70.47810586426182, 18.223004428936978],
                  [-70.52804371366052, 18.206401992979483],
                  [-70.55113997450805, 18.195728148496666],
                  [-70.50057789334802, 18.164888922766853],
                  [-70.41256244085504, 18.206994943049917],
                  [-70.27273645415677, 18.213517499458607],
                  [-70.1878421080835, 18.1903909811153],
                  [-70.10045083496495, 18.23841956141138],
                  [-70.02429562877639, 18.340362177494615],
                  [-69.99870245136096, 18.387756881593358]]]),
            {
              "system:index": "23"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-63.26265903791527, 18.643669076549322],
                  [-63.00797599969546, 18.383224940823343],
                  [-62.87314386708776, 18.342939252599308],
                  [-62.8506718170468, 18.214910500062253],
                  [-62.92058476848642, 18.167468522687855],
                  [-62.88063443867604, 18.025065500241663],
                  [-62.738311566842, 17.96569673750764],
                  [-62.56602607337872, 17.756560540993167],
                  [-62.42620000286142, 17.68045027662057],
                  [-62.29386467157046, 17.785093652961795],
                  [-62.34629951087872, 18.210166899321333],
                  [-62.47364090426008, 18.459031288879242],
                  [-62.80572771696488, 18.726454242416043],
                  [-62.99299468888084, 18.754828403387954]]]),
            {
              "system:index": "24"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-61.78339761001209, 16.057705525983266],
                  [-61.76435880846495, 16.03010967867202],
                  [-61.74095043697545, 15.979707407023074],
                  [-61.71504518035019, 15.93979658870231],
                  [-61.66947687993908, 15.943097784192608],
                  [-61.67509489244932, 15.950300222237255],
                  [-61.689452023889515, 15.957802454810947],
                  [-61.70380915532971, 15.972205974823067],
                  [-61.73252341821009, 16.006410185070216],
                  [-61.746880549650285, 16.042408304514943],
                  [-61.76217402349377, 16.08439787130494],
                  [-61.77403426979819, 16.086197230964355]]]),
            {
              "system:index": "25"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-61.63885873061756, 15.969250341711492],
                  [-61.629807490568254, 15.960548204584716],
                  [-61.61045657837914, 15.975401618027403],
                  [-61.57737275603378, 16.012905330822438],
                  [-61.56551250972936, 16.021155202565517],
                  [-61.575187971062604, 16.02760486015112],
                  [-61.59531916509533, 16.01440532828782],
                  [-61.619195697309095, 15.995054435781684],
                  [-61.63417706051061, 15.976451819499363]]]),
            {
              "system:index": "26"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-61.48035275983205, 15.481342491504366],
                  [-61.45413534017792, 15.421176300243193],
                  [-61.42417271854868, 15.44524480750252],
                  [-61.46287448006263, 15.535477123965775],
                  [-61.48784349905839, 15.525854215280864]]]),
            {
              "system:index": "27"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-61.23690574663272, 15.435617739561039],
                  [-61.26936533721676, 15.421176300243193],
                  [-61.25937779667368, 15.339322212068716],
                  [-61.22691820608964, 15.339322212068716]]]),
            {
              "system:index": "28"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-61.093953490185235, 14.636255300087148],
                  [-61.162618040966485, 14.712341911149156],
                  [-61.16573912643144, 14.767880454006775],
                  [-61.198822917344664, 14.852971750454545],
                  [-61.19944720149288, 14.883741225908514],
                  [-61.22566453732798, 14.869262026383183],
                  [-61.246763296353315, 14.794980528697351],
                  [-61.18746208578596, 14.737637836582069],
                  [-61.200570795613025, 14.69175283252582],
                  [-61.156875180008505, 14.644046348419014],
                  [-61.093204399498795, 14.587268114125994],
                  [-61.073229234593605, 14.615055022586908]]]),
            {
              "system:index": "29"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-61.01860326028752, 14.834347636928701],
                  [-61.097879551941034, 14.880805819326667],
                  [-61.15718076250839, 14.895284243650671],
                  [-61.205245948055264, 14.870549668658619],
                  [-61.20399746357786, 14.85667293850281],
                  [-61.186519267627475, 14.854862869757275],
                  [-61.160301847973344, 14.863309747699624],
                  [-61.10224912188339, 14.85365612857944],
                  [-60.994258525439975, 14.776411747942996],
                  [-60.980525615283725, 14.791500717758217]]]),
            {
              "system:index": "30"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-61.17694823546646, 13.143044741393732],
                  [-61.17694823546646, 13.107785705948913],
                  [-61.12201659484146, 13.143044741393732],
                  [-61.092053973212224, 13.236639121407238],
                  [-61.09829614414213, 13.392144933775192],
                  [-61.20316565512059, 13.397002903382116],
                  [-61.26309106601713, 13.366639117665917],
                  [-61.29679905725954, 13.250006817995054],
                  [-61.29305368764637, 13.172220931884718],
                  [-61.23063147543309, 13.126023789462776],
                  [-61.19567491589425, 13.150339155375821]]]),
            {
              "system:index": "31"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-61.25082503082542, 13.012348012993776],
                  [-61.21867754040597, 13.029376851930596],
                  [-61.20463248817561, 13.039411161703804],
                  [-61.21274738582162, 13.026031991619277],
                  [-61.206193072817605, 13.021470749378137],
                  [-61.19620549036501, 13.042451782229218],
                  [-61.205568830578905, 13.054917934478876],
                  [-61.22897722302316, 13.043059899807671],
                  [-61.24832814568965, 13.022078918501803],
                  [-61.253009815796595, 13.018733959639764]]]),
            {
              "system:index": "32"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-61.13659217963306, 12.963383554772983],
                  [-61.131286267287415, 12.96155861164075],
                  [-61.12348351171551, 12.963991866177059],
                  [-61.12161082690893, 12.970987350655635],
                  [-61.13003782471953, 12.971291507458949]]]),
            {
              "system:index": "33"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-61.746085842773525, 12.152209504041267],
                  [-61.75357654009035, 12.13725830922703],
                  [-61.75950665276518, 12.118644437458686],
                  [-61.754824982658235, 12.110710262590073],
                  [-61.743901078757105, 12.111930917074707],
                  [-61.74265261523446, 12.121695972489523],
                  [-61.7348498387078, 12.141530170692585],
                  [-61.72611071977785, 12.158922009675075],
                  [-61.68864199156952, 12.207444520321848],
                  [-61.70301444845295, 12.218045753750529]]]),
            {
              "system:index": "34"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-61.61493655078134, 12.128729653886136],
                  [-61.60194580382294, 12.133008307205712],
                  [-61.595476390961764, 12.177899172147109],
                  [-61.59079472085482, 12.190254956889282],
                  [-61.58673727203181, 12.205050636221834],
                  [-61.59001444948858, 12.208253716007606],
                  [-61.613734921142665, 12.212982001315618],
                  [-61.61014564352131, 12.195593703159428]]]),
            {
              "system:index": "35"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-61.39163563644037, 10.869027767462748],
                  [-61.788641797951314, 10.746397609293691],
                  [-61.78614466135845, 10.655619154338213],
                  [-61.558927694908235, 10.6286257506044],
                  [-61.50149891769037, 10.71450552585894],
                  [-61.01210808997497, 10.81262414328962],
                  [-60.982145468345735, 10.861671315537846]]]),
            {
              "system:index": "36"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-61.52896473800287, 10.29223717438517],
                  [-61.63633121793613, 10.287323719350411],
                  [-61.85356097911939, 10.184123220898767],
                  [-61.99588368331537, 10.085805956119186],
                  [-61.93096450214729, 10.00467162749803],
                  [-61.77366031949863, 10.044012070378178],
                  [-61.613859335533235, 10.009589423219571],
                  [-61.03208317106113, 10.026801203867166],
                  [-60.91223234926805, 10.157088989785796],
                  [-60.99712661152229, 10.682610165538698],
                  [-61.019598829201314, 10.724318946870664],
                  [-61.04956145083055, 10.697331644594904],
                  [-61.101996290138814, 10.449427640381847],
                  [-61.037077108970735, 10.245556019810362],
                  [-61.08951161300287, 10.149715560765197],
                  [-61.38164809589729, 10.134968358234099],
                  [-61.70125039910421, 10.127594419941621],
                  [-61.47403309737787, 10.208697731501294],
                  [-61.42908899729595, 10.343823908520568],
                  [-61.52896473800287, 10.383122501979166]]]),
            {
              "system:index": "37"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-62.29301393648133, 10.633533969670058],
                  [-61.87852966283903, 10.53535760251025],
                  [-61.81199133159541, 10.728529542605141],
                  [-61.85805518796191, 10.763814110445038],
                  [-61.874909267402145, 10.773625785012204],
                  [-62.027843922017965, 10.74909598945989],
                  [-62.34370083465696, 10.746642885761625],
                  [-62.682903694561574, 10.782088116846547],
                  [-62.86018308402494, 10.74529367743594],
                  [-63.02260596921191, 10.735726407784325],
                  [-63.166177283613834, 10.749218647209524],
                  [-63.292894602394554, 10.6983129495581],
                  [-63.38715230963648, 10.717940255286818],
                  [-63.578663982092294, 10.666713348662979],
                  [-63.80881507565722, 10.738047693955206],
                  [-63.84314735104785, 10.670577991694547],
                  [-63.90182436128602, 10.651561090745895],
                  [-64.12966577952251, 10.685299930453013],
                  [-64.28697002503544, 10.681619522933657],
                  [-64.32261318817258, 10.607790511322207],
                  [-64.26955421139941, 10.478916846934816],
                  [-64.23952906077251, 10.485484584224603],
                  [-64.24424195346877, 10.49536656729814],
                  [-64.26296795874572, 10.513103897862011],
                  [-64.26658914458461, 10.533541307277714],
                  [-64.24037177731738, 10.550417699785093],
                  [-64.20697582337529, 10.558702130905257],
                  [-64.19105812824786, 10.5448946148805],
                  [-64.06871040036425, 10.561463561770816],
                  [-63.970083227953765, 10.548361917489444],
                  [-63.79904596751079, 10.512766737974502],
                  [-63.37432454024896, 10.634264275578616],
                  [-62.773322469196174, 10.666287441378445],
                  [-62.425005945018384, 10.667514310721508]]]),
            {
              "system:index": "38"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-63.67376451065287, 10.484974865908884],
                  [-63.82982029264316, 10.471470964409402],
                  [-64.01958406587586, 10.488657675915453],
                  [-64.1069752970849, 10.423588782738658],
                  [-63.88350336497173, 10.414993745730113],
                  [-63.6675221720849, 10.455511057217016],
                  [-63.59636081998691, 10.484974865908884],
                  [-63.61633590107307, 10.516890820894966],
                  [-63.65254086127028, 10.529165360703157]]]),
            {
              "system:index": "39"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-64.1901715964798, 11.082924998967032],
                  [-64.20921039802694, 11.074348728672216],
                  [-64.21951008064413, 11.043410828732387],
                  [-64.15583932108918, 10.988265899552898],
                  [-64.04410335503259, 10.96681786527742],
                  [-63.992511316088226, 11.054101628840373],
                  [-63.95196802949273, 11.084333924434496],
                  [-63.960707148422685, 11.102404447604473],
                  [-63.878746657052275, 11.142890551455535],
                  [-63.881243542188045, 11.166775344051592],
                  [-63.88810999726617, 11.18912726458724],
                  [-63.99441893695038, 11.112599398408893],
                  [-64.02656642736983, 11.063900078555426],
                  [-64.06745303671923, 11.013048101440617],
                  [-64.120824113657, 11.03510545212214],
                  [-64.17232253722031, 11.04980943285126]]]),
            {
              "system:index": "40"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-63.78462226658522, 11.003283485862443],
                  [-63.77463472604214, 11.006653578520899],
                  [-63.83331169437079, 11.129176117221652],
                  [-63.86639552719353, 11.174190225305452],
                  [-63.88168898008226, 11.186743941287768],
                  [-63.889179677399085, 11.1729654474372],
                  [-63.86296229965447, 11.12427619552135],
                  [-63.82675736041202, 11.040965050649937],
                  [-63.80147630411594, 11.013700000079211]]]),
            {
              "system:index": "41"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-66.08363216511532, 10.514158485867704],
                  [-66.1510483152382, 10.52152328413887],
                  [-66.00872535958513, 10.359456821525649],
                  [-65.61421633466705, 10.130948378595152],
                  [-65.01246525674685, 10.00310904456572],
                  [-64.72781951307877, 10.086702149890874],
                  [-64.65291262372955, 10.15798481952239],
                  [-64.76527287393435, 10.207136139992203],
                  [-65.08412596072628, 10.18747654549637],
                  [-65.30666159234568, 10.220958608474483],
                  [-65.53138192511722, 10.319234108344101],
                  [-65.84224504652991, 10.443263078089998]]]),
            {
              "system:index": "42"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-64.62144394596955, 11.910767125220808],
                  [-64.63924979312186, 11.900020896545477],
                  [-64.63081490211769, 11.89733542178728],
                  [-64.6213500758972, 11.899016967414202],
                  [-64.6140468954659, 11.889953865713757],
                  [-64.5734723862811, 11.846581443172555],
                  [-64.5734723862811, 11.805951741574209],
                  [-64.5684785950548, 11.798313896987295],
                  [-64.54350968083283, 11.840777575444548],
                  [-64.56754227360626, 11.88201295634337],
                  [-64.59063852397641, 11.900032383240397]]]),
            {
              "system:index": "43"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-66.07589042744887, 10.592805409839533],
                  [-66.10148356295478, 10.602929412766374],
                  [-66.16640276507762, 10.614893693961292],
                  [-66.17607822641087, 10.60446331715764],
                  [-66.1177133582468, 10.578999437477462],
                  [-66.06153327505392, 10.570408739668144],
                  [-66.04936090763015, 10.586669492014913]]]),
            {
              "system:index": "44"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-66.32926901094963, 10.633203477003402],
                  [-66.37733418601913, 10.644246358531916],
                  [-66.38279614844707, 10.642866019563943],
                  [-66.38981865360749, 10.6256879580252],
                  [-66.38482487285857, 10.622773719967137],
                  [-66.3885702110396, 10.616945181050781],
                  [-66.37764630713848, 10.610042806624406],
                  [-66.35220921123748, 10.601146195750205],
                  [-66.31475580847238, 10.612190230986865],
                  [-66.3164724327193, 10.618325637235179]]]),
            {
              "system:index": "45"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-66.49816729990133, 10.652761948259172],
                  [-66.65796836768575, 10.649694596395983],
                  [-66.78406148613729, 10.63926541856258],
                  [-66.8845614271734, 10.62454125422015],
                  [-67.02001784392931, 10.628835884102728],
                  [-67.0668345869083, 10.594477196715903],
                  [-67.05310167675205, 10.58404613464864],
                  [-67.02626005676873, 10.598158655977109],
                  [-66.97320110095032, 10.58404613464864],
                  [-66.87769497209527, 10.600612937563163],
                  [-66.82775710174181, 10.595704354719846],
                  [-66.69542181236037, 10.607975705444087],
                  [-66.56371068139859, 10.619019504384704],
                  [-66.45072631468364, 10.621473618589627],
                  [-66.37332262401767, 10.609202809334214],
                  [-66.38455864903815, 10.644173301707784]]]),
            {
              "system:index": "46"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-67.07610746987794, 10.591728467730608],
                  [-67.08305194999721, 10.590232844986376],
                  [-67.08757756740252, 10.585170680702722],
                  [-67.08535377253011, 10.582524515169476],
                  [-67.07610746987794, 10.58635953005989],
                  [-67.0670952475879, 10.588507115384445],
                  [-67.06826566511464, 10.590616337703354]]]),
            {
              "system:index": "47"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-67.7966397954266, 10.490208962312053],
                  [-67.79531331995953, 10.48614257674836],
                  [-67.77057847562232, 10.48614257674836],
                  [-67.75068136195172, 10.491589987541103],
                  [-67.72867749882847, 10.490899475697079],
                  [-67.70082154283286, 10.498571734922725],
                  [-67.67167034181752, 10.489710250087965],
                  [-67.50743717509307, 10.506711795381175],
                  [-67.37322924281456, 10.517759234588224],
                  [-67.24963305140831, 10.529420009697375],
                  [-67.16099333572187, 10.541080302515967],
                  [-67.09357726941802, 10.560717698608356],
                  [-67.08296544472672, 10.572990449595686],
                  [-67.08109275992014, 10.594466593124242],
                  [-67.09045610013403, 10.611032852921435],
                  [-67.62291851076283, 10.546603455870374],
                  [-67.75712648495086, 10.522055358748009]]]),
            {
              "system:index": "48"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-68.32524804890207, 10.640615078981227],
                  [-68.17668292231909, 10.471245234499646],
                  [-68.1592047263687, 10.533849322659803],
                  [-68.23411144807986, 10.619755745989876],
                  [-68.29153997384063, 10.76574118808141],
                  [-68.34272632867149, 10.785364133086093]]]),
            {
              "system:index": "49"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-68.29227121765886, 10.943724132666864],
                  [-68.27167185242449, 10.980494087164066],
                  [-68.3628708146063, 11.134510388323479],
                  [-68.36518044802521, 11.109520431141254],
                  [-68.39514315347348, 11.11135797616076]]]),
            {
              "system:index": "50"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-68.44770275741045, 11.16471923893842],
                  [-68.45082384287541, 11.202686108456216],
                  [-68.52260952103113, 11.284726584381385],
                  [-68.66231065928166, 11.377697834101554],
                  [-68.78534505362784, 11.441517672233608],
                  [-68.85151271927332, 11.478836143402878],
                  [-68.97823003805404, 11.471495177439362],
                  [-69.10650789956723, 11.514008869274084],
                  [-69.19764445847993, 11.553152467677567],
                  [-69.28129038294007, 11.559268142383852],
                  [-69.35370026142498, 11.532969733136598],
                  [-69.41031731418495, 11.523244776749745],
                  [-69.49021788998668, 11.528749497223108],
                  [-69.54140420290803, 11.540370237716344],
                  [-69.59196625263591, 11.497554669996013],
                  [-69.7140433048553, 11.658629414683096],
                  [-69.7321457849539, 11.744204454804729],
                  [-69.77491531651317, 11.837573210004786],
                  [-69.76929730400293, 11.948743032317386],
                  [-69.88090842161178, 12.256480583578492],
                  [-70.28702801689356, 12.22500294957699],
                  [-71.53285264400616, 12.674053788504894],
                  [-72.49455879710405, 12.240343865720634],
                  [-71.88539669898805, 10.711176752809662],
                  [-71.22330036843046, 10.628251157405632],
                  [-69.60069460924565, 11.429158662752577],
                  [-69.51704870574027, 11.442618935801915],
                  [-69.28920728750377, 11.482995911963647],
                  [-69.07135332599132, 11.42304016410839],
                  [-68.83346192203312, 11.405846412741449],
                  [-68.66504652090221, 11.282522812345887]]]),
            {
              "system:index": "51"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-75.58716506462177, 10.517836868277472],
                  [-75.51948911499741, 10.455118063873673],
                  [-75.43672733705124, 10.377505154592983],
                  [-75.0272371689566, 10.716254579319886],
                  [-74.57280256550392, 10.829087265260872],
                  [-73.85869123737892, 10.971294239314712],
                  [-73.31936270694813, 11.137932251113732],
                  [-72.54532613556465, 11.490496743290757],
                  [-72.2257234970816, 11.735074840997887],
                  [-72.4454500595816, 12.038050084790957],
                  [-73.1980135361441, 11.912502969710658],
                  [-74.61624865185102, 11.45770704065622],
                  [-75.53011146138986, 11.154100902534587],
                  [-75.7248690048941, 10.69319202869131]]]),
            {
              "system:index": "52"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-75.80589288568757, 9.511757291459613],
                  [-75.91825296825431, 9.536382059098662],
                  [-76.03311018741391, 9.501906838003094],
                  [-76.10052633753679, 9.376289447184586],
                  [-76.21788019037507, 9.260484239427376],
                  [-76.54322527072094, 8.905687477915935],
                  [-76.91775921455286, 8.75024666963791],
                  [-77.05359013474248, 8.550792952004434],
                  [-76.86882013178132, 8.39520573013174],
                  [-76.92375177240632, 8.009675914102086],
                  [-76.63361286467574, 7.757152707339318],
                  [-76.64060421011112, 8.597456820233402],
                  [-76.03036360538266, 9.1572127433071],
                  [-75.58092293983958, 9.415950200838648],
                  [-75.65832646286748, 9.462748739688127]]]),
            {
              "system:index": "53"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-60.99798753377706, 10.857442724425729],
                  [-61.01546577163696, 10.819431269499368],
                  [-60.96053413101196, 10.818205017181027],
                  [-60.98799995132446, 10.761791833351507],
                  [-61.02420491152167, 10.705981426059747],
                  [-61.00485398885518, 10.674698609708605],
                  [-60.95054659046888, 10.705368090310133],
                  [-60.88874849476576, 10.794292033504806],
                  [-60.88562732548177, 10.847633790322615],
                  [-60.90934786000013, 10.867251336456],
                  [-60.98175773848504, 10.867864383300489]]]),
            {
              "system:index": "54"
            }),
        ee.Feature(
            ee.Geometry.Polygon(
                [[[-72.01406802542185, 18.720105954246506],
                  [-72.05651515654897, 18.547387604077613],
                  [-71.90670154548859, 18.388711232294042],
                  [-71.64702482081627, 18.25834523687488],
                  [-71.40981997854685, 18.218030494928897],
                  [-71.25750956616973, 18.270200790293703],
                  [-71.22005603767609, 18.362645896748045],
                  [-71.13266480646705, 18.469251947440917],
                  [-71.26749710671281, 18.58525858805501],
                  [-71.40232923932051, 18.646781221011434],
                  [-71.69696252353167, 18.701186463172363]]]),
            {
              "system:index": "55"
            })]),
    imageVisParam3 = {"opacity":1,"bands":["b3","b2","b1"],"min":205.36,"max":3294.64,"gamma":1},
    se_caribbean_extent = ee.FeatureCollection("projects/coral_atlas/se_caribbean/in_out/se_caribbean_extent");
/***** End of imports. If edited, may not auto-convert in the playground. *****/

///////////////////////////////
// Coral atlas mapping project - reef outline export script for GBR-torres straigh
// Contact: mitchell.lyons@gmail.com
//coordinator: Rodney Borrego
// Description:
// - Primarily for use in generating exports for wave modelling
///////////////////////////////

var param_module = require('users/mitchest/global_reefs_modules:reef_params')

// #############################
// load analysis params module
var region_params = param_module.se_caribbean        //<------------ THIS IS WHERE YOU CHOOSE THE REGION
// choose an appropriate scale
var export_scale = ee.Number(100)
// #############################

//var region_extent = ee.FeatureCollection(region_params.extent_mask).geometry().bounds()

// display it

var Dove_sr = ee.Image(region_params.image)
Map.addLayer(Dove_sr, imageVisParam3, "Dove se caribbean")
Map.addLayer(reef_mask, {min:1, max:3}, "Global reef mask", true)
//Map.addLayer

// exports
Map.addLayer(refined_mask, {}, "export_geom", true)
Map.addLayer(se_caribbean_extent, {}, "se_caribbean_extent", true)//its the same as the refined mask
//show wcmc
//UnEp layer
var extent =ee.FeatureCollection(region_params.extent_mask).geometry()
var unepClipped= wcmc.filterBounds(extent)
Map.addLayer(unepClipped, {color:'#FFFF33'}, 'UNEP_layer', false)


/*
// drive export
Export.image.toDrive({
  image: reef_mask, 
  description: 'reef_mask_export_' + region_params.sname,
  folder: 'wcmc_rf/',
  fileNamePrefix: 'reef_mask_' + region_params.sname,
  region: region_extent,
  scale: export_scale,
  crs: 'EPSG:4326',
  maxPixels: 1e13,
  skipEmptyTiles: true
})
*/

Export.table.toAsset({
  collection: no_ReefMask,
  //fileFormat: 'SHP'
})
