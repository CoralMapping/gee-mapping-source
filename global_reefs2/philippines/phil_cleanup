/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var wcmc = ee.FeatureCollection("projects/coral_atlas/global_datasets/wcmc_reefs_2018v4_dissolved"),
    sltoRs = 
    /* color: #0b4a8b */
    /* shown: false */
    ee.Geometry.MultiPolygon(
        [[[[118.8112585047736, 9.951528477136435],
           [118.82430476942204, 9.93326747676956],
           [118.98017329969548, 9.977903674516675],
           [118.97536678114079, 10.004276736040975],
           [118.86652682315835, 9.986703890929222]]],
         [[[119.1998796707893, 10.149671422761148],
           [119.25206472938305, 10.145615996826454],
           [119.37703421180493, 10.311846113577294],
           [119.57753470008618, 10.352376792283485],
           [119.56929495399243, 10.418565629837916],
           [119.23421194617993, 10.332112106309452]]]]),
    refinement_mask = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                120.3791265135556,
                12.943073931417356
              ],
              [
                119.9616460448056,
                12.964487410039885
              ],
              [
                119.5276860838681,
                12.718121893326119
              ],
              [
                118.67764051468846,
                11.274136516065013
              ],
              [
                117.48013074906346,
                9.832310909340963
              ],
              [
                116.81953539488961,
                9.111164149268179
              ],
              [
                115.99556078551461,
                7.404259587855364
              ],
              [
                116.02302660582711,
                6.924636835087074
              ],
              [
                116.52641333650114,
                6.935157092700178
              ],
              [
                116.83642977629442,
                7.327079813730836
              ],
              [
                117.08980196867724,
                7.559933494202121
              ],
              [
                117.1042215243413,
                7.728708156063593
              ],
              [
                117.07538241301317,
                7.806267516832854
              ],
              [
                117.04173678313036,
                7.777694682373469
              ],
              [
                117.00122469816942,
                7.766809280711943
              ],
              [
                116.8105089083745,
                7.7372131701079345
              ],
              [
                116.79903114964132,
                7.815251102383452
              ],
              [
                116.79628456761007,
                7.8785111941777455
              ],
              [
                116.81001747776632,
                8.080470278981789
              ],
              [
                116.95215309788351,
                8.14275698038477
              ],
              [
                116.98511208225851,
                8.407760243255014
              ],
              [
                116.95421303440695,
                8.57210749549243
              ],
              [
                117.03043068577414,
                8.60333906226158
              ],
              [
                117.11145485569601,
                8.67258246677332
              ],
              [
                117.14808479898686,
                8.754968796251333
              ],
              [
                117.17005745523686,
                8.807220778985625
              ],
              [
                117.16456429117436,
                8.879818411401581
              ],
              [
                117.2380353605103,
                8.930696043662842
              ],
              [
                117.32899521569678,
                9.057838565786962
              ],
              [
                117.38324021081397,
                9.192073799415503
              ],
              [
                117.42701853248673,
                9.261040660588396
              ],
              [
                117.59936655494766,
                9.272561292430485
              ],
              [
                117.82710432082438,
                9.426359192339952
              ],
              [
                118.06262373000406,
                9.546233421749166
              ],
              [
                118.12087470770467,
                9.70103777851919
              ],
              [
                118.18747932196248,
                9.839758413498592
              ],
              [
                118.1442206549703,
                9.886436690527491
              ],
              [
                118.14010078192342,
                9.899288966784
              ],
              [
                118.15932685614217,
                9.90334747584641
              ],
              [
                118.17855293036092,
                9.860730631225142
              ],
              [
                118.31656867743123,
                9.77074366825548
              ],
              [
                118.39621955633748,
                9.803899603612587
              ],
              [
                118.43192512274373,
                9.888466030726281
              ],
              [
                118.69697028875936,
                10.204888105945834
              ],
              [
                118.83223945379842,
                10.321101500752542
              ],
              [
                118.79516059637655,
                10.523696314981402
              ],
              [
                118.78005439520467,
                10.581749075994454
              ],
              [
                119.09041816473592,
                10.711447635381118
              ],
              [
                119.1884021258051,
                11.060078159845316
              ],
              [
                119.20694155451604,
                11.22042040971433
              ],
              [
                119.31337160822697,
                11.305944864081189
              ],
              [
                119.41842837092229,
                11.459420686203257
              ],
              [
                119.58802981135197,
                11.541509572380848
              ],
              [
                119.8640613054926,
                11.625928413043136
              ],
              [
                119.84512229930483,
                11.725503011649009
              ],
              [
                119.81113334666811,
                11.863629432216847
              ],
              [
                119.69543357860171,
                11.866317333140971
              ],
              [
                119.66522117625796,
                12.066491048662758
              ],
              [
                119.71465965282046,
                12.175247786214051
              ],
              [
                119.66934104930483,
                12.286643687700481
              ],
              [
                119.80941673289858,
                12.428839721923872
              ],
              [
                120.14724632274233,
                12.479796773623496
              ],
              [
                120.31753440867983,
                12.69960116106895
              ],
              [
                120.55374046336733,
                12.820145030517784
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                120.74767549954765,
                10.764619900813782
              ],
              [
                120.80604036771172,
                10.724143439241182
              ],
              [
                120.77891787015312,
                10.662406414047899
              ],
              [
                120.80089052640312,
                10.633726481863246
              ],
              [
                120.87298830472344,
                10.630352194837451
              ],
              [
                120.94096620999687,
                10.689734187658425
              ],
              [
                120.92723329984062,
                10.702891127511824
              ],
              [
                120.91006716214531,
                10.70693930185183
              ],
              [
                120.89049776517265,
                10.688047359236498
              ],
              [
                120.87470491849297,
                10.687709992427315
              ],
              [
                120.85135897122734,
                10.708963368743387
              ],
              [
                120.86371859036797,
                10.729877934378218
              ],
              [
                120.92963655911797,
                10.773726356258157
              ],
              [
                120.8547921987664,
                10.82599882065503
              ],
              [
                120.82972963773125,
                10.82802208784873
              ],
              [
                120.75969179593437,
                10.820603374681866
              ],
              [
                120.72673281155937,
                10.773726356258157
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.06741281451463,
                10.371873934699114
              ],
              [
                121.18963571490525,
                10.409695486098425
              ],
              [
                121.18826242388963,
                10.532583773629154
              ],
              [
                121.2583002656865,
                10.650024582572831
              ],
              [
                121.4450678438115,
                10.759325358656351
              ],
              [
                121.6538080781865,
                10.90769502171533
              ],
              [
                121.659301242249,
                10.983200301368369
              ],
              [
                121.571410617249,
                11.150321678069542
              ],
              [
                121.44644113482713,
                11.250009738137937
              ],
              [
                121.33932443560838,
                11.235193418007556
              ],
              [
                121.28439279498338,
                11.132805370871408
              ],
              [
                121.24240358792656,
                10.909615780598548
              ],
              [
                121.22041836508934,
                10.86039016388046
              ],
              [
                121.12979372464531,
                10.77608724420416
              ],
              [
                120.99658449612969,
                10.674889775975679
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                120.92625397124482,
                11.299334549758187
              ],
              [
                121.0567166177292,
                11.264992348687498
              ],
              [
                121.09654205718232,
                11.257584669279401
              ],
              [
                121.1288143960495,
                11.235360487688174
              ],
              [
                121.17069977202607,
                11.203031349124199
              ],
              [
                121.22425812163544,
                11.184171015656226
              ],
              [
                121.32862823882294,
                11.257584669279401
              ],
              [
                121.61633270659638,
                11.268359412637377
              ],
              [
                121.65478485503388,
                11.331652864924571
              ],
              [
                121.67675751128388,
                11.335692397694022
              ],
              [
                121.694610294487,
                11.326940004560884
              ],
              [
                121.76121490874482,
                11.390893615470358
              ],
              [
                121.68705719390107,
                11.48646060145604
              ],
              [
                121.4687039224167,
                11.500591004992637
              ],
              [
                121.08143585601044,
                11.435989099224075
              ],
              [
                120.92282074370576,
                11.369352948683956
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.68568390288544,
                11.623697279270273
              ],
              [
                121.705596622612,
                11.59544816915324
              ],
              [
                121.70765655913544,
                11.578631865269124
              ],
              [
                121.6891171304245,
                11.578631865269124
              ],
              [
                121.672637638237,
                11.596793429735424
              ],
              [
                121.59230011382294,
                11.552396412418585
              ],
              [
                121.63830536284638,
                11.497899554194527
              ],
              [
                121.71452301421357,
                11.49117081469588
              ],
              [
                121.77357452788544,
                11.507992362033045
              ],
              [
                121.81134003081513,
                11.599483931453907
              ],
              [
                121.78456085601044,
                11.68489384821122
              ],
              [
                121.72070282378388,
                11.708427395076964
              ],
              [
                121.6389920083542,
                11.722546561966292
              ],
              [
                121.5840603677292,
                11.68758349768341
              ],
              [
                121.57238739409638,
                11.629750287529223
              ],
              [
                121.58612030425263,
                11.55845096585078
              ],
              [
                121.66577118315888,
                11.601501790724784
              ],
              [
                121.6781308022995,
                11.62638752140683
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                119.7808495245664,
                11.170928879012871
              ],
              [
                119.89895255191016,
                10.887864902915162
              ],
              [
                120.08984000308203,
                10.596432554927143
              ],
              [
                120.1488915167539,
                10.584283465961889
              ],
              [
                120.16399771792578,
                10.635576338461233
              ],
              [
                120.34801871401953,
                10.873030263170017
              ],
              [
                120.55115784472423,
                11.20304983972142
              ],
              [
                120.67887390917736,
                11.421200893752012
              ],
              [
                120.76676453417736,
                11.491189286641935
              ],
              [
                120.95353211230236,
                11.57326890092658
              ],
              [
                120.91507996386486,
                11.682222631949086
              ],
              [
                120.80658997363048,
                11.901345024569034
              ],
              [
                120.51270569628673,
                11.895969887639327
              ],
              [
                120.31769837206798,
                11.779034454914154
              ],
              [
                120.25040711230236,
                11.592103454648244
              ],
              [
                120.26276673144298,
                11.489843519549805
              ],
              [
                120.13642395800548,
                11.347155911761497
              ],
              [
                119.92768372363048,
                11.251542186359769
              ],
              [
                119.80683411425548,
                11.180147847908895
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                119.89963919741797,
                10.157414080310883
              ],
              [
                120.40501029116797,
                10.503277262692407
              ],
              [
                120.3569451056211,
                10.647723389063529
              ],
              [
                119.95869071108984,
                10.44385920625049
              ],
              [
                119.77741629702734,
                10.311478252074645
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                117.44126732119923,
                7.416551226601631
              ],
              [
                117.49070579776173,
                7.262640888911269
              ],
              [
                117.54014427432423,
                7.133206415290846
              ],
              [
                117.62116844424611,
                7.037810187012035
              ],
              [
                117.69120628604298,
                7.02281756133704
              ],
              [
                117.74476463565236,
                6.981926128732982
              ],
              [
                117.80656273135548,
                6.96011590188513
              ],
              [
                117.86836082705861,
                6.949210408176415
              ],
              [
                117.90406639346486,
                6.926035394476892
              ],
              [
                117.91505272158986,
                6.909675875450402
              ],
              [
                117.94938499698048,
                6.852413109570089
              ],
              [
                117.95625145205861,
                6.827869815344217
              ],
              [
                117.94801170596486,
                6.780143143449165
              ],
              [
                117.90955955752736,
                6.737866999711041
              ],
              [
                117.80381614932423,
                6.716324108181767
              ],
              [
                117.83952171573048,
                6.620844121150876
              ],
              [
                117.97273094424611,
                6.566275818189768
              ],
              [
                118.10868675479298,
                6.579918456732122
              ],
              [
                118.31330711612111,
                6.66585843249497
              ],
              [
                118.46986229190236,
                6.776330528044278
              ],
              [
                118.35450584658986,
                6.8581454186180295
              ],
              [
                118.33115989932423,
                6.957667908687715
              ],
              [
                118.44237300197278,
                7.485290253348655
              ],
              [
                118.35722895900403,
                7.558809802875394
              ],
              [
                118.28307124416028,
                7.686758351284349
              ],
              [
                118.30779048244153,
                7.7656861351371145
              ],
              [
                118.31603022853528,
                7.934378380029186
              ],
              [
                118.48631831447278,
                8.29873302089325
              ],
              [
                118.56047602931653,
                8.730625099586966
              ],
              [
                118.23637934962903,
                8.833771552953321
              ],
              [
                118.03038569728528,
                8.765915270518828
              ],
              [
                117.97820063869153,
                8.703476541930689
              ],
              [
                117.96996089259778,
                8.657319477360362
              ],
              [
                117.92876216212903,
                8.62473460917103
              ],
              [
                117.87657710353528,
                8.567704331962018
              ],
              [
                117.78593989650403,
                8.513381829090852
              ],
              [
                117.56346675197278,
                8.306886403801894
              ],
              [
                117.48106929103528,
                8.209034674617195
              ],
              [
                117.35197993556653,
                8.021418362786171
              ],
              [
                117.29475062326128,
                7.9502025819910624
              ],
              [
                117.38538783029253,
                7.786959313668946
              ],
              [
                117.43207972482378,
                7.648152456975649
              ],
              [
                117.44031947091753,
                7.509300428788079
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                118.46090472159426,
                5.906826725201869
              ],
              [
                118.83306658682864,
                5.815297227042812
              ],
              [
                118.93880999503176,
                5.566590346486828
              ],
              [
                119.08437884268801,
                5.480474742491299
              ],
              [
                119.35629046378176,
                5.490043759801505
              ],
              [
                119.60622942862551,
                5.6198936976320155
              ],
              [
                119.52108538565676,
                6.042044050938436
              ],
              [
                119.15167010245364,
                6.199072236002403
              ],
              [
                118.72869646964114,
                6.194976437139611
              ],
              [
                118.54055560050051,
                6.029752950977535
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                119.87630777997634,
                5.825036010120357
              ],
              [
                120.02599650067947,
                5.4956870995921445
              ],
              [
                120.16573192864973,
                5.488523124892166
              ],
              [
                120.25396280927322,
                5.478599622694031
              ],
              [
                120.31576090497634,
                5.462195185002669
              ],
              [
                120.38305216474197,
                5.491586149794471
              ],
              [
                120.42974405927322,
                5.536695040889501
              ],
              [
                120.4235642497029,
                5.594101374625758
              ],
              [
                120.40571146649978,
                5.616652324848395
              ],
              [
                120.30580423815417,
                5.614953264868158
              ],
              [
                120.26340395083888,
                5.601113134310531
              ],
              [
                120.19628458661697,
                5.61323557022927
              ],
              [
                120.0823014323201,
                5.809324490931509
              ],
              [
                120.02599650067947,
                5.845528635316148
              ],
              [
                119.99029093427322,
                5.841430170222599
              ],
              [
                119.9072068278279,
                5.829134595063631
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.63212502227054,
                6.268961367387263
              ],
              [
                121.65547096953617,
                6.21640318198379
              ],
              [
                121.68087685332523,
                6.1870502188037255
              ],
              [
                121.76876747832523,
                6.20002033424645
              ],
              [
                121.78593361602054,
                6.243024220739061
              ],
              [
                121.80515227798617,
                6.384884343203856
              ],
              [
                121.79347930435335,
                6.4483423370466895
              ],
              [
                121.76670012954867,
                6.474269128458508
              ],
              [
                121.65821013931429,
                6.517932291521251
              ],
              [
                121.60671172622835,
                6.4483423370466895
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                122.21318515100273,
                6.991649664610974
              ],
              [
                122.26262362756523,
                7.007324810979945
              ],
              [
                122.29008944787773,
                7.008006327134514
              ],
              [
                122.29146273889336,
                6.982108013593895
              ],
              [
                122.29146273889336,
                6.969158318851297
              ],
              [
                122.27635653772148,
                6.9514371042890355
              ],
              [
                122.24683078088555,
                6.937804945932349
              ],
              [
                122.21936496057305,
                6.915992671937195
              ],
              [
                122.18777926721367,
                6.885999151139994
              ],
              [
                122.17198642053398,
                6.853958523140873
              ],
              [
                122.2221115426043,
                6.872365105240043
              ],
              [
                122.30176242151055,
                6.915992671937195
              ],
              [
                122.31755526819023,
                6.958934622876097
              ],
              [
                122.33472140588555,
                6.965750444954028
              ],
              [
                122.33609469690117,
                7.010050869618919
              ],
              [
                122.29970248498711,
                7.19742883323723
              ],
              [
                122.2770431832293,
                7.148377270445079
              ],
              [
                122.28322299279961,
                7.129981574558643
              ],
              [
                122.27841647424492,
                7.110222411637605
              ],
              [
                122.26468356408867,
                7.093187968170702
              ],
              [
                122.24889071740898,
                7.08296699948823
              ],
              [
                122.23378451623711,
                7.074108643356408
              ],
              [
                122.2221115426043,
                7.066612978483938
              ],
              [
                122.22417147912773,
                7.050939831987068
              ],
              [
                122.22348483361992,
                7.037992050060564
              ],
              [
                122.21455844201836,
                7.022317936044594
              ],
              [
                122.20631869592461,
                7.009369356454109
              ],
              [
                122.19807894983086,
                6.988241954461142
              ],
              [
                122.19945224084648,
                6.970521461473318
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                123.05704364291432,
                7.587239270501072
              ],
              [
                123.06768664828542,
                7.609019003578861
              ],
              [
                123.06562671176198,
                7.617526411603417
              ],
              [
                123.0831361722112,
                7.616845825175894
              ],
              [
                123.08691272250417,
                7.606636899083615
              ],
              [
                123.0996156643987,
                7.612081689917608
              ],
              [
                123.12364825717214,
                7.609699602433356
              ],
              [
                123.13188800326589,
                7.605956295369768
              ],
              [
                123.13532123080495,
                7.595406799810969
              ],
              [
                123.14424762240651,
                7.582134485916597
              ],
              [
                123.16313037387135,
                7.586218318429393
              ],
              [
                123.1765199612737,
                7.581453843396902
              ],
              [
                123.18510303012135,
                7.597108348881506
              ],
              [
                123.1713701199651,
                7.604935387774837
              ],
              [
                123.16244372836354,
                7.618206996949765
              ],
              [
                123.15866717807057,
                7.631137912977714
              ],
              [
                123.1493974637151,
                7.6372629472992015
              ],
              [
                123.13875445834401,
                7.63828377781868
              ],
              [
                123.12948474398854,
                7.649512752478462
              ],
              [
                123.12227496615651,
                7.666185533106127
              ],
              [
                123.10888537875417,
                7.665505024221698
              ],
              [
                123.09515246859792,
                7.688641715396135
              ],
              [
                123.0834794949651,
                7.6600609139918285
              ],
              [
                123.06871661654714,
                7.642707348546529
              ],
              [
                123.05292376986745,
                7.610720498689863
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                123.76779301411864,
                13.189314535077846
              ],
              [
                123.7653897548413,
                13.170260607891635
              ],
              [
                123.76916630513426,
                13.157557165840029
              ],
              [
                123.77877934224364,
                13.1435157533185
              ],
              [
                123.78907902486083,
                13.128804840236214
              ],
              [
                123.79216892964598,
                13.115430518352051
              ],
              [
                123.79251225239989,
                13.109411836142826
              ],
              [
                123.78907902486083,
                13.10272423878052
              ],
              [
                123.79422886616942,
                13.10205546904988
              ],
              [
                123.7931988979077,
                13.098042812515763
              ],
              [
                123.78667576558348,
                13.09135490633039
              ],
              [
                123.78083927876708,
                13.083997999846144
              ],
              [
                123.7767194057202,
                13.076640873808087
              ],
              [
                123.79388554341551,
                13.067945805586147
              ],
              [
                123.8038419032788,
                13.069617957884297
              ],
              [
                123.81208164937254,
                13.079316217763068
              ],
              [
                123.82306797749754,
                13.081991532695785
              ],
              [
                123.82718785054442,
                13.10205546904988
              ],
              [
                123.82718785054442,
                13.1090774605912
              ],
              [
                123.83474095113036,
                13.121114694074206
              ],
              [
                123.84744389302489,
                13.125126974272051
              ],
              [
                123.84916050679442,
                13.15287678433469
              ],
              [
                123.8649533534741,
                13.154548359416003
              ],
              [
                123.88589604146239,
                13.153545415734825
              ],
              [
                123.87216313130614,
                13.17986656295039
              ],
              [
                123.81997807271239,
                13.189226204787545
              ],
              [
                123.80830509907958,
                13.178863722940934
              ],
              [
                123.80315525777098,
                13.166160727166428
              ],
              [
                123.80212528950926,
                13.15880606001598
              ],
              [
                123.79972203023192,
                13.154125702356405
              ],
              [
                123.79457218892333,
                13.15613158086768
              ],
              [
                123.79731877095458,
                13.17786087882136
              ],
              [
                123.8041852260327,
                13.18722059740573
              ],
              [
                123.80899174458739,
                13.196914213984135
              ],
              [
                123.80178196675536,
                13.213960675687648
              ],
              [
                123.7767194057202,
                13.213292209416633
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                122.01856272779355,
                14.37935922758125
              ],
              [
                121.98354380689511,
                14.389336026087257
              ],
              [
                121.96569102369199,
                14.305517094346406
              ],
              [
                121.9773639973248,
                14.26293040918897
              ],
              [
                122.01375620923886,
                14.271581481683958
              ],
              [
                121.98972361646543,
                14.323480932963168
              ],
              [
                122.06937449537168,
                14.348760936059385
              ],
              [
                122.20395701490293,
                14.338782328022083
              ],
              [
                122.42643015943418,
                14.562196141951658
              ],
              [
                122.43604319654355,
                14.63794605084707
              ],
              [
                122.3399128254498,
                14.647911200139216
              ],
              [
                122.11606638990293,
                14.643260853491004
              ],
              [
                121.94646494947324,
                14.60472561856425
              ],
              [
                121.8729938801373,
                14.561531553740252
              ],
              [
                121.91899912916074,
                14.407958190630932
              ],
              [
                121.9773639973248,
                14.411948452242383
              ],
              [
                122.00139659009824,
                14.465145109511667
              ],
              [
                122.14490550123105,
                14.46846947808605
              ],
              [
                122.0872272785748,
                14.438548370480552
              ],
              [
                122.0542682941998,
                14.370047147120022
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                122.02590581836569,
                14.630778844957774
              ],
              [
                122.05886480274069,
                14.644066044228845
              ],
              [
                122.2792780107485,
                14.650709341986008
              ],
              [
                122.28408452930319,
                14.67329504766587
              ],
              [
                122.26056692066061,
                14.700859734942311
              ],
              [
                122.24288579883444,
                14.705342819160107
              ],
              [
                122.22932455005514,
                14.699033266837414
              ],
              [
                122.19997045459615,
                14.690232797367555
              ],
              [
                122.17919942798483,
                14.690564896990544
              ],
              [
                122.15465185108053,
                14.697040738757845
              ],
              [
                122.14915868701803,
                14.705010742004351
              ],
              [
                122.14109060230123,
                14.734563629646447
              ],
              [
                122.1174013322817,
                14.737219872753613
              ],
              [
                122.09851858081686,
                14.753820658096789
              ],
              [
                122.08306905689108,
                14.77971535363552
              ],
              [
                122.07139608325826,
                14.780711241841194
              ],
              [
                122.07654592456686,
                14.766104423896833
              ],
              [
                122.07002279224264,
                14.719621658878786
              ],
              [
                122.04530355396139,
                14.661172127594423
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                122.27118746403278,
                14.83494171625902
              ],
              [
                122.28938356998981,
                14.817683324127751
              ],
              [
                122.299683252607,
                14.797768085849581
              ],
              [
                122.30277315739215,
                14.773203440186176
              ],
              [
                122.28766695622028,
                14.740999630961177
              ],
              [
                122.26054445866168,
                14.708126914268632
              ],
              [
                122.2725607550484,
                14.692186844402125
              ],
              [
                122.2945334112984,
                14.66296036364759
              ],
              [
                122.29865328434528,
                14.709123129999046
              ],
              [
                122.34774843815387,
                14.726058101477273
              ],
              [
                122.37967745426715,
                14.738011407043809
              ],
              [
                122.40851656559528,
                14.756604133932283
              ],
              [
                122.46104494694293,
                14.764239972224084
              ],
              [
                122.48570869547054,
                14.768263238340348
              ],
              [
                122.52822534123447,
                14.76497800828757
              ],
              [
                122.63095673595092,
                14.867311627337575
              ],
              [
                122.59834107432982,
                14.93200861041792
              ],
              [
                122.5200634864392,
                14.958877020964485
              ],
              [
                122.42049988780639,
                14.984415475757674
              ],
              [
                122.32986268077514,
                14.980104002206161
              ],
              [
                122.26875123057982,
                14.97148079468586
              ],
              [
                122.22789582286498,
                14.93366725165145
              ],
              [
                122.23682221446654,
                14.874611746434484
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                123.31577646433055,
                11.48764415331979
              ],
              [
                123.3122026834684,
                11.41805239591604
              ],
              [
                123.31048606969887,
                11.366558945873079
              ],
              [
                123.31323265173012,
                11.325828776459348
              ],
              [
                123.32559227087074,
                11.305293185013513
              ],
              [
                123.33760856725746,
                11.290816391875284
              ],
              [
                123.33211540319496,
                11.270614995088332
              ],
              [
                123.26104693140616,
                11.237686485223639
              ],
              [
                123.31048540796866,
                11.19996910902745
              ],
              [
                123.3791499587499,
                11.256543324571947
              ],
              [
                123.46429400171866,
                11.287519735539398
              ],
              [
                123.48763994898428,
                11.307719942591868
              ],
              [
                123.47390703882803,
                11.340037311013479
              ],
              [
                123.48214678492178,
                11.375043668329813
              ],
              [
                123.48077349390616,
                11.401968708507752
              ],
              [
                123.64415394371542,
                11.44061136131517
              ],
              [
                123.69359242027792,
                11.52405133520508
              ],
              [
                123.72929798668417,
                11.583251784728535
              ],
              [
                123.67985951012167,
                11.583251784728535
              ],
              [
                123.60844837730917,
                11.564416634838867
              ],
              [
                123.48759876793417,
                11.56710744815848
              ],
              [
                123.42992054527792,
                11.54827121209089
              ],
              [
                123.34752308434042,
                11.507903590564108
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                123.01286048143334,
                11.031885509688378
              ],
              [
                122.89475745408959,
                10.99144531819459
              ],
              [
                122.80137366502709,
                10.975267688026637
              ],
              [
                122.81785315721459,
                10.91594214087999
              ],
              [
                122.79313391893334,
                10.824233919782316
              ],
              [
                122.75468177049584,
                10.786463538135209
              ],
              [
                122.71897620408959,
                10.748688412270045
              ],
              [
                122.74094886033959,
                10.70281226130498
              ],
              [
                122.7471286699099,
                10.619137895187405
              ],
              [
                122.7306491777224,
                10.59484103715394
              ],
              [
                122.71622962205834,
                10.542866292792032
              ],
              [
                122.74026221483177,
                10.522614014339263
              ],
              [
                122.7581149980349,
                10.50236040611746
              ],
              [
                122.73820227830834,
                10.437539952228938
              ],
              [
                122.67709082811302,
                10.405800006507144
              ],
              [
                122.64207190721459,
                10.375407670617102
              ],
              [
                122.62501308152969,
                10.334538499781598
              ],
              [
                122.60441371629531,
                10.319339244882915
              ],
              [
                122.57752068803529,
                10.321494760212284
              ],
              [
                122.53494866655092,
                10.343111109362372
              ],
              [
                122.48551018998842,
                10.389040905937133
              ],
              [
                122.45529778764467,
                10.405249812444724
              ],
              [
                122.44843133256654,
                10.460623882512547
              ],
              [
                122.46765740678529,
                10.521388927340906
              ],
              [
                122.48001702592592,
                10.583491937566622
              ],
              [
                122.54044183061342,
                10.655029810746363
              ],
              [
                122.51160271928529,
                10.655029810746363
              ],
              [
                122.41959222123842,
                10.656379420789095
              ],
              [
                122.27676995561342,
                10.618588081134618
              ],
              [
                122.20535882280092,
                10.567292361750598
              ],
              [
                122.12021477983217,
                10.510587125406728
              ],
              [
                122.06116326616029,
                10.413353950032997
              ],
              [
                121.95679314897279,
                10.36607684951638
              ],
              [
                121.88675530717592,
                10.249880010885862
              ],
              [
                122.04743035600404,
                9.772490964134391
              ],
              [
                122.33307488725404,
                9.834739865712747
              ],
              [
                122.36054070756654,
                9.910505309138854
              ],
              [
                122.45421464268912,
                9.988958210301561
              ],
              [
                122.54210526768912,
                10.007892288912794
              ],
              [
                122.6615815860485,
                10.0024826647425
              ],
              [
                122.71239335362662,
                10.041700396101119
              ],
              [
                122.76183183018912,
                10.10389807623104
              ],
              [
                122.83461625401725,
                10.102546080404549
              ],
              [
                122.83873612706412,
                10.153917919136179
              ],
              [
                122.80715043370475,
                10.187710685810442
              ],
              [
                122.81951005284537,
                10.253934109228958
              ],
              [
                122.83324296300162,
                10.36742772300805
              ],
              [
                122.80028397862662,
                10.43416785979707
              ],
              [
                122.798910687611,
                10.497638715994823
              ],
              [
                122.78380448643912,
                10.538145222525218
              ],
              [
                122.81264359776725,
                10.574596524742793
              ],
              [
                122.86208207432975,
                10.577296449177727
              ],
              [
                122.89916093175162,
                10.64613647921775
              ],
              [
                122.919760296986,
                10.709563530118224
              ],
              [
                122.9252534610485,
                10.77702453971876
              ],
              [
                122.92113358800162,
                10.820191658852341
              ],
              [
                122.92662675206412,
                10.872793180006099
              ],
              [
                122.93486649815787,
                10.913249580020308
              ],
              [
                123.0021577579235,
                10.941565784475044
              ],
              [
                123.0570893985485,
                10.97257566622338
              ],
              [
                123.12026078526725,
                10.996842000201237
              ],
              [
                123.15871293370475,
                11.026498140467108
              ],
              [
                123.14909989659537,
                11.050760031018616
              ],
              [
                123.06395585362662,
                11.112753515377237
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                125.07547876192973,
                10.987472530088375
              ],
              [
                125.17984887911723,
                11.022521489766117
              ],
              [
                125.20388147189067,
                11.085868618957246
              ],
              [
                125.17092248751567,
                11.192314758663121
              ],
              [
                125.15375634982036,
                11.232727115106494
              ],
              [
                125.13796350314067,
                11.259665542776363
              ],
              [
                125.07891198946879,
                11.23946195808376
              ],
              [
                125.03839990450786,
                11.201744813744714
              ],
              [
                125.0301601584141,
                11.163349098907252
              ],
              [
                125.03702661349223,
                11.133033104482305
              ],
              [
                125.04389306857036,
                11.085868618957246
              ],
              [
                125.05007287814067,
                11.039370465537
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                124.8564681097281,
                11.722059486057221
              ],
              [
                124.88290396177888,
                11.713319119072427
              ],
              [
                124.89251699888825,
                11.699871860887425
              ],
              [
                124.90247335875154,
                11.707604114252549
              ],
              [
                124.91208639586091,
                11.698863290165992
              ],
              [
                124.91105642759919,
                11.687768769662087
              ],
              [
                124.90178671324372,
                11.67230293902824
              ],
              [
                124.89560690367341,
                11.644395019795542
              ],
              [
                124.88771048033357,
                11.62556399713061
              ],
              [
                124.89972677672029,
                11.616148008152463
              ],
              [
                124.92375936949372,
                11.611776190837647
              ],
              [
                124.92753591978669,
                11.60841320779602
              ],
              [
                124.92581930601716,
                11.591934004962065
              ],
              [
                124.94538870298982,
                11.589243430503991
              ],
              [
                124.94882193052888,
                11.600341883076558
              ],
              [
                124.96495809996247,
                11.608749507925072
              ],
              [
                124.97869101011872,
                11.623882593868675
              ],
              [
                124.96221151793122,
                11.660871118512489
              ],
              [
                124.96598806822419,
                11.676337586735348
              ],
              [
                124.97972097838044,
                11.69146699256423
              ],
              [
                125.00306692564607,
                11.708612653100447
              ],
              [
                125.01302328550935,
                11.727774191828791
              ],
              [
                125.02194967711091,
                11.737858678039933
              ],
              [
                125.03156271422029,
                11.748278926360676
              ],
              [
                125.02641287291169,
                11.756009823685371
              ],
              [
                125.01199331724763,
                11.769118240347499
              ],
              [
                124.98349752867341,
                11.76777381610059
              ],
              [
                124.94744863951325,
                11.749959574673115
              ],
              [
                124.91517630064607,
                11.737186390429143
              ],
              [
                124.89389028990388,
                11.727101879643078
              ],
              [
                124.8784407659781,
                11.730127271581255
              ],
              [
                124.86436453306794,
                11.736850246009132
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                124.86478037914179,
                11.738963026200764
              ],
              [
                124.85173411449335,
                11.760475277616244
              ],
              [
                124.82804484447382,
                11.77526397528249
              ],
              [
                124.81637187084101,
                11.792404424617263
              ],
              [
                124.78547282298945,
                11.784674550487326
              ],
              [
                124.77276988109492,
                11.770222463148524
              ],
              [
                124.7581711174746,
                11.748632716369276
              ],
              [
                124.76435092704492,
                11.73451488402769
              ],
              [
                124.78220371024804,
                11.730481084882213
              ],
              [
                124.7852936150332,
                11.72207714728345
              ],
              [
                124.7798004509707,
                11.713672953910075
              ],
              [
                124.78701022880273,
                11.70157046645619
              ],
              [
                124.78769687431054,
                11.69182085535599
              ],
              [
                124.78907016532617,
                11.679381197938138
              ],
              [
                124.79456332938867,
                11.666940982197689
              ],
              [
                124.80074313895898,
                11.66122502035724
              ],
              [
                124.8131027580996,
                11.655508940826204
              ],
              [
                124.81013502222709,
                11.642357370533496
              ],
              [
                124.80206693751029,
                11.637313434623305
              ],
              [
                124.79880537134818,
                11.631596863373975
              ],
              [
                124.79932035547904,
                11.615455322735244
              ],
              [
                124.80687345606498,
                11.612260531964825
              ],
              [
                124.81425489527396,
                11.609402003929606
              ],
              [
                124.82112135035209,
                11.609906452182665
              ],
              [
                124.82592786890677,
                11.60973830286637
              ],
              [
                124.83227933985404,
                11.60704790001823
              ],
              [
                124.83760084253959,
                11.606879748978596
              ],
              [
                124.84275068384818,
                11.606711597837592
              ],
              [
                124.85356535059623,
                11.59998546909797
              ],
              [
                124.84721387964896,
                11.584682922536723
              ],
              [
                124.84172071558646,
                11.576610912031876
              ],
              [
                124.8492738161724,
                11.567193272019713
              ],
              [
                124.86506666285209,
                11.555084412193189
              ],
              [
                124.87055982691459,
                11.560466192299497
              ],
              [
                124.87536634546927,
                11.575265554294829
              ],
              [
                124.8767396364849,
                11.592082060720637
              ],
              [
                124.8822328005474,
                11.609570153448681
              ],
              [
                124.89253248316459,
                11.616968631899397
              ],
              [
                124.88017286402396,
                11.619658939012956
              ],
              [
                124.86712659937552,
                11.616968631899397
              ],
              [
                124.8547669802349,
                11.616968631899397
              ],
              [
                124.8492738161724,
                11.624366913955404
              ],
              [
                124.83966077906302,
                11.623694350977992
              ],
              [
                124.8273011599224,
                11.62907480931825
              ],
              [
                124.82524122339896,
                11.638490361183456
              ],
              [
                124.83073438746146,
                11.641852981058804
              ],
              [
                124.82867445093802,
                11.65194059668351
              ],
              [
                124.82798780543021,
                11.665390181099209
              ],
              [
                124.81974805933646,
                11.67480450241501
              ],
              [
                124.81288160425834,
                11.68825297835892
              ],
              [
                124.8218079958599,
                11.69833890682455
              ],
              [
                124.81974805933646,
                11.707752108397846
              ],
              [
                124.82524122339896,
                11.715147970538405
              ],
              [
                124.83622755152396,
                11.705735020745362
              ],
              [
                124.8382874880474,
                11.696994137595714
              ],
              [
                124.84652723414115,
                11.694304579534933
              ],
              [
                124.8602601442974,
                11.699011288988268
              ],
              [
                124.86643995386771,
                11.707752108397846
              ],
              [
                124.8657533083599,
                11.715820311827592
              ],
              [
                124.85270704371146,
                11.72052665503525
              ],
              [
                124.85957349878959,
                11.73330061080478
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                124.8189701232094,
                11.789984900775265
              ],
              [
                124.83047143546526,
                11.775701141431894
              ],
              [
                124.83459130851213,
                11.778557952717978
              ],
              [
                124.85004083243791,
                11.776541383128297
              ],
              [
                124.85398904410783,
                11.773516500999806
              ],
              [
                124.85072747794572,
                11.770659637315148
              ],
              [
                124.83338967887346,
                11.772676250056598
              ],
              [
                124.8522724303383,
                11.76074440958945
              ],
              [
                124.85931054679338,
                11.75166914227419
              ],
              [
                124.860683837809,
                11.755870692108989
              ],
              [
                124.86411706534807,
                11.75738323435467
              ],
              [
                124.87115518180315,
                11.752509457369518
              ],
              [
                124.87699166861955,
                11.748475921531236
              ],
              [
                124.87956658927385,
                11.741417091723049
              ],
              [
                124.8793949278969,
                11.73116465988443
              ],
              [
                124.8958744200844,
                11.728811588977816
              ],
              [
                124.8987926634926,
                11.735030375664588
              ],
              [
                124.89347116080705,
                11.74696333036556
              ],
              [
                124.88128320304338,
                11.75133301551818
              ],
              [
                124.88008157340471,
                11.766962475544098
              ],
              [
                124.8764766844887,
                11.773852600657962
              ],
              [
                124.87544671622697,
                11.77956623196314
              ],
              [
                124.87252847281877,
                11.78124668914892
              ],
              [
                124.86720697013322,
                11.7799023242226
              ],
              [
                124.86188546744768,
                11.784271486177614
              ],
              [
                124.85931054679338,
                11.7856158297196
              ],
              [
                124.85656396476213,
                11.789480780740435
              ],
              [
                124.85604898063127,
                11.793513715094061
              ],
              [
                124.86257211295549,
                11.792001371656038
              ],
              [
                124.86240045157854,
                11.79620230507037
              ],
              [
                124.85931054679338,
                11.801579405974792
              ],
              [
                124.85347405997697,
                11.802755632744594
              ],
              [
                124.8545040282387,
                11.805948222826734
              ],
              [
                124.85416070548479,
                11.810148942599023
              ],
              [
                124.8464359435219,
                11.811997238899234
              ],
              [
                124.84317437735979,
                11.811325132596307
              ],
              [
                124.84248773185197,
                11.806956401443902
              ],
              [
                124.84231607047502,
                11.801579405974792
              ],
              [
                124.83939782706682,
                11.796538376964955
              ],
              [
                124.83562127677385,
                11.792673525324076
              ],
              [
                124.83218804923479,
                11.793177639494765
              ],
              [
                124.81725350943987,
                11.79233744869583
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    srsbrsToRs = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                120.31021931829768,
                17.54995771662333
              ],
              [
                120.40008404739308,
                17.113237206157073
              ],
              [
                121.28388264837582,
                18.60218308836873
              ],
              [
                121.05591633978207,
                18.75829668529367
              ],
              [
                120.47226765814145,
                18.589167139380713
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                119.88254925256854,
                16.459850346550873
              ],
              [
                119.93198772913104,
                16.395306057027767
              ],
              [
                119.97730633264666,
                16.32151495465874
              ],
              [
                120.09403606897479,
                16.022113473505808
              ],
              [
                120.51288982874041,
                16.142192310652874
              ],
              [
                120.35770794397479,
                16.888717167294146
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                119.74715248840283,
                16.346611342683403
              ],
              [
                119.72189998516637,
                15.369057054270755
              ],
              [
                120.05288196234434,
                15.259145534684263
              ],
              [
                119.91366402404736,
                16.343975768931607
              ],
              [
                119.9153806378169,
                16.41183044935311
              ],
              [
                119.7509290386958,
                16.40952509563834
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                119.95461736117022,
                14.775247931649966
              ],
              [
                120.1784637967171,
                14.626474473035968
              ],
              [
                120.38922229135912,
                14.432459544309005
              ],
              [
                120.49955328943408,
                14.381947246136383
              ],
              [
                120.33043065565835,
                14.778114661908932
              ],
              [
                120.12169042128335,
                15.190684372918094
              ],
              [
                119.97337499159585,
                15.213213388724977
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                116.93425618243208,
                7.657447980667703
              ],
              [
                120.14226399493208,
                10.542708643993484
              ],
              [
                119.95549641680708,
                10.742459422909192
              ],
              [
                119.49132405352583,
                11.058011273144086
              ],
              [
                119.47209797930708,
                11.16312028370306
              ],
              [
                119.75258850736986,
                11.434300638444796
              ],
              [
                119.86519837065111,
                11.477370475255052
              ],
              [
                119.96407532377611,
                11.679172339317711
              ],
              [
                119.93386292143236,
                12.025926770741984
              ],
              [
                120.31563782377611,
                12.050102418940815
              ],
              [
                121.11763977690111,
                12.163768917470344
              ],
              [
                121.09292053861986,
                12.225514879791868
              ],
              [
                121.14785217924486,
                12.279195306466171
              ],
              [
                120.93653979828048,
                13.490515174309639
              ],
              [
                121.01893725921798,
                13.533244145246849
              ],
              [
                120.40880565229224,
                13.63819627041027
              ],
              [
                120.23165111127662,
                13.72626141332304
              ],
              [
                120.22203807416724,
                13.787620616153323
              ],
              [
                120.31130199018287,
                13.808959172145054
              ],
              [
                120.65929252614148,
                13.769456871171313
              ],
              [
                120.70443762968057,
                14.28118941499773
              ],
              [
                120.61517371366494,
                14.36380007368747
              ],
              [
                120.62307013700479,
                14.370451785117988
              ],
              [
                120.62101020048135,
                14.385749970454361
              ],
              [
                120.60659064481729,
                14.39007318083516
              ],
              [
                120.5794681472587,
                14.388410417515045
              ],
              [
                120.57088507841104,
                14.39672411029593
              ],
              [
                119.54751619992851,
                13.62681952179578
              ],
              [
                116.44073603463136,
                7.590864841331449
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                116.9515509089249,
                7.299151360929619
              ],
              [
                116.99412293040928,
                7.3195833285120075
              ],
              [
                117.01609558665928,
                7.28008068241558
              ],
              [
                117.08064026439365,
                7.270545038926871
              ],
              [
                117.25642151439365,
                7.329117926598752
              ],
              [
                117.25092835033115,
                7.198340043744037
              ],
              [
                117.29899353587803,
                7.021185009391198
              ],
              [
                117.23856873119053,
                6.935308573846054
              ],
              [
                117.21659607494053,
                6.734869655228161
              ],
              [
                117.52970642650303,
                6.541169700596623
              ],
              [
                117.87597566484143,
                5.962539705120017
              ],
              [
                118.21080639063578,
                5.839794430348939
              ],
              [
                118.59531052886234,
                6.105120145836746
              ],
              [
                118.03782410228428,
                6.809873637061212
              ],
              [
                118.45216383103056,
                6.812855065678709
              ],
              [
                118.55896137483194,
                6.9465916703750965
              ],
              [
                118.62991066832717,
                7.2058053586433655
              ],
              [
                117.47477478587803,
                7.454410723481106
              ],
              [
                116.95429749095615,
                7.438070204636033
              ],
              [
                116.77302307689365,
                7.228313330360975
              ],
              [
                116.57698191851638,
                6.832355710124283
              ],
              [
                116.68632082913166,
                6.842934275699811
              ],
              [
                116.74075204017296,
                6.97075338164562
              ],
              [
                116.85954041087803,
                7.201064969942674
              ],
              [
                116.91035217845615,
                7.261009192963452
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                117.99913047135288,
                4.336886841901806
              ],
              [
                118.13645957291538,
                4.041048746038615
              ],
              [
                118.60063193619663,
                4.191721018618158
              ],
              [
                118.53746054947788,
                4.394397713247938
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                118.10766937501586,
                1.8138866716444608
              ],
              [
                117.09692718751586,
                0.15525400465328107
              ],
              [
                117.65722992189086,
                -0.20729418124369176
              ],
              [
                119.48096039064086,
                1.0560732979508427
              ],
              [
                118.24225189454711,
                1.8652060890615474
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                119.61497935215237,
                5.934604391386921
              ],
              [
                118.44493540683987,
                4.892839032393803
              ],
              [
                119.74689023390641,
                5.0394795251190745
              ],
              [
                120.14239804640641,
                5.2692593169819535
              ],
              [
                120.69995419875016,
                5.014855375507677
              ],
              [
                121.26232160801779,
                5.81425693165041
              ],
              [
                121.15637994069765,
                5.831281582381733
              ],
              [
                121.07239771940385,
                5.89200732613012
              ],
              [
                121.16015420664426,
                5.972424650805979
              ],
              [
                121.29744335502949,
                5.925192532063004
              ],
              [
                121.28917612637578,
                5.830502491785908
              ],
              [
                121.76983894660312,
                6.014378929343616
              ],
              [
                121.72589363410312,
                6.131819109190686
              ],
              [
                122.10217537238437,
                6.069005453915267
              ],
              [
                122.41528572394687,
                6.653152766021788
              ],
              [
                121.51989998175937,
                6.961328255691352
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                122.3251645996367,
                7.452863164434046
              ],
              [
                122.33409099123826,
                7.317354244423909
              ],
              [
                122.29100169824322,
                7.302711391895148
              ],
              [
                122.25821773690193,
                7.250605431045418
              ],
              [
                122.2435396266486,
                7.209394118309248
              ],
              [
                122.24534201630173,
                7.179763330118921
              ],
              [
                122.2953749741956,
                7.169545136293772
              ],
              [
                122.36773662112107,
                7.260142100218319
              ],
              [
                122.49476604006638,
                7.463075715274856
              ],
              [
                122.39039592287888,
                7.530472555579609
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                122.20923350111165,
                7.101678872954564
              ],
              [
                122.17936442152181,
                6.992986339700808
              ],
              [
                122.18554425425715,
                6.985148761002882
              ],
              [
                122.20477030531087,
                6.991282492606716
              ],
              [
                122.28922770277181,
                7.1153062265250755
              ],
              [
                122.24081919447103,
                7.125526476242081
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                122.2719687176281,
                6.9885331392948835
              ],
              [
                122.19231783872185,
                6.927190157919906
              ],
              [
                122.15249239926872,
                6.8849270130685
              ],
              [
                121.88676058774529,
                7.068948397234378
              ],
              [
                121.86204134946404,
                6.910149021646773
              ],
              [
                122.29463554639152,
                6.6998918745406755
              ],
              [
                122.44569755811027,
                6.719668206375086
              ],
              [
                122.37093755308759,
                7.025305909005218
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                123.43910690671004,
                6.199697758474248
              ],
              [
                124.71352096921004,
                5.937503726779758
              ],
              [
                124.07356735592879,
                7.181720977921516
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                124.86248617210917,
                5.536107436259905
              ],
              [
                125.4845870021873,
                5.221641750232794
              ],
              [
                125.64800863304667,
                5.6413481864344
              ],
              [
                124.99706869164042,
                5.909146768657725
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                123.48551206402324,
                7.849588192837534
              ],
              [
                123.49237851910136,
                7.74890472690195
              ],
              [
                123.44524312934921,
                7.644824310159804
              ],
              [
                124.19001035503886,
                7.1374957386451054
              ],
              [
                124.39325742535136,
                7.490283565682188
              ],
              [
                123.55554990582011,
                7.910802720685812
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                123.01782897115571,
                7.58699436537998
              ],
              [
                122.98624327779633,
                7.467186135335718
              ],
              [
                122.92856505514008,
                7.386841738483603
              ],
              [
                122.84342101217133,
                7.332362641863596
              ],
              [
                122.83380797506196,
                7.3909274006401215
              ],
              [
                122.82556822896821,
                7.478079157593512
              ],
              [
                122.79947569967133,
                7.520287047766556
              ],
              [
                122.77612975240571,
                7.584271819588247
              ],
              [
                122.79534913225332,
                7.594133158687674
              ],
              [
                122.8434224384458,
                7.771408771165617
              ],
              [
                122.5701214140793,
                7.823450219218396
              ],
              [
                122.42526058614484,
                7.6201647052650205
              ],
              [
                122.68137267232758,
                7.610135308281888
              ],
              [
                122.67038634420258,
                7.212485231800251
              ],
              [
                123.51358702779633,
                7.272427937752246
              ],
              [
                123.49710753560883,
                7.552961306428458
              ],
              [
                123.38037779928071,
                7.528455843466093
              ],
              [
                123.29386046529633,
                7.471271050513589
              ],
              [
                123.18674376607758,
                7.486248745915773
              ],
              [
                123.11395934224946,
                7.547515767928793
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.79157625364559,
                7.140443910664034
              ],
              [
                121.97559724973934,
                7.115915726904266
              ],
              [
                122.70618807005184,
                8.038866089884044
              ],
              [
                123.45875154661434,
                8.55253671612296
              ],
              [
                123.48076184002721,
                8.674832266308853
              ],
              [
                123.52196057049596,
                8.720987174941005
              ],
              [
                122.24494340525024,
                8.948355034522224
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.79418848144994,
                12.205243830530875
              ],
              [
                121.75573633301244,
                11.747206394938713
              ],
              [
                121.99468896973119,
                11.66114319777422
              ],
              [
                121.69256494629369,
                9.47428776395566
              ],
              [
                123.01996198997632,
                9.012870230317857
              ],
              [
                122.87796495400765,
                10.494842864641162
              ],
              [
                122.69119737588265,
                10.567751403604404
              ],
              [
                122.59094713174203,
                10.61939741499017
              ],
              [
                122.53876207314828,
                10.715216063295745
              ],
              [
                122.15039559466629,
                11.705877635651948
              ],
              [
                121.96416729052544,
                11.894635781873028
              ],
              [
                121.96566939580312,
                11.95306922794989
              ],
              [
                121.93763716363748,
                12.06927009859048
              ],
              [
                121.98020918512185,
                12.173998509803363
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                125.47334549264231,
                7.008284254367843
              ],
              [
                125.35833822887956,
                6.804120350349449
              ],
              [
                125.36540901025873,
                6.703562997660634
              ],
              [
                125.4292670424853,
                6.62376820506673
              ],
              [
                125.4867080142791,
                6.567389502155545
              ],
              [
                125.54335873627235,
                6.523390960677798
              ],
              [
                125.57940515783379,
                6.514179764576618
              ],
              [
                125.57665857580254,
                6.544878381703687
              ],
              [
                125.60240778234551,
                6.509404255103105
              ],
              [
                125.57562860754082,
                6.483479269190044
              ],
              [
                125.59691461828301,
                5.8974009991879965
              ],
              [
                125.67107233312676,
                5.840025082094636
              ],
              [
                126.26570734289238,
                6.218659033878846
              ],
              [
                126.33986505773613,
                6.674436786911696
              ],
              [
                126.2522780816159,
                6.7764930002286174
              ],
              [
                126.12717553275375,
                6.828601333290527
              ],
              [
                125.94285239254003,
                7.127723725294929
              ],
              [
                125.77531088863378,
                7.115459457069345
              ],
              [
                125.76020468746191,
                6.9110071655956204
              ],
              [
                125.70389975582128,
                6.916460386205022
              ],
              [
                125.60364951168066,
                7.08002750996343
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                126.4294033365587,
                8.256106750419695
              ],
              [
                126.43008998206652,
                8.220090064097322
              ],
              [
                126.34157093626573,
                7.865122292972118
              ],
              [
                126.27290561649393,
                6.923093336982293
              ],
              [
                126.31376102420877,
                6.844016605378339
              ],
              [
                126.30826786014627,
                6.7908369447712955
              ],
              [
                126.6009444861827,
                6.760632367025417
              ],
              [
                126.63571693505368,
                7.524007633437369
              ],
              [
                126.61008110200682,
                8.325503092868503
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                126.00345029637411,
                10.131617958118397
              ],
              [
                126.00922168927279,
                10.798263592209922
              ],
              [
                125.56951605298723,
                10.887125928673766
              ],
              [
                125.64090146824911,
                10.222180838089091
              ],
              [
                125.62371934203877,
                9.873622364362863
              ],
              [
                125.94714019374274,
                9.876652552223618
              ],
              [
                126.03915586278036,
                9.720387608827906
              ],
              [
                125.98010434910849,
                9.705497949305766
              ],
              [
                125.94439878270224,
                9.579586291939304
              ],
              [
                125.83254165388647,
                9.504312694207657
              ],
              [
                126.15188050444821,
                8.284497997354165
              ],
              [
                126.36817383940915,
                8.482855816143674
              ],
              [
                126.4093725698779,
                8.454331145565066
              ],
              [
                126.30040234714671,
                10.022361512783082
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                125.23922489625434,
                11.134494760491874
              ],
              [
                125.01263187867622,
                11.064419414169762
              ],
              [
                125.15408085328559,
                10.334390663591678
              ],
              [
                125.53722904664497,
                10.410038253626539
              ],
              [
                125.50701664430122,
                11.133498796153608
              ],
              [
                125.26531742555122,
                11.155057126867762
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                125.55737175291449,
                11.304454503311648
              ],
              [
                125.63427604978949,
                11.194008130701725
              ],
              [
                125.81692375486762,
                10.959507195143226
              ],
              [
                125.86498894041449,
                10.871858347709566
              ],
              [
                125.95837272947699,
                10.929844327475827
              ],
              [
                125.55874504393012,
                11.604598454469233
              ],
              [
                125.41729606932074,
                11.569620551540538
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                125.73017572750312,
                12.048987982672232
              ],
              [
                125.19689723219437,
                12.631606171899888
              ],
              [
                125.12205287184281,
                12.609494353969033
              ],
              [
                125.14539881910844,
                12.568615969789098
              ],
              [
                125.28204127516312,
                12.43521350705622
              ],
              [
                125.31615801790042,
                12.406895794779615
              ],
              [
                125.3127231765436,
                12.348554092311506
              ],
              [
                125.33263589627016,
                12.313672262872693
              ],
              [
                125.3676548171686,
                12.296229608825351
              ],
              [
                125.42670633084047,
                12.298242281856666
              ],
              [
                125.5324497390436,
                12.180139471941018
              ],
              [
                125.56060220486391,
                12.103612977908767
              ],
              [
                125.56472207791079,
                11.984752125952514
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                124.25319743589132,
                12.609280440245046
              ],
              [
                124.26418376401632,
                12.546284755823907
              ],
              [
                124.36512065366476,
                12.51612178580134
              ],
              [
                124.36855388120382,
                12.596548516705097
              ],
              [
                124.3726737542507,
                12.6782898380906
              ],
              [
                124.40700602964132,
                12.668241086457048
              ],
              [
                124.43790507749289,
                12.618661452667727
              ],
              [
                124.50382304624289,
                12.557008516303648
              ],
              [
                124.52716899350851,
                12.512770126924497
              ],
              [
                124.83029496519615,
                12.486038874014207
              ],
              [
                124.95769572690695,
                12.579795022556148
              ],
              [
                125.00813527480896,
                12.589940269961852
              ],
              [
                125.1472098870632,
                12.556338294366933
              ],
              [
                125.10669780210226,
                12.617321329081644
              ],
              [
                125.08609843686789,
                12.572423138703678
              ],
              [
                125.04421306089132,
                12.573763496960105
              ],
              [
                125.00095439389914,
                12.613970989421203
              ],
              [
                125.00095439389914,
                12.652162259951417
              ],
              [
                125.04421306089132,
                12.656852022373977
              ],
              [
                125.06000590757101,
                12.617991391751783
              ],
              [
                125.09502482846945,
                12.607270178586237
              ],
              [
                125.09845805600851,
                12.708433713093372
              ],
              [
                124.29370952085226,
                12.724508984742464
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                125.45894694761007,
                11.981423876146312
              ],
              [
                125.44315410093039,
                11.927683583780514
              ],
              [
                125.46238017514914,
                11.875948493758985
              ],
              [
                125.46444011167257,
                11.858477281310618
              ],
              [
                125.46100688413351,
                11.809417517493715
              ],
              [
                125.45894694761007,
                11.737492135673929
              ],
              [
                125.50083232358664,
                11.592912549096003
              ],
              [
                125.54958415464132,
                11.61107318484643
              ],
              [
                125.49396586850851,
                11.980752188404674
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                123.90758410517553,
                13.747511807024075
              ],
              [
                123.5546483141599,
                13.74617785371367
              ],
              [
                123.48461047236303,
                13.566024691412741
              ],
              [
                123.6700047594724,
                13.457867028874974
              ],
              [
                124.20421496455053,
                13.190602487538737
              ],
              [
                124.10055253167175,
                13.202635718475515
              ],
              [
                123.96734330315613,
                13.111703326972066
              ],
              [
                123.9659700121405,
                13.082276813844079
              ],
              [
                124.10068537533425,
                12.595656148749558
              ],
              [
                124.1473772698655,
                12.580242920773097
              ],
              [
                124.3490649121858,
                12.765193878507542
              ],
              [
                124.18699046867953,
                13.526157022775283
              ],
              [
                124.04327740578837,
                13.680008268266283
              ],
              [
                123.94096722512431,
                13.673670100808975
              ],
              [
                123.92277111916728,
                13.730707458189851
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                124.26076213784057,
                14.008763549997216
              ],
              [
                124.33972637123901,
                13.962123154599519
              ],
              [
                124.41388408608276,
                13.85214777555099
              ],
              [
                124.41612633433371,
                13.796889860950424
              ],
              [
                124.39209374156027,
                13.684167787457671
              ],
              [
                124.3385353919509,
                13.660816213289953
              ],
              [
                124.32342919077902,
                13.614106128463527
              ],
              [
                124.2012062903884,
                13.590080205450123
              ],
              [
                124.18831008542476,
                13.534242393185123
              ],
              [
                124.1903700219482,
                13.51154367587533
              ],
              [
                124.37061446774898,
                13.508873096405356
              ],
              [
                124.48322433103023,
                13.758442212904328
              ],
              [
                124.43035262692867,
                13.918334599461838
              ],
              [
                124.22985213864742,
                14.09954724441941
              ],
              [
                124.17080062497554,
                14.110202348848336
              ],
              [
                124.21611922849117,
                14.067911972335448
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                123.27966594242415,
                14.130541819347808
              ],
              [
                123.30575847172102,
                14.117224049831966
              ],
              [
                123.36892985843977,
                14.005324112938064
              ],
              [
                123.41493510746321,
                13.886703971170839
              ],
              [
                123.58728312992415,
                13.896702401014615
              ],
              [
                123.67036723636946,
                13.944022440242657
              ],
              [
                123.71431254886946,
                13.934026056135353
              ],
              [
                123.75619792484602,
                13.852706084700886
              ],
              [
                123.84477519535383,
                13.858706073586637
              ],
              [
                123.87636088871321,
                13.804700600742104
              ],
              [
                123.91618632816633,
                13.77802661415071
              ],
              [
                123.9745511963304,
                13.972010011183409
              ],
              [
                123.34352397465071,
                14.159838168332477
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                122.87964679896459,
                14.313042198014584
              ],
              [
                122.5170957603709,
                14.462436219191494
              ],
              [
                122.08588238146466,
                14.21629259392584
              ],
              [
                122.15866680529278,
                14.109768796972439
              ],
              [
                122.26166363146466,
                14.206973758797497
              ],
              [
                122.37290020373028,
                14.192329099817924
              ],
              [
                123.00682487002636,
                14.059276848901943
              ],
              [
                123.07686271182324,
                13.931354424898618
              ],
              [
                123.30620231143261,
                14.034630673759358
              ],
              [
                123.22243155947949,
                14.117884105851829
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.73307416984164,
                14.115814959866135
              ],
              [
                121.8127250487479,
                14.292878449139696
              ],
              [
                121.82096479484164,
                14.254282440876711
              ],
              [
                121.9555473143729,
                14.169081689723155
              ],
              [
                122.12995527335727,
                14.081184903090007
              ],
              [
                122.07227705070102,
                14.224998302847249
              ],
              [
                122.51996992179477,
                14.642599940456398
              ],
              [
                122.4389457518729,
                14.784723396286804
              ],
              [
                122.25904462882602,
                14.67581463709522
              ],
              [
                122.25080064692357,
                14.742495307876782
              ],
              [
                122.149141242479,
                14.801194451026506
              ],
              [
                122.03916083105038,
                14.828259729151517
              ],
              [
                122.01423550077705,
                14.762866627822328
              ],
              [
                121.94795236723174,
                14.6772078908995
              ],
              [
                121.8951225096854,
                14.574826368701281
              ],
              [
                121.5325736815604,
                14.646585969923407
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.80915284857463,
                14.9730496075367
              ],
              [
                121.83661866888713,
                15.057276198862079
              ],
              [
                121.93137574896525,
                15.05860233601714
              ],
              [
                121.97051454291056,
                15.053960819849776
              ],
              [
                122.01308656439494,
                15.03804628252239
              ],
              [
                122.04810548529338,
                15.005550415560824
              ],
              [
                122.05909181341838,
                14.966416183362792
              ],
              [
                122.11059022650431,
                14.89011706984593
              ],
              [
                122.14080262884806,
                14.919312973011651
              ],
              [
                122.16002870306681,
                14.949831724899292
              ],
              [
                122.16895509466838,
                14.921303458526102
              ],
              [
                122.21633363470744,
                14.876181266363824
              ],
              [
                122.2527258466215,
                14.83104963288002
              ],
              [
                122.28911805853556,
                14.800514069776503
              ],
              [
                122.28911805853556,
                14.748062528923183
              ],
              [
                122.346109635684,
                14.800514069776503
              ],
              [
                122.04673219427775,
                15.081145403633396
              ],
              [
                121.78718019232463,
                15.081808398871738
              ],
              [
                121.78512025580119,
                14.969069577673581
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.68111451907721,
                15.793288900185708
              ],
              [
                121.56301149173346,
                15.793288900185708
              ],
              [
                121.25539430423346,
                15.364690596590973
              ],
              [
                121.44216188235846,
                14.879472546897931
              ],
              [
                121.63167604251471,
                14.890090221553331
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.57399781985846,
                15.904294055409343
              ],
              [
                121.98186525149909,
                16.011904071419476
              ],
              [
                122.05876954837409,
                16.12011576870055
              ],
              [
                121.98667177005377,
                16.17617789400425
              ],
              [
                121.7573321704444,
                16.092408626287916
              ],
              [
                121.53485902591315,
                15.92806565448417
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                122.20838448052478,
                16.459203536757354
              ],
              [
                122.23859688286853,
                16.41968903750121
              ],
              [
                122.2200574541576,
                16.35710799321663
              ],
              [
                122.22623726372791,
                16.300438370888102
              ],
              [
                122.08066841607166,
                16.138906127957316
              ],
              [
                121.99364081701452,
                16.023671175028095
              ],
              [
                122.2743258747541,
                16.137427626089536
              ],
              [
                122.59647304907962,
                17.17715297895193
              ],
              [
                122.4467843283765,
                17.14434915279695
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                122.37288282289352,
                17.39632237685709
              ],
              [
                122.3721961773857,
                17.341274108535565
              ],
              [
                122.40034864320602,
                17.330786849693702
              ],
              [
                122.4326209820732,
                17.284898053036294
              ],
              [
                122.43880079164352,
                17.257359282401524
              ],
              [
                122.39760206117477,
                17.149787612531334
              ],
              [
                122.44704053773727,
                17.158316915332197
              ],
              [
                122.47931287660445,
                17.366178945584572
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                122.20823110066533,
                18.592112245289115
              ],
              [
                122.18591512166142,
                18.508136953919355
              ],
              [
                122.11175740681767,
                17.754698482639164
              ],
              [
                122.22230733357549,
                17.414000200193602
              ],
              [
                122.25354970418095,
                17.327496705400122
              ],
              [
                122.35894978963017,
                17.3235637584164
              ],
              [
                122.36959279500127,
                17.394343903863092
              ],
              [
                122.34673943835314,
                18.573539143324485
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.64750290075769,
                21.469406514969467
              ],
              [
                120.92240524450769,
                18.850129743561318
              ],
              [
                121.83427047888269,
                18.62123825327618
              ],
              [
                122.17484665075769,
                18.912500724671286
              ],
              [
                122.52640915075769,
                20.443463085880516
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                122.12107258393385,
                18.609742496533933
              ],
              [
                121.98628172276543,
                18.29299161255669
              ],
              [
                122.00585111973808,
                18.273758165162015
              ],
              [
                122.13467595687708,
                18.38218359173835
              ],
              [
                122.15561864486536,
                18.496117259453975
              ],
              [
                122.13501927963098,
                18.50783804325666
              ],
              [
                122.1254062425216,
                18.514674796542238
              ],
              [
                122.1473788987716,
                18.57424064585907
              ],
              [
                122.16248509994348,
                18.59246429256468
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                122.1588177455667,
                18.586567554939847
              ],
              [
                122.15538451802763,
                18.58233709280966
              ],
              [
                122.16036269795927,
                18.567692374646413
              ],
              [
                122.1620793117288,
                18.560044077522495
              ],
              [
                122.17718551290068,
                18.55158173231691
              ],
              [
                122.17581222188505,
                18.546048433643772
              ],
              [
                122.14971969258818,
                18.537910904039258
              ],
              [
                122.15143630635771,
                18.52944746211169
              ],
              [
                122.15727279317412,
                18.523587910679666
              ],
              [
                122.16860244405302,
                18.526192180552275
              ],
              [
                122.17907378804716,
                18.51821647881354
              ],
              [
                122.18731353414091,
                18.521146371653266
              ],
              [
                122.19812820088896,
                18.569319627666456
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    dltoDw = 
    /* color: #98ff00 */
    /* shown: false */
    ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                120.32281031400464,
                16.689737532178636
              ],
              [
                120.35027613431714,
                16.688422087962067
              ],
              [
                120.35302271634839,
                16.738402597348735
              ],
              [
                120.31731714994214,
                16.738402597348735
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                120.0528361148015,
                16.246022699668394
              ],
              [
                120.0260569399968,
                16.216684899551485
              ],
              [
                120.12768047515306,
                16.111824300322937
              ],
              [
                120.10914104644212,
                16.069930493917266
              ],
              [
                120.1249338931218,
                16.0705903073552
              ],
              [
                120.16166942778977,
                16.158325957682653
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                120.58060919426349,
                13.739206700606863
              ],
              [
                120.71038519524005,
                13.734537665288963
              ],
              [
                120.65339361809161,
                14.029836385817356
              ],
              [
                120.55863653801349,
                14.030502547457978
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    orfbrsToDl = 
    /* color: #ffc82d */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[119.90597355213856, 16.248625917082666],
          [119.94785892811512, 16.229342829859288],
          [119.96536838856434, 16.230166932073434],
          [119.99352085438466, 16.235276288780923],
          [119.96759998646473, 16.343600325930876],
          [119.9626218065331, 16.364025131455122],
          [119.962965129287, 16.371930933998655],
          [119.91524326649403, 16.39959871834349],
          [119.89601719227528, 16.387412202230195]]]),
    xtoDw = 
    /* color: #00ffff */
    /* shown: false */
    ee.Geometry({
      "type": "GeometryCollection",
      "geometries": [
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                120.19442604130933,
                14.864219472070733
              ],
              [
                120.21330879277417,
                14.858910063400803
              ],
              [
                120.21914527959058,
                14.832361062830271
              ],
              [
                120.21777198857495,
                14.80614072743317
              ],
              [
                120.20781562871167,
                14.796846682352987
              ],
              [
                120.20884559697339,
                14.783568784302961
              ],
              [
                120.23940132207105,
                14.772613907023432
              ],
              [
                120.24558113164136,
                14.776597562690823
              ],
              [
                120.24729774541089,
                14.791535620627458
              ],
              [
                120.2620606414234,
                14.808631275757145
              ],
              [
                120.27562250909908,
                14.798258331953681
              ],
              [
                120.29330299443431,
                14.791203674952769
              ],
              [
                120.30772354371572,
                14.823731869544568
              ],
              [
                120.26892707890697,
                14.826718980288673
              ],
              [
                120.2586273962898,
                14.83601174372589
              ],
              [
                120.2366547400398,
                14.845304107950685
              ],
              [
                120.24008796757886,
                14.823068142621798
              ],
              [
                120.23287818974683,
                14.824395727079068
              ],
              [
                120.22635505742261,
                14.835679866190258
              ],
              [
                120.22484605275918,
                14.858037882195823
              ],
              [
                120.22793595754433,
                14.861688129425103
              ],
              [
                120.23445908986855,
                14.880933866708009
              ],
              [
                120.20527665578652,
                14.883588316407858
              ]
            ]
          ],
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.79761884757602,
                14.044619158336689
              ],
              [
                121.96378706046664,
                13.96467087773484
              ],
              [
                121.99674604484164,
                14.007313423444057
              ],
              [
                121.77701948234164,
                14.172478321415761
              ],
              [
                121.69324873038852,
                14.188455665662799
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                124.98392084815201,
                10.364412815740403
              ],
              [
                125.00932673194107,
                10.149549179971078
              ],
              [
                125.03129938819107,
                10.081275985008803
              ],
              [
                125.0821111557692,
                9.954154751566387
              ],
              [
                125.2414129135817,
                9.914250084659514
              ],
              [
                125.23317316748795,
                9.944686288181456
              ],
              [
                125.16519526221451,
                10.042739175921138
              ],
              [
                125.12124994971451,
                10.067078748419778
              ],
              [
                125.10644794735637,
                10.18836882082437
              ],
              [
                125.07091404232708,
                10.22215793630823
              ],
              [
                125.02673349951125,
                10.323557864457753
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                123.24475562368015,
                9.479942312559414
              ],
              [
                123.26260840688327,
                9.391208741055392
              ],
              [
                123.28183448110202,
                9.36749744131965
              ],
              [
                123.31548011098484,
                9.356657450590165
              ],
              [
                123.32165992055515,
                9.310583724478738
              ],
              [
                123.27977454457859,
                9.173004077534529
              ],
              [
                123.3298996666489,
                9.130974003522669
              ],
              [
                123.48714148793796,
                9.148600123098868
              ],
              [
                123.43152320180515,
                9.192661598231194
              ],
              [
                123.34431922231296,
                9.384434249409445
              ],
              [
                123.2969406822739,
                9.412886223634494
              ],
              [
                123.2859543541489,
                9.477910501915142
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                123.62681651283509,
                9.37201409545023
              ],
              [
                123.66458201576478,
                9.24394685750743
              ],
              [
                123.68998789955384,
                9.240558199809623
              ],
              [
                123.67625498939759,
                9.279864621492106
              ],
              [
                123.7099006192804,
                9.287996435159735
              ],
              [
                123.73049998451478,
                9.26766654744761
              ],
              [
                123.76689219642884,
                9.278509300875411
              ],
              [
                123.71264720131165,
                9.363884239803918
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                123.62612986732728,
                9.060234890863246
              ],
              [
                123.66526866127259,
                9.10430728339255
              ],
              [
                123.63986277748353,
                9.113799088597291
              ],
              [
                123.60141062904603,
                9.077864498086768
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                124.21763856052084,
                11.52903704577652
              ],
              [
                124.26639039157553,
                11.442906572201826
              ],
              [
                124.29316956638021,
                11.457039155696647
              ],
              [
                124.2705102646224,
                11.536437654021356
              ],
              [
                124.2430444443099,
                11.558638307634954
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                124.3089624130599,
                11.675347870686066
              ],
              [
                124.32887513278646,
                11.688796320260732
              ],
              [
                124.34398133395834,
                11.740566747998352
              ],
              [
                124.29042298434896,
                11.765439992051581
              ],
              [
                124.2540307724349,
                11.743255855635292
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                124.30176850854225,
                11.872591441509835
              ],
              [
                124.22623750268288,
                11.800010500758162
              ],
              [
                124.25713655053444,
                11.782534437649769
              ],
              [
                124.33060761987038,
                11.838991549688734
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                123.09121247826882,
                11.865632488880472
              ],
              [
                123.189402785886,
                11.869664300713959
              ],
              [
                123.20176240502663,
                11.891838199404381
              ],
              [
                123.156443801511,
                11.893182014008813
              ],
              [
                123.11867829858132,
                11.930134311960856
              ],
              [
                123.07885285912819,
                11.942898481974797
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.85096042663656,
                12.200916930073424
              ],
              [
                121.59825948663547,
                11.968561944495194
              ],
              [
                121.79602878601156,
                11.900078779038576
              ],
              [
                121.86606662780844,
                11.883952974549437
              ],
              [
                121.93198459655844,
                12.200916930073424
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.3884712022666,
                11.96464849915306
              ],
              [
                121.39533765734473,
                11.888732532356277
              ],
              [
                121.53404004992285,
                11.888060614896737
              ],
              [
                121.53884656847754,
                11.937106224392041
              ],
              [
                121.52854688586035,
                11.957931129603615
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.26897964882762,
                9.746013527744289
              ],
              [
                121.26897964882762,
                9.716912623342951
              ],
              [
                121.29232559609325,
                9.71149822210919
              ],
              [
                121.30674515175731,
                9.691193437980298
              ],
              [
                121.30193863320262,
                9.632979587721874
              ],
              [
                121.30880508828075,
                9.637718300528203
              ],
              [
                121.33695755410106,
                9.662087771581426
              ],
              [
                121.41454849648387,
                9.655318650882089
              ],
              [
                121.41866836953075,
                9.773758537689806
              ],
              [
                121.31841812539012,
                9.70608373330935
              ],
              [
                121.30193863320262,
                9.714882233144923
              ],
              [
                121.278592685937,
                9.748043728754784
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.15885695134021,
                9.443574390135293
              ],
              [
                121.26872023259021,
                9.453734338107813
              ],
              [
                121.24331434880115,
                9.546514608819855
              ],
              [
                121.16572340641834,
                9.528231437104248
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                120.66715935769858,
                9.282915596023004
              ],
              [
                120.70217827859702,
                9.23310456062983
              ],
              [
                120.76431969705405,
                9.259196935736016
              ],
              [
                120.77427605691733,
                9.258519236186787
              ],
              [
                120.77324608865561,
                9.302905792106907
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.38377204906011,
                10.023035663373918
              ],
              [
                121.46616950999761,
                9.99869278041734
              ],
              [
                121.48951545726324,
                10.08929312767184
              ],
              [
                121.40299812327886,
                10.096053328453921
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                120.86120628662108,
                9.207582885056532
              ],
              [
                120.86704277343749,
                9.257228106300131
              ],
              [
                120.77640556640624,
                9.246723557687316
              ],
              [
                120.74790977783202,
                9.223510782412646
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                118.0947859125444,
                4.09298745283065
              ],
              [
                118.67568801215377,
                4.0135358051813235
              ],
              [
                118.74160598090377,
                4.121067623003839
              ],
              [
                118.63036940863815,
                4.147092261382397
              ],
              [
                118.64135573676315,
                4.10052125396612
              ],
              [
                118.62418959906783,
                4.095042132903167
              ],
              [
                118.6001570062944,
                4.150516492216079
              ],
              [
                118.28053318055488,
                4.169704354803465
              ],
              [
                118.30283950141158,
                4.251866946871601
              ],
              [
                118.19623537357302,
                4.240231771873028
              ],
              [
                118.14044531569529,
                4.229957642221888
              ],
              [
                118.15246413520065,
                4.1998237635703735
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                123.35267601792215,
                7.320128141449571
              ],
              [
                123.40348778550027,
                7.350433798497395
              ],
              [
                123.37911186997293,
                7.368820493206467
              ],
              [
                123.37499199692606,
                7.395037237681292
              ],
              [
                123.33619652573465,
                7.400825140482979
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                123.29431114975809,
                7.401846527213191
              ],
              [
                123.32589684311746,
                7.403548833173658
              ],
              [
                123.3173137742698,
                7.435891396066378
              ],
              [
                123.3059841233909,
                7.443380913337141
              ],
              [
                123.26890526596902,
                7.447125624017056
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                125.17973678739477,
                6.099780614688473
              ],
              [
                125.18214004667212,
                6.1107046307241575
              ],
              [
                125.16600387723852,
                6.119238863126948
              ],
              [
                125.14437454374243,
                6.071786808571074
              ],
              [
                125.15776413114477,
                6.060179193586395
              ],
              [
                125.14952438505102,
                6.0017959423324445
              ],
              [
                125.05699974063428,
                5.798945504154885
              ],
              [
                125.26110428007055,
                5.985406534310387
              ],
              [
                125.26625412137915,
                6.051302613642888
              ],
              [
                125.27243393094946,
                6.064617428821915
              ],
              [
                125.25561111600805,
                6.085442505920053
              ],
              [
                125.19381302030493,
                6.090563303012045
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                125.51752708138548,
                7.044751588493633
              ],
              [
                125.51615379036986,
                6.931615203811153
              ],
              [
                125.75235984505736,
                6.792542968394817
              ],
              [
                125.79218528451048,
                6.878445326083571
              ],
              [
                125.69330833138548,
                6.882535528593751
              ],
              [
                125.64249656380736,
                6.928888688935325
              ],
              [
                125.6232704895886,
                7.10335358826442
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                125.69641571623163,
                7.3275055239823095
              ],
              [
                125.72388153654413,
                7.281192545054058
              ],
              [
                125.67993622404413,
                7.225338181508247
              ],
              [
                125.760960393966,
                7.183102247239248
              ],
              [
                125.77332001310663,
                7.218526200408807
              ],
              [
                125.81863861662225,
                7.144950287857698
              ],
              [
                125.79529266935663,
                7.050919399747369
              ],
              [
                125.859837347091,
                7.0441048224504135
              ],
              [
                125.86945038420038,
                7.15585117338965
              ],
              [
                125.815892034591,
                7.283916970640856
              ],
              [
                125.84061127287225,
                7.386070923927897
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                126.00962736237426,
                9.379974233792296
              ],
              [
                126.00688078034301,
                9.312221183158588
              ],
              [
                126.0391531192102,
                9.27766206195055
              ],
              [
                126.06181338635366,
                9.2630932869643
              ],
              [
                126.10369779694457,
                9.256653872388497
              ],
              [
                126.15588285553832,
                9.295280863761523
              ],
              [
                126.0995779238977,
                9.374554475467704
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                125.8736423923412,
                9.811485306529498
              ],
              [
                125.87398572657183,
                9.777652768497251
              ],
              [
                125.99140449631172,
                9.770547498830899
              ],
              [
                125.98659788243364,
                9.792877838467945
              ],
              [
                125.95535487597577,
                9.811485310184018
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                125.54700325186764,
                10.905948536779356
              ],
              [
                125.68982551749264,
                10.902577297396869
              ],
              [
                125.68089912589107,
                10.95111945263026
              ],
              [
                125.57034919913326,
                10.996283478804326
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                123.72071562320505,
                13.42639634969806
              ],
              [
                123.73513517886911,
                13.38298030521662
              ],
              [
                123.75882444888865,
                13.362605461266511
              ],
              [
                123.74921141177927,
                13.356926919272441
              ],
              [
                123.75230131656443,
                13.328532205859183
              ],
              [
                123.81444273502146,
                13.296458873416103
              ],
              [
                123.82439909488474,
                13.30113649892584
              ],
              [
                123.82851896793161,
                13.294120026815747
              ],
              [
                123.84877501041208,
                13.302472946776593
              ],
              [
                123.84843168765818,
                13.324523271698801
              ],
              [
                123.7615710309199,
                13.395671959768201
              ],
              [
                123.74955473453318,
                13.401683562495963
              ],
              [
                123.75436125308786,
                13.425394529399927
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                122.76661843145115,
                14.550319286715808
              ],
              [
                122.77226803321952,
                14.470195416015736
              ],
              [
                122.68181786830658,
                14.39006395360074
              ],
              [
                122.76730507695896,
                14.346851367643563
              ],
              [
                122.89227455938084,
                14.27299853238651
              ],
              [
                122.97192543828709,
                14.30427251645918
              ],
              [
                122.80163735234959,
                14.376119635462759
              ],
              [
                122.79065102422459,
                14.481187690443857
              ],
              [
                122.82223671758396,
                14.52772094922725
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                122.01643231592593,
                16.170436270940122
              ],
              [
                122.05917599878725,
                16.132347627197095
              ],
              [
                122.08406689844546,
                16.159719428703752
              ],
              [
                122.08492520533022,
                16.18412000912929
              ],
              [
                122.03205350122866,
                16.16895243513539
              ],
              [
                122.02913525782046,
                16.173898511149734
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.9882155015885,
                18.292490427374446
              ],
              [
                122.00056847061674,
                18.274888343008662
              ],
              [
                122.01240918382486,
                18.300964717355612
              ],
              [
                122.06580644397131,
                18.351807440543883
              ],
              [
                122.0870924547135,
                18.386996923466334
              ],
              [
                122.10425859240881,
                18.411104089822746
              ],
              [
                122.1200514390885,
                18.443675977544537
              ],
              [
                122.14271074084631,
                18.44888690685808
              ],
              [
                122.16674333361975,
                18.497080503201207
              ],
              [
                122.14897664863594,
                18.496186215213072
              ],
              [
                122.14271076703908,
                18.505872530044865
              ],
              [
                122.13550077766898,
                18.49968673149628
              ],
              [
                122.11799150256506,
                18.49447579028042
              ],
              [
                121.97997575549475,
                18.300313614690765
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                120.37857920634725,
                18.047962683350548
              ],
              [
                120.42664439189413,
                17.92844863970612
              ],
              [
                120.46578318583944,
                17.97939894815863
              ],
              [
                120.45617014873007,
                18.07407517672115
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                120.49505948502872,
                14.417868026826461
              ],
              [
                120.50072431046817,
                14.414542902067573
              ],
              [
                120.50278424699161,
                14.410386426370714
              ],
              [
                120.50158261735294,
                14.404400965257432
              ],
              [
                120.56063413102481,
                14.417036750287293
              ],
              [
                120.55565595109317,
                14.419198062839799
              ],
              [
                120.53162335831973,
                14.418366791261697
              ],
              [
                120.52029370744083,
                14.420361837839598
              ],
              [
                120.5101656862006,
                14.425183126653826
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                120.55091411044303,
                14.180668769796867
              ],
              [
                120.57597667147819,
                14.184330211711337
              ],
              [
                120.58455974032584,
                14.236915299907421
              ],
              [
                120.5934861319274,
                14.236582521346156
              ],
              [
                120.59794932772819,
                14.23159078408648
              ],
              [
                120.60618907382194,
                14.218611751086243
              ],
              [
                120.6209519522399,
                14.217613333065659
              ],
              [
                120.63468486239616,
                14.21794613956232
              ],
              [
                120.61889201571647,
                14.262205034886367
              ],
              [
                120.70437938143913,
                14.277177883081768
              ],
              [
                120.69854289462272,
                14.304791857298135
              ],
              [
                120.52619487216178,
                14.300799685164407
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                120.59810204426348,
                14.11224397097869
              ],
              [
                120.5768160335213,
                14.106250589677797
              ],
              [
                120.56376976887286,
                13.96986674412129
              ],
              [
                120.58162255207598,
                13.898224451695647
              ],
              [
                120.5991320125252,
                13.8958915386643
              ],
              [
                120.60634179035723,
                13.925884342191765
              ],
              [
                120.59569878498614,
                13.980959549192415
              ],
              [
                120.60805840412677,
                14.010608182166516
              ],
              [
                120.61320824543536,
                14.024265253788977
              ],
              [
                120.62591118732989,
                14.028262291707389
              ],
              [
                120.62831444660723,
                14.072558126149374
              ],
              [
                120.61320824543536,
                14.07988443005126
              ],
              [
                120.60805840412677,
                14.10552464273276
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                120.94426999162961,
                13.629355503662168
              ],
              [
                120.86976895403195,
                13.613673202177289
              ],
              [
                120.88281521868039,
                13.50520336683336
              ],
              [
                120.90169797014524,
                13.510544578053258
              ],
              [
                120.90890774797727,
                13.517220923838376
              ],
              [
                120.9325970179968,
                13.517220923838376
              ],
              [
                121.01156125139524,
                13.60466375025884
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.95086239364565,
                13.794171745261567
              ],
              [
                121.8571197352515,
                13.817490472135662
              ],
              [
                122.13040464736088,
                13.618707169992792
              ],
              [
                122.1757232508765,
                13.630051676157953
              ],
              [
                122.06654661513431,
                13.74813557129687
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        },
        {
          "type": "Polygon",
          "coordinates": [
            [
              [
                121.43637857026184,
                13.824924725353622
              ],
              [
                121.4288254696759,
                13.779581065276094
              ],
              [
                121.7364426571759,
                13.848926619782393
              ],
              [
                121.6760178524884,
                13.877592300630479
              ],
              [
                121.61833962983215,
                13.872259418754835
              ],
              [
                121.60426435079873,
                13.881925261218731
              ],
              [
                121.58675393647277,
                13.900255679996299
              ]
            ]
          ],
          "geodesic": true,
          "evenOdd": true
        }
      ],
      "coordinates": []
    }),
    prtoOrf = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[121.65429323540161, 21.162866222851928],
          [119.42665434588328, 16.973199801311544],
          [118.26439535217014, 12.66448697748028],
          [116.30306704841644, 6.889854649593294],
          [117.38362621397641, -0.3051197861920053],
          [127.83857547976686, 6.045318172530299],
          [122.8406325844013, 20.152955541102717],
          [122.05156268580782, 21.541534429275412]]]),
    brstoSrs = 
    /* color: #98ff00 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[121.88323276550375, 12.425401249494335],
          [122.00888889343344, 12.3630314991715],
          [122.061760597535, 12.576903979783875],
          [121.92305820495687, 12.624481578788982]]]),
    rctoOrf = 
    /* color: #0b4a8b */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[119.21207064024378, 11.045054152752027],
          [119.4331704937594, 11.017421860124255],
          [119.44656008116175, 11.230325166963487],
          [119.23232668272425, 11.241774401787952]]]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/

///////////////////////////////
// Global coral atlas project - GBR & Torres Strait   
// Contact: mitchell.lyons@gmail.com
// Region coordinator: Robert Canto (rfcanto@gmail.com)
// Description:
// - Developing a process to combine OBIA and supervised classification
// - This script loads the raw classification data (from *_classification script)
// - Then applied some cleanup and object-based relational rules
///////////////////////////////

// Table of contents 
// 1. Setting constants
// 2. Data loads & vis
// 3. OBIA clean up rules
// 4. Export

// Load and libraries needed 
var map_palettes = require('users/mitchest/global_reefs_modules:colour_pals');
var pkg_vis = require('users/mitchest/global_reefs_modules:pkg_vis');
var param_module = require('users/mitchest/global_reefs_modules:reef_params');

// ###########################################
// SENSOR GENERICS
var sensor_params = param_module.dove;         //<------------ THIS IS WHERE YOU CHOOSE THE SENSOR
// REGION AND SENSOR SPECIFIC LOAD PATHS
var region_params = param_module.philippines;  //<------------ THIS IS WHERE YOU CHOOSE THE REGION
//  ^^ all the data paths are in this module ^^
// ###########################################

// 1. Setting constants

// These will get written to the asset metadata 

var vars = {
  
  // analysis type
  geomorphic: false, // map geomorphic zonation (when set to true) or benthic habitat (when set to false)

  // analysis parameters
  image_data_scale: sensor_params.pixel,
  small_object_geo: ee.Number(400).int(), // smallest object szie in pixels (geomorphic)
  small_object_benthic: ee.Number(130).int(), // smallest object szie in pixels (benthic)
  smooth_radius: ee.Number(3), // radius in pixels for initial smooth 
  dist_to_land_ORF: 1000, //distance to land in meters to convert terrestrial reef flat to ORF
  dist_to_land_RC: 500, //distance to land in meters to convert reef crest to TRF
  wave_height: 0.5, //cut off height for waves in metres, Hs95 threshold
  geo_depth_cutoff: 1300, //depth in centimetres
  shallowlag_depth_cutoff: 500, //depth in centimetres
  benthic_depth_cutoff: 1000, //depth in centimetres
  
  //############
  // Clean-up stage selection
  cleanup_stage: 2, // set to 1, 2 or 3
  geo_refinement: true, // set to true to apply the refinement_mask (the other stage 3 masks will still run)
  
  /*
  - GEOMORPHIC 1: The first pass does a small object filter, just to generally clean noise and reduce the amount of cleaning needed
  -            2: The second pass runs the OBIA cleanup rules
  -            3: The third pass is the MANUAL cleanup stage, which includes AT LEAST the no_reef masking
                        - see below where it starts/ends (only that section is run)
                        - please put region specific stuff in here ONLY

  - BENTHIC 1: This is the main benthic stge - it does noise removal, no data reclaim and OBIA rules - review those if needed
            2: The second mas is the MANUAL stage - it's optional, but shuold include ALL region specific stuff
                        - see below where it starts/ends (only that section is run)
                        - please put region specific stuff in here ONLY
  */
  
  // DON'T TOUCH --->
  obia_2nd_pass: null,
  obia_clean: null, // run object-based relationship rules + small object clean up
  fast_clean: null, // run a faster (but less precise) version of the OBIA clean; only applies to geomorphic (`obia_clean: true` also)
  manual_clean: false, // apply manual touch ups
  // --------------<
  //############
  
  reproject_display: true,
  
  // export options
  do_export: true, // export the results?
  geomorph_output_name: region_params.sname + '_geo_clean', // DO NOT CHANGE - change in the pop up dialouge if you must
  benthic_output_name: region_params.sname + '_benthic_clean', // DO NOT CHANGE - change in the pop up dialouge if you must
  asset_output: region_params.asset // asset path

};


// Clean up stage auto-parameterisation (DON'T TOUCH) --->

if (vars.geomorphic) {
  var temp_outname = vars.geomorph_output_name;
  if (vars.cleanup_stage == 1) {
    vars.obia_2nd_pass = false;
    vars.obia_clean = false;
    vars.fast_clean = true;
    vars.manual_clean = false;
    vars.geomorph_output_name = temp_outname + '1';
  } else if (vars.cleanup_stage == 2) {
    vars.obia_2nd_pass = true;
    vars.obia_clean = true;
    vars.fast_clean = true;
    vars.manual_clean = false;
    vars.geomorph_output_name = temp_outname + '2';
  } else if (vars.cleanup_stage == 3) {
    vars.manual_clean = true;
    vars.obia_2nd_pass = false;
    vars.obia_clean = false;
    vars.fast_clean = false;
    vars.do_export = false;
    vars.geomorph_output_name = temp_outname + '3';
  }
}

if (!vars.geomorphic) {
  var temp_outname = vars.benthic_output_name;
  if (vars.cleanup_stage == 1) {
    vars.obia_2nd_pass = true,
    vars.obia_clean = true, 
    vars.fast_clean = false, 
    vars.manual_clean = false;
    vars.benthic_output_name = temp_outname + '1';
  } else if (vars.cleanup_stage == 2) {
    vars.manual_clean = true;
    vars.obia_2nd_pass = false,
    vars.obia_clean = false, 
    vars.fast_clean = false,
    vars.do_export = false;
    vars.benthic_output_name = temp_outname + '2';
  }
}

//Region extent is created in map viewer and exported to GEE asset
var region_extent = ee.FeatureCollection(region_params.extent_mask).geometry();
Map.addLayer(region_extent, {}, "Manual reef outline", false);
// -----------------------------------------<

//################################################################################################
//START OF CLEAN 3 - Manual Cleanup
//Review everything in this section
//This is the section to add/remove manual cleanups
//You MUST review it for each region

//###############################################################################################

if (vars.manual_clean && vars.geomorphic) {
  
  print("Doing GEOMORPHIC manual clean ups - make sure this is what you want to do");
  print("Export the manual map, check 'manual' layer in the viewer for effects");
  
  var depth = ee.Image(region_params.pixels).select('depth');
  
  // define the manually edited map - uses the output from the second pass of cleaning
  var man_geo = ee.Image(region_params.geo_map_clean2);
  
  // import the mid mask from asset ****only use ee.FC if mid_mask created in map viewer****
  var mid_mask = ee.FeatureCollection(region_params.mid_mask).geometry();
  //Map.addLayer(mid_mask, {color: 'red'}, "mid mask import", true, 0.4);
  var midmask = ee.Image().byte().paint(ee.Feature(mid_mask.dissolve(),{zone: 1}), "zone").clip(mid_mask.dissolve());
  
  // the "MID MASK" CLEAN
  man_geo = man_geo.where({
    test: midmask.eq(1),
    value: ee.Image(2)
  });
  
  // WAVE clean (un-comment this sectio nbased on whether you have waves or not)
  /*
  //var waves = ee.Image(region_params.waves)
  man_geo = man_geo.where({
    test: waves.lte(vars.wave_height)
               .and(man_geo.eq(22)),
    value: ee.Image(21)
  })
  
  // clean reef crest below wave threshold
  man_geo = man_geo.where({
    test: man_geo.eq(15)
                 .and(waves.lte(0.5)),
    value: ee.Image(14)
  })
  */
  
  // use a distance to deepwater to cut out RC/slope
  var dist_to_deep = man_geo.eq(2).fastDistanceTransform(256).sqrt()
                                  .multiply(ee.Image.pixelArea().sqrt())
                                  .uint16()
                                  .selfMask();
  Map.addLayer(dist_to_deep, {}, "distance to deepwater", false);
  
  man_geo = man_geo.where({
    test: man_geo.eq(15)
                 .and(dist_to_deep.gte(300)),
    value: ee.Image(14)
  });
  
  man_geo = man_geo.where({
    test: man_geo.eq(21).or(man_geo.eq(22))
                 .and(dist_to_deep.gte(1500)),
    value: ee.Image(24)
  });
  // TRF that is really close to open deep water - more likely to be ORF
  man_geo = man_geo.where({
    test: man_geo.eq(16)
                 .and(dist_to_deep.lt(1000)),
    value: ee.Image(14)
  });
  
  
  // use a distance to shallow lagoon to cleanup overestimated deep lagoon
  var dist_to_sl = man_geo.eq(11).fastDistanceTransform(256).sqrt()
                                  .multiply(ee.Image.pixelArea().sqrt())
                                  .uint16()
                                  .selfMask();
  
  man_geo = man_geo.where({
    test: man_geo.eq(12)
                 .and(dist_to_sl.gt(2000)),
    value: ee.Image(2)
  });
  
  /*
  ##############
  
  The rest of the manual geometry paintings and rules should go here
      - make the geom, paint the layer, use it in a rule
      - consult previous regions *_cleanup script for ideas/hints/existing rules etc.
  e.g. 
  var notreefcrest = ee.Image().byte().paint(ee.Feature(not_reef_crest, {zone: 1}), "zone").clip(not_reef_crest);
  var notdeepwater = ee.Image().byte().paint(ee.Feature(not_deep_water, {zone: 1}), "zone").clip(not_deep_water);
  
  
  // Reef crest -> Inner reef flat (inside the reef)
  man_geo = man_geo.where({
    test: notreefcrest.eq(1)
                     .and(man_geo.eq(15)),
    value: ee.Image(13)
  });
  
  // Deep water -> Deep lagoon (inside the reef)
  man_geo = man_geo.where({
    test: notdeepwater.eq(1)
                     .and(man_geo.eq(2)),
    value: ee.Image(12)
  });
  
  ##############
  */
  
  var SLtoRS = ee.Image().byte().paint(ee.Feature(sltoRs, {zone: 1}), "zone").clip(sltoRs);// sl to  reef slope
  
  man_geo = man_geo.where({
      test: SLtoRS.eq(1)
              .and(man_geo.eq(11)),
      value: ee.Image(22)
  });
  
  var SRSBRStoRS = ee.Image().byte().paint(ee.Feature(srsbrsToRs, {zone: 1}), "zone").clip(srsbrsToRs)// shel RS & BRS to RS
 print (SRSBRStoRS)
 
man_geo = man_geo.where({
    test: SRSBRStoRS.eq(1)
            .and(man_geo.eq(21).or(man_geo.eq(24))),
    value: ee.Image(22)
  });
  
   var DLtoDW = ee.Image().byte().paint(ee.Feature(dltoDw, {zone: 1}), "zone").clip(dltoDw)// deep lagoon to deep water
 print (DLtoDW)
 
man_geo = man_geo.where({
    test: DLtoDW.eq(1)
            .and(man_geo.eq(12)),
    value: ee.Image(2)
  });
  
var ORFBRStoDL = ee.Image().byte().paint(ee.Feature(orfbrsToDl, {zone: 1}), "zone").clip(orfbrsToDl)// out RF & BRS to Dl
 print (ORFBRStoDL)
 
man_geo = man_geo.where({
    test: ORFBRStoDL.eq(1)
            .and(man_geo.eq(14).or(man_geo.eq(24))),
    value: ee.Image(12)
  });

   var XtoDW = ee.Image().byte().paint(ee.Feature(xtoDw, {zone: 1}), "zone").clip(xtoDw)// any x to deep water
 print (XtoDW)
 
man_geo = man_geo.where({
    test: XtoDW.eq(1)
            ,
    value: ee.Image(2)
  });
  
      var PRtoORF = ee.Image().byte().paint(ee.Feature(prtoOrf, {zone: 1}), "zone").clip(prtoOrf)// patch reef to outer RF
 print (PRtoORF)
 
man_geo = man_geo.where({
    test: PRtoORF.eq(1)
            .and(man_geo.eq(25)),
    value: ee.Image(14)
  });
  
   var BRStoSRS = ee.Image().byte().paint(ee.Feature(brstoSrs, {zone: 1}), "zone").clip(brstoSrs)// back reef slope to SRS
 print (BRStoSRS)
 
man_geo = man_geo.where({
    test: BRStoSRS.eq(1)
            .and(man_geo.eq(24)),
    value: ee.Image(21)
  });

    var RCtoORF = ee.Image().byte().paint(ee.Feature(rctoOrf, {zone: 1}), "zone").clip(rctoOrf)// reef crest to outer reef flat
 print (RCtoORF)
 
man_geo = man_geo.where({
    test: RCtoORF.eq(1)
            .and(man_geo.eq(15)),
    value: ee.Image(14)
  });

  /*
  // use the coastal masks to clean TRF, also minding WCMC
  Map.addLayer(wcmc.filterBounds(coast_mask), {}, "WCMC layer", false)
  
  // coast mask to remove everything but TRF
  //var coast_mask_i = ee.Image().byte().paint(ee.Feature(coast_mask, {zone: 1}), 'zone').clip(coast_mask); // not actually needed cause clip is enough
  var wcmc_mask = ee.Image().byte().paint(ee.Feature(wcmc.filterBounds(coast_mask).geometry(), {zone: 1}), 'zone')
                    .unmask(0, false)
                    .clip(coast_mask);
  // first WCMC bounds
  man_geo = man_geo.where({
    test: wcmc_mask.eq(0),
    value: ee.Image(0)
  });
  // second leave only selected classes
  man_geo = man_geo.where({
    test: wcmc_mask.eq(1)
                   .and(man_geo.neq(16).and(man_geo.neq(14))),
    value: ee.Image(0)
  });
  
  // use off shore mask to remove TRF (--> ORF)
  var offshore_mask_i = ee.Image().byte().paint(ee.Feature(offshore_mask, {zone: 1}), 'zone').clip(offshore_mask);
  
  man_geo = man_geo.where({
    test: offshore_mask_i.eq(1)
                         .and(man_geo.eq(16)),
                      //.and(wcmc_mask.eq(0)),
    value: ee.Image(14)
  })
  
  
  // use reef area mask in torres straight to just leave reef areas mapped
  var reef_clean_i = ee.Image(0).byte().paint(ee.Feature(reef_clean, {zone: 1}), 'zone').clip(reef_clean_boundary);
  man_geo = man_geo.where({
    test: reef_clean_i.eq(0)
                      .and(man_geo.neq(16)),
                      //.and(wcmc_mask.eq(0)),
    value: ee.Image(0)
  })
  */
  
  // remove excess slope - via depth threshold
  var depth_seg = ee.Image(region_params.segments).select('depth');
  man_geo = man_geo.where({
    test: man_geo.eq(21).or(man_geo.eq(22)).or(man_geo.eq(12)).or(man_geo.eq(24))
                        .and(depth_seg.gt(1000)),
    value: ee.Image(2)
  });  
  
  //mask to deep and anything removed to this point
  man_geo = man_geo.updateMask(man_geo.gt(2)).selfMask();
  
  if (vars.geo_refinement) {
    // make the mask image layer
    var refine = ee.Image().byte().paint(ee.Feature(refinement_mask, {zone: 1}), "zone").clip(refinement_mask);
    // apply
    man_geo = man_geo.where({
      test: refine.eq(1),
      value: ee.Image(0)
    });
  }
  
  // Add data + the manual layer to the map
  var lowtide_image = ee.Image(region_params.image);
  Map.addLayer(lowtide_image, {min:0, max:1500}, sensor_params.sname + ' low tide', false);
  var geo_clean1 = ee.Image(region_params.geo_map_clean1);
  Map.addLayer(geo_clean1, map_palettes.geo, 'Geo clean stage 1', false);
  var geo_clean2 = ee.Image(region_params.geo_map_clean2);
  Map.addLayer(geo_clean2, map_palettes.geo, 'Geo clean stage 2', false);
  //Map.addLayer(man_geo.updateMask(man_geo), map_palettes.geo, 'Geo clean stage 3', false);
  Map.addLayer(man_geo.updateMask(man_geo.gt(2)), map_palettes.geo, 'Geo clean stage 3 - no DW', false);
  Map.addLayer(wcmc, {color:'#d63000'}, "WCMC layer", false);
  //Map.addLayer(gbr30.lt(-20), {}, "Deep reef mask", false)
  //Map.addLayer(global_reef_mask, {}, "Global mask", false)
  //Map.addLayer(global_reef_mask.updateMask(global_reef_mask.eq(1)), {palette: ['F8FF23'], opacity: 0.4}, 'global_reef_mask - land', false);
  //Map.addLayer(global_reef_mask.updateMask(global_reef_mask.eq(3)), {palette: ['0000ff'], opacity: 0.4}, 'global_reef_mask - reef', false);
  //Map.addLayer(global_reef_mask.updateMask(global_reef_mask.eq(2)), {palette: ['FF0000'], opacity: 0.4}, 'global_reef_mask - water', false);

  
  // Export
  var output_name = (vars.geomorphic) ? vars.geomorph_output_name : vars.benthic_output_name;
  Export.image.toAsset({
    image: man_geo,
    description: output_name,
    assetId: vars.asset_output + 'in_out/' + output_name,
    region: region_extent,
    scale: vars.image_data_scale,
    crs: 'EPSG:4326',
    maxPixels: 1e13,
    pyramidingPolicy: {'.default': 'mode'}
  });
  
} 

if (vars.manual_clean && !vars.geomorphic) {
  
  print("Doing BENTHIC manual clean ups - make sure this is what you want to do");
  print("Export the manual map, check 'manual' layer in the viewer for effects");
  
  var depth = ee.Image(region_params.segments).select('depth');
  
  // define the final geomorphic map (the manually edited geo map - stage 3)
  var geo_map = ee.Image(region_params.geo_map_clean3);
  
  // define the clean benthic map to apply 2nd stage rules to
  var man_benthic = ee.Image(region_params.benthic_map_clean1);
  
  /*// extra depth cutoff refinement
  man_benthic = man_benthic.where({
          test: depth.gt(vars.benthic_depth_cutoff),
          value: ee.Image(0)
        });*/
  
  /*
  **Generic benthic rules**
    - should be generally applicable, but still review
  */
  
  // BMA on inner RF, outer RF,reef crest, reef slope -> rubble 
  man_benthic = man_benthic.where({
    test: man_benthic.eq(18)
                     .and(geo_map.eq(13).or(geo_map.eq(14)).or(geo_map.eq(15)).or(geo_map.eq(22))),
    value: ee.Image(12)
  });
  
  // Rubble on Outer reef flat and Reef crest -> rock 
  man_benthic = man_benthic.where({
    test: man_benthic.eq(12)
                     .and(geo_map.eq(14).or(geo_map.eq(15))),
    value: ee.Image(13)
  });
    
  
  // Sand on RC -> Rock
  man_benthic = man_benthic.where({
    test: man_benthic.eq(11)
                     .and(geo_map.eq(15)),
    value: ee.Image(13)
  }); 
  
  // Sand on reef slope -> coral/algaw
  man_benthic = man_benthic.where({
    test: man_benthic.eq(11)
                     .and(geo_map.eq(22)),
    value: ee.Image(15)
  }); 
  
  // Seagrass on RC or ORF -> Coral/Algae
  /*// except for these two areas
  var sg_orf = ee.Image().byte().paint(ee.Feature(sg_on_orf, {zone: 1}), "zone").unmask(geo_map.eq(42));*/
  
  man_benthic = man_benthic.where({
    test: man_benthic.eq(14)
                     .and(geo_map.eq(14).or(geo_map.eq(15))),
                     //.and(sg_orf.eq(0)),
    value: ee.Image(15)
  }); 
  
  
  // extra depth/distance cutoff for specific classes - coral/algae 
  man_benthic = man_benthic.where({
    test: man_benthic.eq(15)
                     .and(depth.gt(8000)),
    value: ee.Image(0)
  });
  
  var dist_to_ben = man_benthic.neq(15).fastDistanceTransform(256).sqrt() // distance to anything not coral/algae
                                       .multiply(ee.Image.pixelArea().sqrt())
                                       .uint16()
                                       .selfMask();
  
  man_benthic = man_benthic.where({
    test: man_benthic.eq(15)
                     .and(dist_to_ben.gt(200)),
    value: ee.Image(0)
  });
  
  /*
  
  **Manual polygon guided rules**
   - same as per geomorphic clean section
   - add a geometry, paint the layer, create a rule
  
  */
  
  
  // final smooth for missing data due to depth
  var ben_mask = man_benthic.gt(0)
  man_benthic = man_benthic.focal_mode(2)
                           .updateMask(ben_mask)
                           .selfMask()
  
  
  // Add the manual layer to the map

  var dove_image = ee.Image(region_params.image);
  Map.addLayer(dove_image, {bands: ['b3','b2','b1'], min:0, max:4000, gamma:1.5}, sensor_params.sname + ' low tide', true);
  
  var benthic_clean1 = ee.Image(region_params.benthic_map_clean1);
  var geo_clean1 = ee.Image(region_params.geo_map_clean1);
  var geo_clean2 = ee.Image(region_params.geo_map_clean2);
  Map.addLayer(geo_clean1, map_palettes.geo, 'Geo clean stage 1', false);
  Map.addLayer(geo_clean2.updateMask(geo_clean2.gt(2)), map_palettes.geo, 'Geo clean stage 2', false);
  Map.addLayer(geo_map.updateMask(geo_map.gt(2)), map_palettes.geo, 'Geo clean stage 3 - MANUAL', true);
  Map.addLayer(benthic_clean1, map_palettes.benthic, 'Benthic clean stage 1', false);
  Map.addLayer(man_benthic.reproject({crs:'EPSG:4326', scale: 5}), map_palettes.benthic, 'Benthic clean stage 2 - MANUAL', true);
  
  // Export
  var output_name = (vars.geomorphic) ? vars.geomorph_output_name : vars.benthic_output_name;
  Export.image.toAsset({
    image: man_benthic,
    description: output_name,
    assetId: vars.asset_output + 'in_out/' + output_name,
    region: region_extent,
    scale: vars.image_data_scale,
    crs: 'EPSG:4326',
    maxPixels: 1e13,
    pyramidingPolicy: {'.default': 'mode'}
  });
  
}

// #################################################################################################
// END OF MANUAL SECTION
// #################################################################################################


// 2. Data loads & vis

if (!vars.manual_clean) {

  // load input data
  
  // define raw geo/benthic outputs
  // Run check to see if the region has been split into multiple areas
  
  // geo
  if (ee.List(region_params.geo_map).length().getInfo() > 1) {
    var geo_map_raw = ee.Image(region_params.geo_map[0]).unmask(0, false)
                 .add(ee.Image(region_params.geo_map[1]).unmask(0,false))
                 .selfMask();
  } else {
    var geo_map_raw = ee.Image(region_params.geo_map);
  }
  
  // benthic
  if (ee.List(region_params.benthic_map).length().getInfo() > 1) {
      var benthic_map = ee.Image(region_params.benthic_map[0]).unmask(0, false)
               .add(ee.Image(region_params.benthic_map[1]).unmask(0,false))
               .selfMask();
  } else {
      var benthic_map = ee.Image(region_params.benthic_map);
  }
  
  // set the geo map for further processing
  if (vars.geomorphic && vars.obia_2nd_pass) {
    // if it's 2nd pass, you want to make sure you're loading the latest geo clean map
    var geo_map = ee.Image(region_params.geo_map_clean1);
  } else if (vars.geomorphic) {
    var geo_map = geo_map_raw;
  }
  
  var depth = ee.Image(region_params.pixels).select('depth');
  var low_tide_image = ee.Image(region_params.image);
  
  var display_pal = (vars.geomorphic) ? map_palettes.geo : map_palettes.benthic;
  Map.addLayer(depth, {min:0, max:2500}, 'Depth data', false);
  Map.addLayer(low_tide_image, {bands: ['b3','b2','b1'], min:0, max:3000}, sensor_params.sname + ' low tide', false);
  
  // load for display purposes
  if (vars.geomorphic) {
    Map.addLayer(geo_map_raw, display_pal, 'Geomorphic map RAW', false);
    if (vars.cleanup_stage == 2) Map.addLayer(ee.Image(region_params.geo_map_clean1), display_pal, 'Geo clean stage 1', false);
  }
  if (!vars.geomorphic) {
    // Use the manually cleaned geomorphic map as input for the benthic clean
    var geo_map = ee.Image(region_params.geo_map_clean3);
    Map.addLayer(geo_map.updateMask(geo_map.gt(2)), map_palettes.geo, 'Geo clean stage 3', false);
    Map.addLayer(benthic_map, display_pal, 'Benthic map RAW', false);
  }
  
  // 3. Object-based re-classificaiton and cleaning
  
  /* OUTPUT EXTENT
    - to the mapping extent just so it doesn't balloon out
    - to the 'reef boundary' extent for noise/deep removal
  */  
  var class_extent_mask = geo_map.gt(0);
  
  /*
  
  ########
  Initial small object clean
   - this was originally at the end, but we needed to massively reduce the number of objects to 
     iterate through in the OBIA cleaning, so this happens first now
   - future collabs with google might fix this, but need to change the parallel serialisation of vector procesing
   
   - includes a possible special case for:
        - geomorphic to clean up turbid areas over size threshold; fix shallow vs. deep lagoon
        - benthic to allow breaking waves (temporal class) to grow into surrounding class
  ########
  
  */
  
  // ##############################################################################################
  // START OF CLEAN 1
  // ##############################################################################################
  
  if (vars.geomorphic && !vars.obia_2nd_pass) {
    
    // shallow lagoon > 5m == deep lagoon
    geo_map = geo_map.where({
      test: geo_map.eq(11)
                    .and(depth.gt(vars.shallowlag_depth_cutoff)),
      value: ee.Image(12)
    });
    
    // deep water in depth data == deep (s2 + ls8 data should be good enough for this)
    geo_map = geo_map.where({
      test: depth.gt(vars.geo_depth_cutoff),
      value: ee.Image(2)
    });
    
    // make a smooth map with masked area as a value - *** Change to ee.kernal*** see reef mask in clean 3
    var smooth_map = geo_map
                        .focal_mode({
                          radius: vars.smooth_radius, // relates to smoothness required
                          kernelType: 'circle', units: 'pixels', iterations: 2
                        });
    
    // replace small objects with smooth underneath
    var clean_map = geo_map.where({
      test: geo_map.connectedPixelCount(vars.small_object_geo, false).lt(vars.small_object_geo), 
      value: smooth_map
    }).updateMask(class_extent_mask);
    
    // display distance to land mask for assessing cut-off distances
    var distToLand = ee.Image(region_params.distToLand);
    Map.addLayer(distToLand.lte(vars.dist_to_land_RC), {}, 'Dist to land (RC to TRF): ' + vars.dist_to_land_RC + 'm', false);
    Map.addLayer(distToLand.unmask(100000, false).gt(vars.dist_to_land_ORF), {}, 'Dist to land (TRF to ORF): ' + vars.dist_to_land_ORF + 'm', false);

    // reef crest close to land -> TRF
    clean_map = clean_map.where({
      test: distToLand.lte(vars.dist_to_land_RC)
                      .and(clean_map.eq(15)),
      value: ee.Image(16)
      });
    
    // TRF outside of specified distance from land -> ORF
    clean_map = clean_map.where({
      test: distToLand.unmask(100000, false).gt(vars.dist_to_land_ORF)
                       .and(clean_map.eq(16)),
      value: ee.Image(14)
    });
  }
  
  if (!vars.geomorphic && vars.cleanup_stage == 1) {
    
    // make a smooth map with masked area as a value, and without temporal class (basically breaking waves)
    var smooth_map = benthic_map
                        .focal_mode({
                          radius: vars.smooth_radius, // relates to smoothness required
                          kernelType: 'circle', units: 'pixels', iterations: 1
                        });
    
    //replace small objects with smooth underneath
    var clean_map = benthic_map.where({
      test: benthic_map.connectedPixelCount(vars.small_object_benthic, false).lt(vars.small_object_benthic),
      value: smooth_map
    }).updateMask(class_extent_mask);
    
  }
  
  // ##############################################################################################
  // START OF CLEAN 2
  // ##############################################################################################
  
  if (vars.geomorphic && vars.obia_2nd_pass) {
    var clean_map = geo_map;
  }
  
  if (vars.obia_clean) {
    
    if (vars.geomorphic && !vars.fast_clean) { 
      
      // FUNCTION that maps over feature colleciton and assigns neighbour percentages
      var set_neighbour_properties = function(f) {
        // make the 1px buffer
        var diff = f.buffer(vars.image_data_scale).difference(f, ee.ErrorMargin(0.5));
        // reduce the classes in the buffer zone
        var diff_classes = ee.Dictionary(
          clean_map.unmask(ee.Image(0)).reduceRegion({
            reducer: ee.Reducer.frequencyHistogram(),
            geometry: diff.geometry(),
            scale: vars.image_data_scale,
            maxPixels: 1e11
          }).get('classification')
        );
        // calculate the percentages
        var diff_sum = diff_classes.toArray().reduce(ee.Reducer.sum(), [0]).get([0]);
        var diff_percs = diff_classes.map(function(k,v){return(ee.Number(v).divide(diff_sum).multiply(100).toUint8())});
        
        /* NOW, we can try to do the class logic right here (see /users/mitchest/global_reefs/obia_dev),
           or we can return the neighbour % and do image logic via (painted) rasters */
        
        return(f.set(diff_percs));
      };
      
      // FUNCTION to reduce the map to vectors and map the neighbour properties function
      var reduce_neighbours = function() {
        // reduce map to vectors
        var map_fc = clean_map
              .updateMask(segment_id).updateMask(clean_map.eq(classn)) // only vectorise class/es of interest
              .reduceToVectors({
                scale: vars.image_data_scale, 
                eightConnected: false,
                bestEffort: true, 
                maxPixels: 1e13,
                tileScale: 1,
                geometry: region_extent
              });
        // map the function, calculate neighbour properties
        return(map_fc.map(set_neighbour_properties));
      };
      
      // first make a make size threshold, so we're not vecortising huge objects when we don't have to
      var segment_id = clean_map.connectedComponents(ee.Kernel.plus(1),vars.small_object_geo.sqrt()).select('labels');
      //Map.addLayer(segment_id.reproject(ee.Projection('EPSG:4326').atScale(ee.Number(vars.image_data_scale))))
      Map.addLayer(clean_map.updateMask(segment_id).reproject(ee.Projection('EPSG:4326').atScale(ee.Number(vars.image_data_scale))), display_pal, 'Map objects to be iterated through (OBIA)', false);
      
      // This is where we select the single or group of classes to vectorise for cleaning up
      //var classn = ee.Number(15) // one class
      var classn = clean_map.where({
        test: clean_map.neq(16) //TRF
                .and(clean_map.neq(15)) //RR
                .and(clean_map.neq(14)) //ORF
                .and(clean_map.neq(13)) //IRF
                //.and(clean_map.neq(12)) // deep L
                .and(clean_map.neq(11)), // shallow L 
        value: ee.Image(99) // 99 ensures it's ignored in logic
      });
      
      // Minimum size of object to reclass based on neighbourhood
      var max_size = ee.Number(1000).divide(vars.image_data_scale).pow(2); // the first number is the square dimension of the desired min size;
      // calculate neighbours
      var map_fc_neighbours = reduce_neighbours();
      
      // #########
      // REEF RIM
      // #########
      
      var focus_class = ee.Number(15); //RR
      
      // start the object-based neighbourhood rules
      // paint out to rasters (only paint the layers needed)
      var objsize = ee.Image(30000).paint(map_fc_neighbours, 'count').rename('count');
      //var nb24 = ee.Image().byte().paint(map_fc_neighbours, '24').unmask(0).rename('nb24') //OCL
      var nb22 = ee.Image().byte().paint(map_fc_neighbours, '22').unmask(0).rename('nb22'); //SL ex
      var nb21 = ee.Image().byte().paint(map_fc_neighbours, '21').unmask(0).rename('nb21'); //Sl sh
      var nb16 = ee.Image().byte().paint(map_fc_neighbours, '16').unmask(0).rename('nb16'); //TRF
      var nb15 = ee.Image().byte().paint(map_fc_neighbours, '15').unmask(0).rename('nb15'); //RR
      var nb14 = ee.Image().byte().paint(map_fc_neighbours, '14').unmask(0).rename('nb14'); //ORF
      var nb13 = ee.Image().byte().paint(map_fc_neighbours, '13').unmask(0).rename('nb13'); //IRF
      //var nb3 = ee.Image().byte().paint(map_fc_neighbours, '3').unmask(0).rename('nb3') //Turbid
      
      // RR surrounded by ORF --> ORF
      clean_map = clean_map.where({
        test: clean_map.eq(focus_class)
                .and(nb14.gt(75)),
        value: ee.Image(14)
      });
      
      // RR surrounded by IRF --> IRF
      clean_map = clean_map.where({
        test: clean_map.eq(focus_class)
                .and(nb13.gt(75)),
        value: ee.Image(13)
      });
      
      // RR surrounded by IRF + ORF --> IRF
      clean_map = clean_map.where({
        test: clean_map.eq(focus_class)
                .and(nb13.add(nb14).gt(75)),
        value: ee.Image(13)
      });
      
      // RR with decent border to TRF --> TRF (often dark, probably seagrass)
      clean_map = clean_map.where({
        test: clean_map.eq(focus_class)
                .and(nb16.gt(40)),
        value: ee.Image(16)
      });
      
      // RR surrounded by OCL --> OCL
      clean_map = clean_map.where({
        test: clean_map.eq(focus_class)
                .and(nb24.gt(75)),
        value: ee.Image(24)
      })
      
      // small RR objects touching OCL + stuff --> ORF
      clean_map = clean_map.where({
        test: clean_map.eq(focus_class)
                .and(objsize.lte(max_size))
                .and(nb13.lte(75).and(nb14.lte(75))) // to ensure we're no re-writing previous rules
                .and(nb24.gt(1)),
        value: ee.Image(14)
      })
      
      // ####
      // ORF
      // ####
      
      focus_class = ee.Number(14); // ORF
      
      // ORF surrounded by IRF --> IRF
      clean_map = clean_map.where({
        test: clean_map.eq(focus_class)
                .and(nb13.gt(75)),
        value: ee.Image(13)
      });
      
      // ORF surrounded by TRF --> TRF
      clean_map = clean_map.where({
        test: clean_map.eq(focus_class)
                .and(nb16.gt(75)),
        value: ee.Image(16)
      });
      
      // ORF surrounded by RR --> RR
      clean_map = clean_map.where({
        test: clean_map.eq(focus_class)
                .and(nb15.gt(85)),
        value: ee.Image(15)
      });
      
      // ORF touching slope and RR --> RR
      clean_map = clean_map.where({
        test: clean_map.eq(focus_class)
                .and(nb21.gt(0).or(nb22.gt(0)))
                .and(nb15.gt(0)),
        value: ee.Image(15)
      });
      
      // ####
      // IRF
      // ####
      
      focus_class = ee.Number(13); // IRF
      
      // IRF surrounded by ORF --> ORF
      clean_map = clean_map.where({
        test: clean_map.eq(focus_class)
                .and(nb14.gt(75)),
        value: ee.Image(14)
      });
      
      // IRF surrounded by TRF --> TRF
      clean_map = clean_map.where({
        test: clean_map.eq(focus_class)
                .and(nb16.gt(75)),
        value: ee.Image(16)
      });
      
      // IRF surrounded by RR --> RR
      clean_map = clean_map.where({
        test: clean_map.eq(focus_class)
                .and(nb15.gt(85)),
        value: ee.Image(15)
      });
      
      // ####
      // TRF
      // ####
      
      focus_class = ee.Number(16); // TRF
      
      // TRF surrounded by ORF --> ORF
      clean_map = clean_map.where({
        test: clean_map.eq(focus_class)
                .and(nb14.gt(75)),
        value: ee.Image(14)
      });
      
      // TRF surrounded by IRF --> IRF
      clean_map = clean_map.where({
        test: clean_map.eq(focus_class)
                .and(nb13.gt(75)),
        value: ee.Image(13)
      });
      
      // TRF surrounded by IRF + ORF --> IRF
      clean_map = clean_map.where({
        test: clean_map.eq(focus_class)
                .and(nb13.add(nb14).gt(75)),
        value: ee.Image(13)
      });
      
      // ####
      // LAGOONS
      // ####
      
      var nb11 = ee.Image().byte().paint(map_fc_neighbours, '11').unmask(0).rename('nb11'); // shallow lag
      
      // SL sourrounded by DL --> DL
      clean_map = clean_map.where({
        test: clean_map.eq(11)
                .and(nb12.gt(75)),
        value: ee.Image(12)
      })
      
      // DL sourrounded by SL --> SL
      clean_map = clean_map.where({
        test: clean_map.eq(12)
                .and(nb11.gt(75)),
        value: ee.Image(11)
      })
      
      // DL/SL surrounded by IRF --> IRF
      clean_map = clean_map.where({
        test: clean_map.eq(11).or(clean_map.eq(12))
                .and(objsize.lte(max_size))
                .and(nb13.gt(80)),
        value: ee.Image(13)
      })
      
      // SL surrounded by IRF --> IRF
      clean_map = clean_map.where({
        test: clean_map.eq(11)
                .and(objsize.lte(max_size))
                .and(nb13.gt(80)),
        value: ee.Image(13)
      });
      
    
    } else if (vars.geomorphic && vars.fast_clean) {
      print("Executing the fast version OBIA");
      
      /* fast version of the geo clean up
        - blanket version assigns the underlying most common in neighbourhood
        - mode OBIA version iterates through objects+buffers but take the mode instead of doing the class percs, to see if that speeds things up
      */
      
      
      // ## Blanket version
      
      // make a very smooth map to capture the broader neighbourhood  - *** Change to ee.kernal*** see reef mask in clean 3
      var smooth_map = clean_map
                          .focal_mode({
                            radius: vars.smooth_radius.multiply(3), // relates to smoothness required
                            kernelType: 'circle', units: 'pixels', iterations: 2
                          });
      
      // first make a make size threshold, so we're not vectorising huge objects when we don't have t
      // - the unmask(99) captures small no data values/ data gaps
      var segment_id = clean_map.unmask(0).connectedComponents(ee.Kernel.plus(1),vars.small_object_geo.sqrt().multiply(2)).select('labels').pow(2).log().int();
      Map.addLayer(clean_map.unmask(0).updateMask(segment_id.gt(0)).reproject(ee.Projection('EPSG:4326').atScale(ee.Number(vars.image_data_scale))), display_pal, 'Map objects to be iterated through (OBIA)', false);
      
      // replace small objects with smooth underneath
      var clean_map = clean_map.unmask(0).where({
        test: segment_id.gt(0), 
        value: smooth_map
      }).selfMask();
      
      
      // ## mode OBIA version
      
      /* A possible faster plan
            - vectorise one/few class/es at a time, thus only spending resources on what is actually needed to clean up
            - BUT, just assign the mode of the neighbours, so save resouces even further??
      
      // FUNCTION that maps over feature colleciton and assigns neighbour percentages
      var set_neighbour_mode = function(f) {
        // make the 1px buffer
        var diff = f.buffer(vars.image_data_scale).difference(f, ee.ErrorMargin(0.5))
        // reduce the classes in the buffer zone
        var diff_mode = ee.Number(ee.Dictionary(
          clean_map.unmask(ee.Image(0)).reduceRegion({
            reducer: ee.Reducer.mode(),
            geometry: diff.geometry(),
            scale: vars.image_data_scale,
            maxPixels: 1e11
          })).get('classification'))
        
        return(f.set('mode',diff_mode))
      }
      
      // FUNCTION to reduce the map to vectors and map the neighbour properties function
      var reduce_neighbours_mode = function() {
        // reduce map to vectors
        var map_fc = clean_map.unmask(0)
              .updateMask(classn.gt(0)) // only vectorise class/es of interest
              .reduceToVectors({
                scale: vars.image_data_scale, 
                eightConnected: false,
                bestEffort: true, 
                maxPixels: 1e13,
                tileScale: 1,
                geometry: region_extent
              })
        // map the function, calculate neighbour properties
        return(map_fc.map(set_neighbour_mode))
      }
      
      // first make a make size threshold, so we're not vecortising huge objects when we don't have to
      var segment_id = clean_map.unmask(0).connectedComponents(ee.Kernel.plus(1),vars.small_object_geo.sqrt()).select('labels')
      Map.addLayer(clean_map.unmask(0).updateMask(segment_id.gt(0)).reproject(ee.Projection('EPSG:4326').atScale(ee.Number(vars.image_data_scale))), display_pal, 'Map objects to be iterated through (OBIA)', false)
      
      // This is where we select the single or group of classes to vectorise for cleaning up
      var classn = segment_id.where({
        test: clean_map.neq(16) //TRF
                .and(clean_map.neq(15)) //RR
                .and(clean_map.neq(14)) //ORF
                .and(clean_map.neq(13)) //IRF
                //.and(clean_map.neq(12)) // deep L
                .and(clean_map.neq(11)) // shallow L 
                .and(clean_map.unmask(0).neq(0)), // no data values (want to reclaim the small gaps 
        value: ee.Image(0) // 99 ensures it's ignored in logic
      })
      
      // calculate neighbours
      var map_fc_neighbours = reduce_neighbours_mode()
      
      //print(map_fc_neighbours.limit(10))
      
      var mode_map = ee.Image().byte().paint(map_fc_neighbours, 'mode').unmask(0).rename('mode') // paint out the mode values to an image
      //Map.addLayer(mode_map, display_pal, "mode map", false)
      
      // replace small objects with mode underneath
      var clean_map = clean_map.unmask(0).where({
        test: segment_id.gt(0), 
        value: mode_map
      }).selfMask()
      
      */
      
    } else {
      
      if (vars.cleanup_stage == 1) {
        // BENTHIC CLEAN-UP RULES
        
        /*// reclaim shallow no data to surrounding class
        var smooth_map = clean_map
                            .focal_mode({
                              radius: vars.smooth_radius.multiply(3), // relates to smoothness required
                              kernelType: 'circle', units: 'pixels', iterations: 2
                            });
        
        var clean_map = clean_map.unmask(0).where({
          test: geo_map.gt(2).and(clean_map.eq(0)), 
          value: smooth_map
        }).selfMask();*/
        
        // cut benthic off to < 10 - 15 m
        clean_map = clean_map.where({
          test: depth.gt(vars.benthic_depth_cutoff),
          value: ee.Image(0)
        });
        
        // Deep (or land or missing) in geo == masked from benthic
        clean_map = clean_map.where({
          test: geo_map.unmask(0).lte(2),
          value: ee.Image(0)
        });
        
      }
    }
  }
  
  // Final clip to the classified extent and move on
  if (vars.geomorphic) {
    clean_map = clean_map.updateMask(clean_map.gt(1)); // this ignores 0/land; make it .gt(2) if you want to mask deep too
  } else {
    clean_map = clean_map.updateMask(clean_map.gt(1)); // this ignores 0/land; make it .gt(2) if you want to mask deep too
  }

  
  
  // 4. Export data
  
  var output_name = (vars.geomorphic) ? vars.geomorph_output_name : vars.benthic_output_name;
  
  if (vars.do_export) {
    print("For export, the image data scale must be set to:", vars.image_data_scale);
    
    Map.addLayer(region_extent, {}, "Export footprint", false);
    
    Export.image.toAsset({
      image: clean_map.set(vars),
      description: output_name,
      assetId: vars.asset_output + 'in_out/' + output_name,
      region: region_extent,
      scale: vars.image_data_scale,
      crs: 'EPSG:4326',
      maxPixels: 1e13,
      pyramidingPolicy: {'.default': 'mode'}
    });
    
  } else {
    if (vars.reproject_display) {
      Map.addLayer(clean_map.reproject(ee.Projection('EPSG:4326').atScale(vars.image_data_scale)), display_pal, output_name, true);
    } else {
      Map.addLayer(clean_map, display_pal, output_name, false);
    }
  }

}

//Generate title
var title = ui.Label({
  value: 'Classes',
  style: {fontWeight: 'bold', fontSize: '12px'}
});

// generate the legend
var geo_legend = pkg_vis.discrete_legend(map_palettes.geo_atlas_names, map_palettes.geo_atlas_cols, 'Geomorphic Zone', false);
var benthic_legend = pkg_vis.discrete_legend(map_palettes.benthic_atlas_names, map_palettes.benthic_atlas_cols, 'Benthic Habitat', false);
//var mask_legend = pkg_vis.discrete_legend(["Low confidence depth","Water conditions"], ["#f7f7f7","#bababa"], 'Confidence Mask reason', false)
var legend = (vars.geomorphic) ? geo_legend : benthic_legend;
pkg_vis.add_lgds([title, legend]);//, mask_legend])
// generate the legend
