/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var depth_pal = {"opacity":1,"bands":["depth"],"max":5,"palette":["e4e1ff","7f89ff","3a52ff","0007ff","000258"]},
    any_rrs = ee.Image("projects/coral_atlas/workflow/mapping/northern_caribbean/north_caribbean_bahamas_any_tide_normalized_sr_jan2018_nov2019_v2_shift_mosaic/20191219T041346Z/north_caribbean_bahamas_any_tide_normalized_sr_jan2018_nov2019_v2_shift_mosaic"),
    any_depth = ee.Image("projects/coral_atlas/workflow/mapping/northern_caribbean/north_caribbean_bahamas_any_tide_normalized_sr_jan2018_nov2019_v2_shift_mosaic/20191219T041346Z/north_caribbean_bahamas_any_tide_normalized_sr_jan2018_nov2019_v2_shift_mosaic_depth"),
    high_rrs = ee.Image("projects/coral_atlas/workflow/mapping/northern_caribbean/north_caribbean_bahamas_high_tide_normalized_sr_jan2018_nov2019_v2_shift_mosaic/20191217T172951Z/north_caribbean_bahamas_high_tide_normalized_sr_jan2018_nov2019_v2_shift_mosaic"),
    high_depth = ee.Image("projects/coral_atlas/workflow/mapping/northern_caribbean/north_caribbean_bahamas_high_tide_normalized_sr_jan2018_nov2019_v2_shift_mosaic/20191217T172951Z/north_caribbean_bahamas_high_tide_normalized_sr_jan2018_nov2019_v2_shift_mosaic_depth"),
    low_rrs = ee.Image("projects/coral_atlas/workflow/mapping/northern_caribbean/north_caribbean_bahamas_low_tide_normalized_sr_jan2018_nov2019_v2_shift_mosaic/20191218T154814Z/north_caribbean_bahamas_low_tide_normalized_sr_jan2018_nov2019_v2_shift_mosaic"),
    low_depth = ee.Image("projects/coral_atlas/workflow/mapping/northern_caribbean/north_caribbean_bahamas_low_tide_normalized_sr_jan2018_nov2019_v2_shift_mosaic/20191218T154814Z/north_caribbean_bahamas_low_tide_normalized_sr_jan2018_nov2019_v2_shift_mosaic_depth"),
    ncab = /* color: #0b4a8b */ee.Geometry.Point([-77.64269067777371, 22.111208619903458]),
    geo = ee.Image("projects/coral_atlas/nth_cari/in_out/nth_cari_geo"),
    benthic = ee.Image("projects/coral_atlas/nth_cari/in_out/nth_cari_benthic"),
    pixels = ee.Image("projects/coral_atlas/nth_cari/in_out/nth_cari_pixels"),
    geo_train = ee.FeatureCollection("projects/coral_atlas/nth_cari/training/nth_cari_geo_training"),
    wcmc = ee.FeatureCollection("projects/coral_atlas/global_datasets/wcmc_reefs_2018v4_dissolved"),
    bahamas = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-79.27871392650289, 27.537785351450797],
          [-79.27871392650289, 26.58390229138518],
          [-79.10842584056539, 26.588814612773167],
          [-79.09743951244039, 26.416758137113472],
          [-78.93813775462789, 26.426596871519802],
          [-78.92715142650289, 26.269076520676396],
          [-79.28420709056539, 26.274002276084023],
          [-79.27322076244039, 26.11627456764988],
          [-79.46548150462789, 26.11627456764988],
          [-79.44900201244039, 25.324457096008242],
          [-79.27871392650289, 25.324457096008242],
          [-79.27871392650289, 24.846857054564012],
          [-79.44900201244039, 24.846857054564012],
          [-79.44900201244039, 24.202172576991735],
          [-79.28970025462789, 24.197162138478074],
          [-79.28970025462789, 23.72530603032434],
          [-79.30068658275289, 23.554211197613927],
          [-79.10293267650289, 23.554211197613927],
          [-79.10293267650289, 23.23154632195048],
          [-78.92715142650289, 23.211353719210194],
          [-78.60854791087789, 22.756217121298516],
          [-77.90542291087789, 22.49255422896365],
          [-77.30117486400289, 21.97391165251205],
          [-77.18032525462789, 22.085937775799817],
          [-76.65298150462789, 22.096117570477723],
          [-76.64748834056539, 21.938248410859348],
          [-76.49917291087789, 21.943343707473968],
          [-76.44973443431539, 21.61177128135452],
          [-76.11465142650289, 21.627091467345146],
          [-76.12563775462789, 21.785304796161917],
          [-75.95534966869039, 21.78020385739581],
          [-75.92788384837789, 21.616878190401067],
          [-75.41152642650289, 21.6321978351743],
          [-75.41701959056539, 21.790405553431647],
          [-75.07644341869039, 21.785304796161917],
          [-74.35683892650289, 21.78020385739581],
          [-73.99429009837789, 21.448255160651303],
          [-73.83498834056539, 21.27943694004512],
          [-73.81301568431539, 20.80777207296826],
          [-73.29162148513431, 20.790438905513213],
          [-73.27514199294681, 20.65685755673189],
          [-72.96203164138431, 20.636296133854774],
          [-72.96752480544681, 20.970073280172112],
          [-72.77526406325931, 20.970073280172112],
          [-72.79174355544681, 21.2928708544558],
          [-72.59398964919681, 21.2928708544558],
          [-72.60497597732181, 21.620067996893418],
          [-72.60497597732181, 21.946526259459155],
          [-72.41820839919681, 21.941431076863278],
          [-72.41820839919681, 22.124742392441743],
          [-72.43468789138431, 22.42465361222859],
          [-72.59398964919681, 22.439886121983672],
          [-72.61046914138431, 22.607333163286974],
          [-73.29162148513431, 22.587047368621196],
          [-73.30260781325931, 22.744183956364978],
          [-73.48937539138431, 22.926438628296644],
          [-73.48937539138431, 23.254888313746864],
          [-74.19799355544681, 24.375535461842137],
          [-74.35180214919681, 24.370531859614733],
          [-74.36828164138431, 24.53054878186588],
          [-74.70336464919681, 24.535546033677694],
          [-74.70885781325931, 23.899313619306906],
          [-74.87914589919681, 23.894291348146655],
          [-74.89562539138431, 24.039857900931935],
          [-75.06042031325931, 24.049890908201313],
          [-75.07689980544681, 24.360524061336296],
          [-75.24169472732181, 24.370531859614733],
          [-75.25268105544681, 24.535546033677694],
          [-75.40648964919681, 24.54054308654121],
          [-75.41198281325931, 24.86990719887863],
          [-75.92284707107181, 24.84997056908839],
          [-75.93383339919681, 25.317627788565236],
          [-76.10412148513431, 25.3275584839267],
          [-76.10961464919681, 25.486338671947635],
          [-76.29638222732181, 25.501213589606753],
          [-76.31286171950931, 25.6449093879833],
          [-76.46667031325931, 25.649861337339598],
          [-76.48314980544681, 25.798324129951954],
          [-76.97753457107181, 25.798324129951954],
          [-76.99950722732181, 26.1341510278966],
          [-76.81823281325931, 26.119355376392768],
          [-76.82921914138431, 26.7440560464808],
          [-76.98302773513431, 26.739150404352177],
          [-76.98852089919681, 26.896025844601297],
          [-77.15880898513431, 26.90582334465163],
          [-77.18627480544681, 27.06246758775127],
          [-77.34557656325931, 27.052683714726534],
          [-77.34557656325931, 27.21889333897796],
          [-77.87292031325931, 27.204237729696594],
          [-77.87841347732181, 27.375099738773045],
          [-78.20800332107181, 27.37022161752178],
          [-78.21898964919681, 27.531085935309363]]]),
    floridaRefined = 
    /* color: #ef3dff */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-85.47133950271244, 29.907088075303662],
          [-85.47132877387638, 29.90709737543468],
          [-85.47132877387638, 29.907097375434653],
          [-85.46996621169681, 29.902177484893937],
          [-85.47133950271244, 29.907078775171804],
          [-85.45486001052494, 29.849782798284348],
          [-85.44936684646244, 29.724638924261964],
          [-85.41228798904056, 29.60650300155896],
          [-85.29045239204996, 29.56949113465488],
          [-85.12115029372806, 29.513328598891473],
          [-84.92614296950931, 29.530058536225535],
          [-84.86633326393839, 29.57080380334818],
          [-84.66904163624939, 29.68361169944839],
          [-84.49922200262868, 29.756434375071315],
          [-84.36799467426754, 29.7540366561001],
          [-83.93416101838685, 29.753055532415615],
          [-83.63799599685306, 29.577843108601403],
          [-83.50616005935306, 29.43202957940662],
          [-83.39080361404056, 29.31953840615644],
          [-83.21227578200931, 29.175752247140156],
          [-83.06425177740309, 29.02885925397843],
          [-82.95959023513431, 28.90921646491678],
          [-82.90740517654056, 28.7335527215074],
          [-82.86345986404056, 28.40791674725989],
          [-82.91015175857181, 28.209632389066947],
          [-82.8888283777562, 28.040512647551978],
          [-82.9177208900971, 27.87371323846384],
          [-82.81127480544681, 27.719606202212262],
          [-82.83736733474369, 27.606488976085636],
          [-82.75908974685306, 27.42379563855937],
          [-82.67119912185306, 27.28840757217842],
          [-82.59315851777721, 27.15954126733364],
          [-82.49299431649808, 26.97633103340992],
          [-82.37004558866798, 26.77567921703759],
          [-82.32798043056742, 26.57012133859653],
          [-82.0965449341725, 26.389142024341833],
          [-81.92542975812582, 26.33645564612232],
          [-81.94061129979731, 26.24608943584945],
          [-81.91507444963392, 26.175003549357047],
          [-81.75384372167231, 25.82902891653754],
          [-81.56432956151606, 25.759787274283223],
          [-81.43724436654503, 25.663960232452027],
          [-81.23199313573481, 25.383201096925024],
          [-81.25097369255313, 25.24671323302895],
          [-81.25945895604731, 25.23670811262743],
          [-81.26495212010981, 25.226769978519865],
          [-81.27319186620356, 25.211861254538636],
          [-81.27593844823481, 25.21683103220291],
          [-81.26495212010981, 25.214346168743205],
          [-81.26220553807856, 25.214346168743177],
          [-81.26322201881932, 25.219975224655286],
          [-81.27793191674596, 25.215666163790193],
          [-81.2552340099078, 25.224335696484506],
          [-81.25183737307192, 25.230504551694732],
          [-81.22646660720015, 25.217230260580223],
          [-81.10449263549593, 25.08352783948674],
          [-81.00855306909091, 24.855307240054398],
          [-81.10760701331476, 24.78643766448102],
          [-81.20132441655709, 24.91282160178854],
          [-81.4874251004763, 24.83641658853252],
          [-81.91802790020989, 24.656090122888568],
          [-82.09790392996926, 24.69945206865689],
          [-82.25434635714603, 24.521083026791512],
          [-82.34577825935892, 24.484629271943913],
          [-82.56722158985633, 24.458812187913257],
          [-82.85335946083744, 24.55879407842672],
          [-82.79060587955198, 24.616012656524628],
          [-82.72014761167411, 24.69059867929899],
          [-82.8541350947044, 24.759667254732427],
          [-82.98461255760851, 24.662933496588593],
          [-83.02551120214106, 24.54908370975728],
          [-82.4649456391705, 24.395603551036977],
          [-82.31671672682482, 24.42507911205079],
          [-82.16353762810789, 24.436789163944486],
          [-81.97056125487097, 24.404539217529752],
          [-81.66595309667231, 24.399095884817317],
          [-81.58355563573481, 24.391591806096166],
          [-81.33087008885981, 24.45183062391858],
          [-81.10839694432856, 24.516601520591202],
          [-81.04522555760981, 24.53159434458621],
          [-80.67443698339106, 24.651472416849487],
          [-80.53436129979731, 24.72633784226254],
          [-80.36956637792231, 24.711368355626856],
          [-80.34759372167231, 24.870949917015764],
          [-80.17181247167231, 24.880916942240432],
          [-80.19378512792231, 25.010415015215248],
          [-80.00701754979731, 25.03530286878476],
          [-80.08806788587965, 24.211017450581583],
          [-80.51104151869215, 24.110778248014654],
          [-80.62090479994215, 23.749268516703783],
          [-80.43413722181715, 23.47747512790226],
          [-80.47258937025465, 23.346411198580682],
          [-81.35149562025465, 23.35145451774019],
          [-81.36248194837965, 23.200071718292904],
          [-81.96672999525465, 23.220266026427893],
          [-81.93926417494215, 23.366583325190902],
          [-82.42815577650465, 23.371625877559268],
          [-82.40618312025465, 23.205120581446433],
          [-83.25762354994215, 23.210169253874778],
          [-83.30156886244215, 23.05862624568406],
          [-83.81243312025465, 23.038407586301112],
          [-83.81792628431715, 22.891731679615813],
          [-84.19146144056715, 22.881610240250595],
          [-84.18047511244215, 22.75913458676404],
          [-84.32329737806715, 22.70847057339254],
          [-84.48259913587965, 22.71860487750529],
          [-84.52654444837965, 22.55636613484518],
          [-84.72979151869215, 22.373619248254496],
          [-84.91655909681715, 22.18045915063246],
          [-85.11980616712965, 22.04814368781398],
          [-85.03740870619215, 21.823943335841964],
          [-84.92205226087965, 21.660667358207103],
          [-84.66936671400465, 21.7525329309246],
          [-84.50457179212965, 21.645350733112764],
          [-84.25188624525465, 21.732123428003423],
          [-84.09807765150465, 21.823943335841964],
          [-83.76299464369215, 21.869831219084233],
          [-83.40044581556715, 21.803543994006358],
          [-83.27410304212965, 21.558525855798006],
          [-83.08733546400465, 21.3182104331749],
          [-82.58745753431715, 21.3335615253175],
          [-82.09856593275465, 21.435861047511096],
          [-81.76348292494215, 21.51764908168643],
          [-81.14824854994215, 21.53808890748841],
          [-80.52202784681715, 21.486983952490537],
          [-80.51653468275465, 21.772939533397416],
          [-80.40667140150465, 21.864733293173153],
          [-80.29131495619215, 21.37448991601453],
          [-79.98369776869215, 21.30285773577692],
          [-79.83538233900465, 21.041617183707196],
          [-79.65153130923058, 19.502522248118726],
          [-80.6579950778204, 19.511042066999305],
          [-81.01494118481112, 19.185482627751345],
          [-81.45683167200424, 19.158197177516335],
          [-81.51339677273754, 19.35775299230689],
          [-81.436973747681, 19.52500105813073],
          [-80.93149440498227, 19.422114498185],
          [-80.24950921586188, 19.72111432448109],
          [-79.96172511244215, 19.7699833892658],
          [-79.64987309515884, 20.540792426843666],
          [-79.09380519056715, 20.672026619948713],
          [-78.88539233686099, 20.660453792272605],
          [-78.26466479779849, 20.274475807624444],
          [-78.07240405561099, 20.03210452112526],
          [-77.92958178998599, 19.85137184275122],
          [-77.808732180611, 18.6326225548415],
          [-76.98382062643326, 18.511650502348058],
          [-76.281632571236, 18.210477716227434],
          [-76.10305213992254, 18.38249346786331],
          [-76.04503463704114, 18.62740832722444],
          [-75.75780978342621, 18.648173607876835],
          [-75.63560477526352, 18.43963137506537],
          [-75.97335991629332, 18.074623662229033],
          [-75.99503643655535, 17.831627509780148],
          [-75.73130024679901, 17.73494614472808],
          [-75.62377343874034, 17.65541308560561],
          [-75.72928945977156, 17.500457848386546],
          [-75.90833930240417, 17.234101954833548],
          [-76.27253941238192, 17.22661418070071],
          [-76.33399497078507, 17.422199724019805],
          [-76.0954916828115, 17.478113606371554],
          [-75.95563962229883, 17.63862406758227],
          [-76.61947103992394, 17.7506384696158],
          [-76.7896139464079, 17.35155176920106],
          [-77.12707923845782, 17.33969262241924],
          [-77.21952234832906, 17.202270534481777],
          [-77.22737084931288, 17.02292107628064],
          [-77.41795993539347, 16.901261234927695],
          [-77.5466015844108, 16.77692045595952],
          [-77.67163450741238, 16.661754384632566],
          [-77.84982755757672, 16.74590376009118],
          [-78.13715746273867, 16.704032608884745],
          [-78.35302083809384, 16.519893909449777],
          [-78.40126544576115, 16.659087243967242],
          [-79.05712104452493, 16.650147800740736],
          [-79.0353214895427, 17.250765262417687],
          [-78.78710481798093, 17.26868381049317],
          [-78.73938160741265, 16.99908802993993],
          [-78.51804185682764, 16.94760069626169],
          [-78.33550079287625, 17.372887828946673],
          [-78.43570169068576, 17.53874437176847],
          [-78.3155338050581, 18.087325117442163],
          [-78.45804793478774, 18.26766514173918],
          [-78.26556007953, 18.51435212452836],
          [-77.72067516547001, 18.65613342090739],
          [-77.79051014157612, 19.255173828397343],
          [-76.99574389936099, 19.825536030878997],
          [-76.51783862592349, 19.866871311606186],
          [-75.71583667279849, 19.835870859975696],
          [-75.57301440717349, 19.81003252709572],
          [-75.50160327436099, 19.72732167373158],
          [-75.23243823529849, 19.815200529659812],
          [-74.88636889936099, 19.841038022386698],
          [-74.42494311811099, 19.964999394180733],
          [-74.39198413373599, 19.841038022386698],
          [-74.26014819623599, 19.835870859975696],
          [-74.21070971967349, 19.975325121036814],
          [-70.2995769071735, 20.670733217468822],
          [-70.35900587841186, 21.084794543815782],
          [-70.54440866432024, 21.160165346958976],
          [-70.81699445473078, 21.17471907260064],
          [-71.0302185154978, 21.084523702230555],
          [-70.98528365560537, 21.209475448729336],
          [-70.89005894072669, 21.366738670511072],
          [-70.9239549095249, 21.421762099267834],
          [-71.01380617907964, 21.398787368814897],
          [-70.96278846394387, 21.58312558805428],
          [-71.01467800926119, 21.660513331275844],
          [-71.14064314088807, 21.631332326421894],
          [-71.24982460293204, 21.531821308104895],
          [-71.31978678754427, 21.40397499255731],
          [-71.36609427779855, 21.22971159867547],
          [-71.49158422870886, 21.162367201305564],
          [-71.51780132871568, 21.375905249678667],
          [-71.4439645123249, 21.449901600036362],
          [-71.279912373502, 21.66983442095358],
          [-71.36968164215668, 21.803181818050813],
          [-71.50563464377535, 21.819662604173562],
          [-71.59669531074663, 21.903634811199673],
          [-71.71869483431877, 21.89284178516585],
          [-71.89232029563311, 22.054668715014024],
          [-72.04235875504217, 22.067135903535405],
          [-72.18861742207736, 21.95880095915916],
          [-72.34445401927022, 21.996251605678196],
          [-72.42532181194653, 21.93306792380226],
          [-72.46624395746241, 21.91854573024945],
          [-72.5312405234704, 21.822663702558373],
          [-72.58386653603436, 21.722110392544423],
          [-72.57304268792645, 21.602369635624612],
          [-72.4903847275913, 21.52137391089359],
          [-72.3794104362142, 21.436367887349327],
          [-72.2394872543194, 21.389552255953575],
          [-72.2726303824381, 21.357119862044694],
          [-72.19524535966057, 21.179808249521347],
          [-71.95166722256921, 20.938352317803513],
          [-71.60182018571226, 20.84590334772737],
          [-71.12236145935071, 20.96435752837541],
          [-71.21532430825569, 20.739666201309646],
          [-72.1414568053893, 20.431270192602035],
          [-73.32450130815756, 20.19058812077164],
          [-73.89370673878588, 20.088487730810943],
          [-74.04591479779849, 20.39809425329418],
          [-74.37001147748599, 20.44957271914411],
          [-74.63917651654849, 20.696428735919724],
          [-74.88636889936099, 20.78632874247081],
          [-75.10609546186099, 20.809437245234445],
          [-75.39723315717349, 20.829975163492286],
          [-75.50160327436099, 20.924926570950795],
          [-75.47688403607974, 21.053143713472434],
          [-75.54280200482974, 21.124897147008628],
          [-75.63343921186099, 21.186372473808962],
          [-75.82844653607974, 21.219660942713528],
          [-75.96852221967349, 21.176128359068073],
          [-76.20747485639224, 21.33994885453826],
          [-76.47663989545474, 21.406448781219726],
          [-76.67439380170474, 21.44991315499946],
          [-76.85566821576724, 21.59810577630913],
          [-76.90510669232974, 21.72063334585295],
          [-77.05067553998599, 21.809910642887534],
          [-77.17152514936099, 21.89658388986241],
          [-77.41871753217349, 22.008671064927952],
          [-77.64393725873599, 22.237664058950212],
          [-77.81422534467349, 22.3901186965936],
          [-77.89662280561099, 22.462476224972892],
          [-78.00923266889224, 22.51576814136303],
          [-78.21110644818911, 22.594399609989587],
          [-78.44731250287661, 22.683123126435568],
          [-78.60112109662661, 22.738862832379187],
          [-78.87303271772036, 22.845211879416357],
          [-79.14219775678286, 22.85027404941627],
          [-79.43333545209536, 22.890764622064786],
          [-79.80687060834536, 23.052605965137243],
          [-79.90025439740786, 23.087982893962458],
          [-79.86729541303286, 23.28995785881471],
          [-79.33995166303286, 23.28995785881471],
          [-79.37291064740786, 23.637644281609802],
          [-79.59263720990786, 23.803604162770824],
          [-79.64756885053286, 23.873947467447053],
          [-79.70250049115786, 24.154937810478643],
          [-79.82884326459536, 24.200039596773184],
          [-79.89476123334536, 24.31522720039631],
          [-79.99913135053286, 25.063870087910587],
          [-80.02659717084536, 26.030293692017096],
          [-79.89476123334536, 26.709465108161314],
          [-79.90025439740786, 27.535711763938604],
          [-80.12547412397036, 27.827577088731278],
          [-80.14744678022036, 28.21551240107926],
          [-80.82859912397036, 28.55380435593698],
          [-81.36692920209536, 28.77552109089948],
          [-81.34495654584536, 28.645439855914823],
          [-81.13621631147036, 28.60686622701456],
          [-81.00438037397036, 28.428279091088033],
          [-80.92198291303286, 28.012020645711768],
          [-80.86705127240786, 27.94895694993269],
          [-80.69127002240786, 27.914984308719248],
          [-80.70225635053286, 27.84214985455909],
          [-80.83409228803286, 27.847007008218167],
          [-80.82310595990786, 27.555193693093898],
          [-80.58689990522036, 27.51622638051895],
          [-80.32322803022036, 27.12090679371779],
          [-80.18040576459536, 26.655475015355478],
          [-80.19688525678286, 25.931533208927757],
          [-80.52647510053286, 25.674368795752923],
          [-80.59239306928286, 25.386875738985477],
          [-80.52098193647036, 25.32730855764189],
          [-80.72422900678286, 25.274760901067044],
          [-80.97691455365786, 25.274760901067044],
          [-81.19114795209536, 25.78036341927093],
          [-81.62510791303285, 26.012616761057423],
          [-81.85582080365785, 26.52490504780023],
          [-81.91624560834535, 26.706614123845924],
          [-82.02790281137382, 26.928820832561886],
          [-82.08832761606132, 27.036515190509405],
          [-82.40143796762382, 27.490625039730034],
          [-82.33551999887382, 27.9865356161812],
          [-82.62665769418632, 28.14649243908377],
          [-82.63619749703582, 28.305316017697038],
          [-82.50985472359832, 28.696338159631882],
          [-82.52633421578582, 29.191460264714678],
          [-82.64169066109832, 29.20584576620936],
          [-82.81197874703582, 29.378314141218517],
          [-83.09213011422332, 29.51225454421006],
          [-83.18551390328582, 29.521814948591928],
          [-83.23495237984832, 29.626919741398154],
          [-83.39425413766082, 29.70329080544689],
          [-83.65792601266082, 29.803439751151053],
          [-83.86666624703582, 29.83680048372292],
          [-84.11935179391082, 29.908250254810213],
          [-84.7290161624865, 29.908250254810213],
          [-85.415661670299, 29.908250254810213],
          [-85.46508675158945, 29.907191185515885],
          [-85.47131214294, 29.907078445032827],
          [-85.47134030799383, 29.907083601901718]]]),
    diffWestFlori = 
    /* color: #516ad6 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-81.88456494808199, 27.686438741723514],
          [-82.45585401058199, 28.26857738163213],
          [-82.34599072933199, 29.135841228878046],
          [-83.13700635433199, 29.900655091169604],
          [-85.07060010433199, 30.166968177621744],
          [-85.66386182308199, 29.862552012150267],
          [-85.64188916683199, 29.49984846966519],
          [-83.29081494808199, 28.982187416057798],
          [-83.26884229183199, 28.249223488196193],
          [-82.03837354183199, 25.604866468889778],
          [-81.42313916683199, 26.178108838339305]]]),
    diffBahamas = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[-79.07473582066122, 25.251896209960623],
          [-79.05825632847372, 25.035585789249854],
          [-79.07408764564498, 24.841327386241993],
          [-79.10979321205123, 24.694185382380862],
          [-79.13451245033248, 24.409384977405498],
          [-79.09606030189498, 24.13898001686532],
          [-78.96422436439498, 23.80770725614484],
          [-78.87908032142623, 23.624138972014784],
          [-78.78844311439498, 23.41511148016329],
          [-78.56871655189498, 23.124948936583294],
          [-78.39293530189498, 22.980895752342423],
          [-78.12926342689498, 22.88730520092207],
          [-77.86009838783248, 22.75059773346492],
          [-77.59367993080123, 22.55796282116804],
          [-77.27232983314498, 22.33203485041427],
          [-76.95097973548873, 22.367598451357146],
          [-76.72576000892623, 22.365058495184],
          [-76.53624584876998, 22.225289672592435],
          [-76.32201245033248, 22.199862156182697],
          [-76.16545727455123, 22.342196805274057],
          [-76.04460766517623, 22.362518492680877],
          [-75.95397045814498, 22.248170495822617],
          [-75.84685375892623, 22.199862156182697],
          [-75.87431957923873, 22.273589249429435],
          [-75.96770336830123, 22.542743303826775],
          [-75.95397045814498, 22.84934467571577],
          [-75.83037426673873, 23.018819422764857],
          [-75.61064770423873, 23.152730911720177],
          [-75.38817455970748, 23.24866066016089],
          [-75.90178539955123, 23.39998821257654],
          [-76.14623120033248, 23.412591055574197],
          [-76.13524487220748, 23.523444265039203],
          [-76.19841625892623, 23.6467846310531],
          [-76.51976635658248, 24.214150199834357],
          [-76.81874808794005, 24.468511226713545],
          [-76.87529731882027, 24.666925234366342],
          [-76.98694410080057, 24.715490364168442],
          [-76.81656100909146, 24.941305547976363],
          [-76.53596728278634, 25.068988760198863],
          [-76.2828572001948, 24.89621022444936],
          [-76.21545837844698, 25.01360638935682],
          [-76.17547719638976, 25.086094025236424],
          [-76.31527666839223, 25.19625116379202],
          [-76.4002629556257, 25.226386237481094],
          [-76.47714898730916, 25.28148727177418],
          [-76.5320679971112, 25.31915866567435],
          [-76.70813195028182, 25.395784608430056],
          [-76.86853453045902, 25.211069885033066],
          [-77.0963512019123, 25.069652023655248],
          [-77.38740451696613, 24.945417912433808],
          [-77.35951928050855, 24.79629115555902],
          [-77.15515250866196, 24.477787462130582],
          [-77.1122311976527, 24.21180287510491],
          [-77.02865798655021, 24.02359818757948],
          [-76.80125047619468, 24.018491531157625],
          [-76.58910410739118, 23.975869727600976],
          [-76.51701977455123, 23.868001947035854],
          [-76.45934155189497, 23.54107141098883],
          [-76.56096508705123, 23.294077014634905],
          [-76.96745922767623, 23.218374494034897],
          [-77.28606274330123, 23.271370772736397],
          [-77.51128246986373, 23.566248949850234],
          [-77.73650219642623, 23.55869619463424],
          [-77.95622875892623, 23.52596257332592],
          [-78.03587963783248, 23.757440282939537],
          [-77.97820141517623, 24.026141858996436],
          [-78.09081127845748, 24.1490052652216],
          [-78.19518139564498, 24.271750660948946],
          [-78.38744213783248, 24.42939204355077],
          [-78.57695629798873, 24.59183166464149],
          [-78.55773022376998, 24.70167138356656],
          [-78.39293530189498, 24.75156655642262],
          [-78.27208569251998, 24.89365783996766],
          [-78.24736645423873, 25.010697993052382],
          [-78.29680493080123, 25.07042022208943],
          [-78.31603100501998, 25.21214376646537],
          [-78.21990063392623, 25.281702009024983],
          [-78.37096264564498, 25.562013343406203],
          [-78.47258618080123, 25.62394090044484],
          [-78.60167553626998, 25.78727533330634],
          [-78.71977856361373, 25.861444052847517],
          [-78.91203930580123, 25.91333448800586],
          [-79.14824536048873, 25.90839352459463],
          [-79.20592358314498, 25.62394090044484]]]);
/***** End of imports. If edited, may not auto-convert in the playground. *****/
// little viewing script for looking at reefs and classifications for each region

// imports
var pkg_vis = require('users/mitchest/global_reefs:Modules/pkg_vis')
var map_palettes = require('users/mitchest/global_reefs:Modules/colour_pals')

// choose where to centre (link this dynamically to map app?)
//var centre_map = ncab
//Map.centerObject(centre_map, 10)
//splitting North Cari regions


// add some background data
//Map.addLayer(any_rrs, {bands: ['b3','b2','b1'], min: 66, max: 1260}, "Any tide mosaic", false)
//Map.addLayer(high_rrs, {bands: ['b3','b2','b1'], min: 66, max: 1260}, "High tide mosaic", false)
Map.addLayer(low_rrs, {bands: ['b3','b2','b1'], min: 66, max: 1260}, "Dove low tide mosaic", false)

//Map.addLayer(any_depth, {min: -1, max: 1200, palette:['#d0d1e6','#a6bddb','#74a9cf','#3690c0','#0570b0','#045a8d','#023858']}, "Any tide depth", false)
//Map.addLayer(high_depth, {min: -1, max: 1200, palette:['#d0d1e6','#a6bddb','#74a9cf','#3690c0','#0570b0','#045a8d','#023858']}, "High tide depth", false)
//Map.addLayer(low_depth, {min: -1, max: 1200, palette:['#d0d1e6','#a6bddb','#74a9cf','#3690c0','#0570b0','#045a8d','#023858']}, "Low tide depth", false)
Map.addLayer(pixels.select('depth'), {min: -1, max: 2500, palette:['#d0d1e6','#a6bddb','#74a9cf','#3690c0','#0570b0','#045a8d','#023858']}, "Depth covariate (S2/LS8/Dove)", false)

// nth cari
Map.addLayer(benthic.updateMask(geo.gt(2)), map_palettes.benthic, "Nth. Cari & Baha Benthic - RAW", false)
Map.addLayer(geo, map_palettes.geo, "Nth. Cari & Baha Geo - RAW", false)

// wave data
/*var kd1 = ee.Image('users/danleeharris/reefwave/fiji_v1_kd1')
var kd2 = ee.Image('users/danleeharris/reefwave/fiji_v1_kd2')

Map.addLayer(kd1, {}, "waves - kd1", false)
Map.addLayer(kd2, {}, "waves - kd2", false)*/

// add training data / sample point distributions
// ----> possibly - points are only intermediate in the mapping script, so will have to pull those out if we want that
//Map.addLayer(ee.Image().byte().paint(fiji_training_geo_oldmaps, 'class_num'), map_palettes.geo, "Training data - geo (old maps) ", false)
//Map.addLayer(ee.Image().byte().paint(fiji_training_geo, 'class_num'), map_palettes.geo, "Training data - geo (new maps)", false)
//Map.addLayer(ee.Image().byte().paint(fiji_training_benthic, 'class_num'), map_palettes.benthic, "Training - benthic (manual curation)", false)
Map.addLayer(geo_train, {}, "geomorphic training locations", false)

// WCMC
Map.addLayer(wcmc, {}, "WCMC layer", false)


//splitting North Cari regions (RB)
var everythingElseButBahamas =floridaRefined.difference(diffWestFlori, ee.ErrorMargin(1));
Map.addLayer(everythingElseButBahamas, {color: 'FFFF00'}, 'everythingElseButBahamas');
Map.addLayer(bahamas,{color: '0f0fff'}, 'Bahamas' )

//refining bahamas (RB)
var bahamasRefined =bahamas.difference(diffBahamas, ee.ErrorMargin(1));
Map.addLayer(bahamasRefined, {color: '00FF00'}, 'bahamasRefined');




// #############
// example confidence layers

/*// depth and nir combos
var depth_nir_flag = fiji_dove_ocean.select('b4').multiply(fiji_high_depth_ocean).gt(250000)
//Map.addLayer(depth_nir_flag, {}, "NIR flag", false)
var conf_flag = fiji_high_depth_ocean.eq(-1)
                        .or(fiji_high_depth_ocean.gt(1000))
                        .add(depth_nir_flag.eq(1))
                        .selfMask()
Map.addLayer(conf_flag, {min:1,max:2,palette:["#f7f7f7","#bababa"]}, "Confidence flag", false)

//straight depth missing/-1
var depth_flag = fiji_high_depth_ocean.gt(0).selfMask()
//Map.addLayer(depth_flag, {min:0,max:1,palette:["#ffff00"]}, "Valid depth retrievals", false)

//Map.addLayer(fiji_geo_clean.gt(0).updateMask(fiji_high_depth_ocean.lte(0)), {min:0,max:1,palette:["#ff0000"]}, "Unmapped area via original algorithm", false)
*/

////////// UI SET UP //////////

//Generate title
var title = ui.Label({
  value: 'Coral Atlas map classes',
  style: {fontWeight: 'bold', fontSize: '18px'}
})

// generate the legend
var geo_legend = pkg_vis.discrete_legend(map_palettes.geo_atlas_names, map_palettes.geo_atlas_cols, 'Geomorphic Zone', false)
var benthic_legend = pkg_vis.discrete_legend(map_palettes.benthic_atlas_names, map_palettes.benthic_atlas_cols, 'Benthic Habitat', false)
//var mask_legend = pkg_vis.discrete_legend(["Low confidence depth","Water conditions"], ["#f7f7f7","#bababa"], 'Confidence Mask reason', false)
pkg_vis.add_lgds([title, geo_legend, benthic_legend])//, mask_legend])
// generate the legend




///////// LINK TO DATA EXPORT /////////
// hopefully eventually we can link this to a download link in the app?

// // map to export 
// var export_map = gbr_geo_map10
// // extent
// var export_convhull = export_map.gt(0).reduceToVectors({scale: 1000, maxPixels: 1e13, bestEffort: true, geometry: export_map.geometry().bounds()}).geometry().convexHull({maxError: 100})
// // export
// Export.image.toDrive({
//     image: export_map,
//     description: 'gbr_sent2_geo_map',
//     folder: 'GBR Mapping',
//     region: export_convhull,
//     scale: 10,
//     maxPixels: 1e13
// })

var places = {
  bahamas_BluePoly: [-76.54718473709681, 24.115946758898467],
  everythingElseButBahamas_yellowPoly: [-81.07355192459681, 22.420447181024812],
  bahamasRefined_greenPoly:[-76.54718473709681, 24.115946758898467]
};

var select = ui.Select({
  items: Object.keys(places),
  onChange: function(key) {
    Map.setCenter(places[key][0], places[key][1], 7);
  }
});

// Set a place holder.
select.setPlaceholder('Choose a split...');

print(select);
