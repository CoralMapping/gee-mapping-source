/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var wcmc = ee.FeatureCollection("projects/coral_atlas/global_datasets/wcmc_reefs_2018v4_filtered"),
    Hs95 = ee.Image("users/EvaK/Whit_eomap/mosaics/whit_Hs95"),
    S2 = ee.Image("users/EvaK/Whit_eomap/mosaics/whit_S2"),
    depth = ee.Image("users/EvaK/Whit_eomap/mosaics/whit_depth"),
    pixels = ee.Image("users/EvaK/Whit_eomap/in_out/whit_pixels"),
    segments = ee.Image("users/EvaK/Whit_eomap/in_out/whit_segmentation"),
    centre = /* color: #d63000 */ee.Geometry.Point([148.75488810629244, -20.15294144497883]),
    geo_raw = ee.Image("users/EvaK/Whit_eomap/in_out/whit_geo"),
    geo_clean = ee.Image("users/EvaK/Whit_eomap/in_out/whit_geo-clean");
/***** End of imports. If edited, may not auto-convert in the playground. *****/
// little viewing script for looking at reefs and classifications for each region. 
//From this region Andaman Sea onwards the map_viewer script is going to be used from the very beginning
//in the workflow 

// imports
var pkg_vis = require('users/mitchest/global_reefs:Modules/pkg_vis')
var map_palettes = require('users/mitchest/global_reefs:Modules/colour_pals')

// choogse where to centre (link this dynamically to map app?)
var centre_map = ee.Geometry.Point([148.75488810629244, -20.15294144497883])
Map.centerObject(centre_map, 7)



// add some background data
Map.addLayer(S2, {bands: ['b3','b2','b1'], min: 66, max: 1260}, "s2 pretty picture", false)
//Map.addLayer(southasia_dove, {bands: ['b3','b2','b1'], min: 66, max: 1260}, "south asia - Dove low tide mosaic", false)
//Map.addLayer(Artifact_layer, {color: 'ffff00'}, 'Artifact Layer', false)

// Whitsundays
Map.addLayer(pixels, {color:'#20639b'}, "pixels", false)
Map.addLayer(segments, {color:'#3caea3'}, "segments", false)
Map.addLayer(geo_raw, map_palettes.geo, "Whitsundays Geo - RAW", false)
Map.addLayer(geo_clean, map_palettes.geo, "Whitsundays Geo-clean", false)

//Map.addLayer(benthic.updateMask(geo.gt(2)), map_palettes.benthic, "Andaman + Myanmar Benthic - RAW", false)
//Map.addLayer(benthic_clean, map_palettes.benthic, "Nth. Cari & Baha Benthic - FINAL", false)

//Map.addLayer(geo_clean1, map_palettes.geo, "geo_clean_1", false)
//Map.addLayer(geo_clean2, map_palettes.geo, "geo_clean_2", false)
//Map.addLayer(geo_clean3, map_palettes.geo, "geo_manual", false)
//Map.addLayer(ben_clean1, map_palettes.benthic, "ben_clean_1", false)
//Map.addLayer(ben_clean2, map_palettes.benthic, "ben_FINAL", false)
//Map.addLayer(ben_clean2b, map_palettes.benthic, "ben_FINAL-less rubble", false)

/*
// wave data
var kd1 = ee.Image('users/danleeharris/reefwave/fiji_v1_kd1')
var kd2 = ee.Image('users/danleeharris/reefwave/fiji_v1_kd2')

Map.addLayer(kd1, {}, "waves - kd1", false)
Map.addLayer(kd2, {}, "waves - kd2", false)*/

// add training data / sample point distributions

Map.addLayer(wcmc, {color:'#ffff00'}, "WCMC layer", false)

////////// UI SET UP //////////


//Generate title
var title = ui.Label({
  value: 'Coral Atlas map classes',
  style: {fontWeight: 'bold', fontSize: '18px'}
})

// generate the legend
var geo_legend = pkg_vis.discrete_legend(map_palettes.geo_atlas_names, map_palettes.geo_atlas_cols, 'Geomorphic Zone', false)
var benthic_legend = pkg_vis.discrete_legend(map_palettes.benthic_atlas_names, map_palettes.benthic_atlas_cols, 'Benthic Habitat', false)
//var mask_legend = pkg_vis.discrete_legend(["Low confidence depth","Water conditions"], ["#f7f7f7","#bababa"], 'Confidence Mask reason', false)
pkg_vis.add_lgds([title, geo_legend, benthic_legend])//, mask_legend])
// generate the legend