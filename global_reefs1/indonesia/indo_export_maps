/**** Start of imports. If edited, may not auto-convert in the playground. ****/
var reef_boundary = ee.FeatureCollection("projects/coral_atlas/Indonesia/in_out/indo_extent"),
    pixels = ee.Image("projects/coral_atlas/Indonesia/in_out/indo_pixels"),
    benthic = ee.Image("projects/coral_atlas/Indonesia/in_out/indo_benthic_clean2_v12"),
    geo = ee.Image("projects/coral_atlas/Indonesia/in_out/indo_geo_clean3_v12"),
    ex1 = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[98.73024633799542, 1.5232323742126528],
          [98.73805693064679, 1.5232323742126528],
          [98.77094165105791, 1.520621929845537],
          [98.81076709051104, 1.532977160946496],
          [98.86432544012041, 1.6578981723187198],
          [98.79566088933916, 1.7677123503580117],
          [98.48804370183916, 2.0216320846694233],
          [97.75620374792487, 2.4964906705334293],
          [97.69028577917487, 2.8860743909290836],
          [96.79490003698737, 3.905995118443031],
          [96.550455119542, 3.9114665598671055],
          [95.517740275792, 5.0259094426927415],
          [95.41062357657324, 5.504531813256361],
          [95.72373392813574, 5.531870348479409],
          [95.74570658438574, 5.772394293711742],
          [95.12958602937545, 6.10250026656407],
          [95.0444419864067, 6.045145829424573],
          [94.95243148835982, 5.751451721772164],
          [94.99827362449275, 5.278712875542009],
          [95.34983612449275, 2.791195321373916],
          [97.68992401511775, 0.19952614901668003],
          [98.06345917136775, 0.3313606426115838],
          [98.61575692409775, 1.0468299990270384],
          [98.63772958034775, 1.3351585046186836],
          [98.67618172878525, 1.5108854733150805]]]),
    ex2 = 
    /* color: #98ff00 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[110.28776997647594, -6.598350827872213],
          [111.79289692960094, -7.187321992382871],
          [111.96867817960094, -8.438995052218656],
          [113.05632466397594, -8.623695935779455],
          [114.00114888272594, -8.873441357692128],
          [115.49528950772594, -8.949417335769505],
          [116.11563454335067, -8.968139119954923],
          [116.71988259022567, -9.15528791790039],
          [117.83224831288192, -9.046807731959793],
          [118.95010719960067, -8.905734641952986],
          [119.27420387928817, -8.753748905998355],
          [119.29617653553817, -8.612563662080108],
          [119.34012184803817, -8.457742385530286],
          [119.40137288314315, -8.338223880343453],
          [118.57739827376815, -7.162560754891685],
          [114.82007405501815, -5.3497687299284795],
          [114.35864827376815, -5.295073930562005],
          [109.99707600814315, -5.5028880017901525]]]),
    ex3 = 
    /* color: #0b4a8b */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[119.37557069660056, -0.73204452348828],
          [118.56258241535056, -2.532996748543414],
          [118.78230897785056, -3.6958074665022056],
          [119.24373475910056, -3.9808109814747015],
          [118.71639100910056, -4.353357992019815],
          [118.87019960285056, -5.447957658375854],
          [119.11189882160056, -5.732243437104268],
          [119.99080507160056, -5.7541058002872845],
          [120.12264100910056, -7.260407028235666],
          [121.19930116535056, -7.761440364835189],
          [122.38582460285056, -7.543670864957899],
          [122.45174257160056, -6.846086787596049],
          [121.52889100910056, -6.627877542617257],
          [120.93562929035056, -5.229184341309914],
          [120.6011378744779, -3.720602452221072],
          [120.50136260250878, -3.483350590655672],
          [119.27089385250878, -3.2201299786991977],
          [119.74971615322306, -0.8531224181670927],
          [119.79228817470744, -0.7679869029704571],
          [119.78404842861369, -0.7007011739088299],
          [119.72911678798869, -0.6128163314934162]]]),
    ex4 = 
    /* color: #ffc82d */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[123.76936263533469, -7.673564188193283],
          [122.36311263533469, -7.6517877419293905],
          [120.91291732283469, -8.10885484177306],
          [119.47370833845969, -8.337195577289725],
          [119.34187240095969, -8.478482799926814],
          [119.31989974470969, -8.619718106102734],
          [119.27595443220969, -8.945442999121747],
          [118.91340560408469, -9.335927562349948],
          [118.71565169783469, -9.639336543387241],
          [120.66023177595969, -10.860953651798692],
          [122.97834701033469, -11.238345938432884],
          [124.29670638533469, -10.310188618227263],
          [123.90119857283469, -9.22750271183173],
          [125.24153060408469, -8.424147658544516],
          [125.20857161970969, -7.891266811457014]]]),
    ex5 = 
    /* color: #00ffff */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[127.94229265655196, -0.9553598505387793],
          [127.34903093780196, -0.9663446338181888],
          [127.00845476592696, -1.504547589072299],
          [124.20694109405196, -1.4715997204983262],
          [123.89932390655196, -1.8120355740430811],
          [124.13003679717696, -2.1743644411181733],
          [125.63516375030196, -2.130450134938346],
          [126.00869890655196, -2.580507836149531],
          [126.19546648467696, -2.5366063329216955],
          [126.21743914092696, -2.163385983369615],
          [128.90359636748946, -1.768111708495517],
          [129.10684343780196, -1.3123450234621048],
          [129.10135027373946, -1.0706982462250796],
          [128.27874895538008, -0.7150596324060079],
          [128.03704973663008, -0.7727329912941812]]]),
    ex6 = 
    /* color: #bf04c2 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[131.63244535614916, -4.061559069075346],
          [130.58325102021166, -2.7784749184909896],
          [129.25390531708666, -2.591912491183601],
          [125.85912992646166, -2.9979222400060115],
          [125.94702055146166, -3.677914992107772],
          [127.05663969208666, -4.280703496283417],
          [128.73754789521166, -4.434067465710027],
          [127.26537992646166, -5.626942729462278],
          [127.35327055146166, -5.779989856507617],
          [129.01220609833666, -4.653103371825349],
          [130.37451078583666, -4.78449241569156],
          [130.48437406708666, -4.2697477380650986],
          [130.89086820771166, -4.225923145117008],
          [131.20947172333666, -4.324524957131902],
          [131.31933500458666, -4.466927070024365]]]),
    ex7 = 
    /* color: #d63000 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[101.9507082681799, -5.240126583887087],
          [101.9452151041174, -5.338582491130773],
          [102.12648951817988, -5.611987288250454],
          [103.77443873692988, -5.376866646443842],
          [104.51052272130482, -6.068284562007269],
          [105.43512491745128, -6.20487739502164],
          [105.54773478073253, -6.128418098155662],
          [105.99989329778384, -5.792770510181601],
          [105.93946849309634, -5.585058485979223],
          [103.09400950872134, -4.5125916014088485],
          [102.80836497747134, -4.758975125943415],
          [102.35243236028384, -5.021686921809685],
          [101.96791087590884, -5.20771075089831]]]),
    ex8 = 
    /* color: #98ff00 */
    /* shown: false */
    ee.Geometry.MultiPolygon(
        [[[[96.7641304013656, -12.042136850373302],
           [96.70645217870936, -12.283780139651729],
           [97.00720291113123, -12.244863595635103],
           [96.89184646581873, -12.023333198973836]]],
         [[[105.45231195256821, -10.632407605667646],
           [105.78464837834946, -10.621609709268672],
           [105.78464837834946, -10.343433490368358],
           [105.48527093694321, -10.36775007901382]]]]),
    ex9 = 
    /* color: #0b4a8b */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[119.71654352382814, -0.5643523655496587],
          [119.80443414882814, -0.7291367320630918],
          [119.79048294835201, -0.7868698773531214],
          [119.81520218663326, -0.8871094121815812],
          [120.17848393230122, -0.9898298476653403],
          [120.51356694011372, -1.3687771921036733],
          [120.81569096355122, -1.5445015692645108],
          [121.3041510840182, -1.9563148703835311],
          [121.3371100683932, -2.0167033579744755],
          [121.45647018021612, -1.9553454140481663],
          [121.54676406449346, -1.963237220902696],
          [121.5927693135169, -1.9766188951157073],
          [121.63911788529424, -1.99617653243256],
          [121.78316132894349, -2.1174239944835445],
          [121.84071543525386, -2.041957876841398],
          [121.9588184625976, -1.9074553119632898],
          [122.0631885797851, -1.8168659804071734],
          [122.20326426337886, -1.7015639259605388],
          [122.3158741266601, -1.6411648310794185],
          [122.64474673965907, -1.6066579516671136],
          [122.83151431778407, -1.8702082351165445],
          [122.75461002090907, -2.1776331519553724],
          [123.27096744278407, -2.6057257125046487],
          [124.04001041153407, -2.1337189400083068],
          [123.86422916153407, -1.8153050049348967],
          [123.88620181778407, -1.2661893053887228],
          [123.67746158340907, -0.5576654109987637],
          [122.69418521622157, -0.11272785432115966],
          [122.08993716934657, -0.13470045921576332],
          [121.56259341934657, -0.06878259802737031],
          [121.40329383341637, -0.14122612013904556],
          [121.46371874508053, -0.5102956747821327],
          [121.05172224302257, -1.1265045049848208],
          [120.39526355504354, -0.5777463013237866],
          [120.20578239295062, -0.1772714037260743],
          [120.3074058432171, 0.08983291800712795],
          [120.40902896622163, 0.20862170962634574],
          [120.42273629229787, 0.29973844674613154],
          [120.47492135089163, 0.38488096232630603],
          [120.54633248370413, 0.4782620919438881],
          [120.45499578208626, 0.6669992607015183],
          [120.38615154518578, 0.8000137441736419],
          [120.39799618019555, 0.8152900888280851],
          [120.42910060905149, 1.1122196799484607],
          [120.30001125358274, 1.0984893253317631],
          [120.10775051139524, 0.9474514339413206],
          [119.76442775748899, 0.5876820651133166],
          [119.52272853873899, -0.00556934876498078]]]),
    ex10 = 
    /* color: #ffc82d */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[129.79712331613825, -2.155004840469433],
          [130.52222097238825, -2.4404194165543243],
          [131.65381276926325, -2.8464801459822193],
          [134.12573659738825, -0.9140192708689069],
          [134.64209401926325, 1.1183416441489475],
          [131.23844844758372, 1.15680955820916],
          [130.49247745547598, 0.6830737972210018],
          [129.78935245547598, 0.4084283166608512],
          [129.93217472110098, -0.09693927179249588],
          [129.27299503360098, -0.9867831095373406],
          [129.00932315860098, -2.019128687876793]]]),
    ex11 = 
    /* color: #00ffff */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[131.65441801239916, -4.138266553740586],
          [131.29186918427416, -4.554545455217338],
          [132.12683012177416, -6.369917331559175],
          [133.33532621552416, -6.850101017918112],
          [134.51086332489916, -7.3406981700996905],
          [135.15905668427416, -6.773739605605842],
          [135.20300199677416, -5.616009237315347],
          [134.76354887177416, -5.025306349265254],
          [134.78552152802416, -3.7436947556439644],
          [133.34631254364916, -3.217325552205205],
          [132.52233793427416, -2.9869508924730512],
          [132.15978910614916, -3.381847225457353]]]),
    ex12 = 
    /* color: #bf04c2 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[124.13191146345969, -9.455155935476638],
          [124.65925521345969, -9.465992837859028],
          [125.69197005720969, -9.314245277852796],
          [126.29621810408469, -9.194968737536053],
          [127.47175521345969, -8.554539084820952],
          [129.0647727915847, -8.467616384519006],
          [130.8885032603347, -8.445882633635852],
          [132.2398216197097, -7.619120988490509],
          [132.4815208384597, -7.11792501683426],
          [131.6905052134597, -6.550697674968391],
          [129.8777610728347, -6.168543173023968],
          [129.0977317759597, -6.648919372977853],
          [127.90022201033469, -7.139727816107472],
          [125.75788802595969, -7.542888892344738],
          [125.31843490095969, -8.456749662294602],
          [124.04402083845969, -9.238346703569036]]]),
    ex13 = 
    /* color: #ff0000 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[98.5779763388606, 0.6882200085918666],
          [97.9737282919856, 0.11694741500387079],
          [97.7540017294856, -0.014888441124870264],
          [98.4296609091731, -1.1354195884044567],
          [99.90517220458376, -2.866333685688956],
          [100.61928353270878, -3.8479105961125426],
          [101.0328618512807, -4.045623034947539],
          [101.08367361885882, -4.015485357008651],
          [100.94504054478489, -2.212824894373171],
          [100.91208156040989, -1.9273670756422319],
          [100.64840968540989, -1.312381523850404],
          [100.34079249790989, -0.6862591849459589],
          [99.92880519322239, -0.29625962541193007],
          [99.81344874790989, -0.010616414252749031],
          [99.37948878697239, 0.2585477472877359],
          [99.23666652134739, 0.2805201602759268],
          [99.12680324009739, 0.6924917254714293],
          [98.82467921665989, 1.4613930741452663],
          [98.73800526935537, 1.5230933174288461],
          [98.73551617938955, 1.5231576677008],
          [98.73028050739248, 1.523114767519718]]]),
    ex14 = 
    /* color: #00ff00 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[114.41862935147594, -5.14487489558267],
          [116.40715474210094, -5.954045921445623],
          [118.46159810147594, -6.991079970827654],
          [118.69231099210094, -7.198221863632983],
          [119.40642232022594, -6.871113553861147],
          [119.17570942960094, -6.0086785035836945],
          [118.68132466397594, -5.4511775344186315],
          [118.62639302335094, -4.893158422426255],
          [118.14299458585094, -2.49232507336212],
          [117.73408516133532, -2.0829495445687503],
          [116.92659004414782, -2.110396976793058],
          [116.81123359883532, -2.4177736545983177],
          [115.87739570821032, -3.4052545672784698],
          [115.50386055196032, -3.810942118689435],
          [114.55903633321032, -4.928272420399418]]]),
    ex15 = 
    /* color: #0000ff */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[121.20513322782335, -2.4925638192774313],
          [120.29326799344835, -2.8437446393492087],
          [120.29326799344835, -2.9973534122392955],
          [120.62285783719835, -3.3319249485827074],
          [121.17217424344835, -4.64706055684161],
          [121.91924455594835, -5.719302302073118],
          [122.55645158719835, -6.3311350220125275],
          [122.88604143094835, -6.3311350220125275],
          [123.08379533719835, -5.981600565713545],
          [123.67705705594835, -6.265614933340032],
          [124.79766252469835, -6.3311350220125275],
          [124.70977189969835, -5.303752817254088],
          [124.27031877469835, -5.106814539458737],
          [123.30308286940613, -4.94927687420713],
          [123.28660337721863, -3.618197316006376],
          [123.23716490065613, -3.3824320800102288],
          [122.12754576003113, -2.6473719865825664],
          [121.79315481285772, -2.1530995005033904],
          [121.75264272789678, -2.140405474062813],
          [121.73435080269417, -2.1459918137859764],
          [121.57642233589729, -1.999145841585856],
          [121.56268942574104, -1.9785588855561043],
          [121.51874411324104, -1.9675790710155259],
          [121.45419943550667, -1.962089136613038],
          [121.35257590035042, -2.0183601009807592]]]),
    ex16 = 
    /* color: #999900 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[127.1265577932707, -0.8894504274843948],
          [127.90933367217696, -0.8894504274843948],
          [128.04666277373946, -0.7521354499695827],
          [128.21557756866133, -0.7226121385522426],
          [128.24578997100508, -0.7164328162697103],
          [128.28424211944258, -0.6992679886490974],
          [128.63992449248946, -0.7088802999476599],
          [128.62756487334883, -0.6196223917093093],
          [128.15121196572, 0.2554951039880139],
          [129.480557668845, -0.3487499426153993],
          [129.744229543845, 0.002810403858339263],
          [129.238858450095, 0.8926668661141123],
          [128.87630962197, 1.090391063417502],
          [128.76644634072, 2.759311534266323],
          [128.184170950095, 2.583721397680933],
          [127.60189555947, 2.2763812111523953],
          [127.08948362249977, 1.9086441921827677],
          [126.26980327431374, 1.3210527153194511],
          [126.08852886025124, 0.9393527923364873],
          [126.77109867974474, 0.3287072095414502],
          [126.96885258599474, -0.6600459189671264]]]),
    ex17 = 
    /* color: #009999 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[120.4008448283052, 0.8166456640513239],
          [120.38779856365676, 0.7994812336070696],
          [120.40135981243606, 0.7739060996028],
          [120.43373383062169, 0.7135274336306766],
          [120.50308502691075, 0.5741472302942584],
          [120.55115021245763, 0.47664767933429986],
          [120.49278534429357, 0.366100759353233],
          [120.63011444585607, 0.27958480702608685],
          [121.25084198491857, 0.2342666603253989],
          [124.25673381867983, 0.20599272145183786],
          [124.77309124055483, 0.7017336775373962],
          [124.81017009797671, 0.9283036229781465],
          [124.74219219270327, 0.968123607972962],
          [124.5602862889325, 1.2217293326418914],
          [124.48887515612, 1.2248185332189547],
          [124.28205869877019, 1.1750395680818153],
          [123.93049619877019, 0.9278890003300317],
          [123.04609678470769, 1.0981504081531863],
          [122.43635557377019, 1.1722935622751727],
          [121.55744932377019, 1.1887695564976908],
          [121.49702451908269, 1.359015491899323],
          [120.89277647220769, 1.4688453051423251],
          [120.63459776127019, 1.2491806838263815],
          [120.50276182377019, 0.9141578644750872]]]),
    ex18 = 
    /* color: #ff00ff */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[106.15839220483804, -3.4336942134484154],
          [108.70722032983804, -3.565284292952277],
          [109.16864611108804, -3.1046411833167937],
          [109.27850939233804, -1.9082989041850777],
          [108.27875353296304, 0.11283248854689625],
          [107.63605333765054, 1.2498183945185768],
          [107.41083361108804, 1.2278508743091618],
          [107.28998400171307, 1.1097724409688143],
          [107.14990831811932, 0.8626168661904151],
          [107.02081896265057, 0.7664962208744749],
          [106.94391466577557, 0.7198082551311556],
          [106.86701036890057, 0.2941056839734548],
          [108.044342391316, -1.7228009398097472],
          [107.76184777838674, -2.067813036140505],
          [106.86405848197559, -1.9075521263561583],
          [106.07949823142474, -1.2353112641743353],
          [105.39067845229924, -1.4354892533916994],
          [104.84761150065185, -2.033530423267583]]]),
    ex19 = 
    /* color: #ff9999 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[105.07071577516751, -6.5301477838811195],
          [105.01578413454251, -6.737490334097906],
          [105.47720991579251, -7.091948352594788],
          [106.26273237673001, -7.533274521939351],
          [107.16910444704251, -7.604063495854576],
          [107.92716108766751, -7.849011434408432],
          [108.47922407594876, -5.779196762207282],
          [106.56210981813626, -5.456657211646275],
          [106.10068403688626, -5.743671562888638],
          [105.41403852907376, -6.243546881667944]]]),
    ex20 = 
    /* color: #99ff99 */
    /* shown: false */
    ee.Geometry.Polygon(
        [[[124.5610912013027, 1.2249656472841122],
          [124.58993031263083, 1.1844625180789872],
          [124.6819408106777, 1.0588304925683711],
          [124.74442555188864, 0.9695805698995321],
          [124.78905750989645, 0.9428051244283268],
          [124.80622364759176, 0.9379992532753108],
          [124.95522572278708, 0.9531033973746821],
          [125.13659955042317, 1.3392840356646782],
          [125.29040814417317, 1.3832169450518224],
          [125.50189496057942, 2.35772226737102],
          [125.48816205042317, 2.8214193520164415],
          [125.8668526282645, 3.4134150060619044],
          [127.1083077063895, 3.5121114236175046],
          [127.3609932532645, 4.936417055169269],
          [125.3285225501395, 4.826952314383404],
          [125.28142533512289, 4.06382896145846],
          [125.30055544325114, 3.5309789234993523],
          [124.99293825575114, 2.543610645963844],
          [124.68532106825114, 1.808062431322257],
          [124.45460817762614, 1.34681276274955],
          [124.49306032606364, 1.2589448688958433]]]),
    v1_geo = ee.Image("projects/coral_atlas/Indonesia/in_out/indo_geo_clean3x");
/***** End of imports. If edited, may not auto-convert in the playground. *****/

///////////////////////////////
// Global coral atlas project - Indonesia
// Contact: mitchell.lyons@gmail.com
// Region coordinator: 
// Description:
// - export geomorphic and benthic to Vulcan bucket
///////////////////////////////

// so we can visualise maps before export
var map_palettes = require('users/mitchest/global_reefs_modules:colour_pals');

// will need to import depth mosaic from pixels now
var depth = pixels.select('depth'); //.multiply(100).uint16()


// finalise layers (include 'mapped area' as zeros)
geo = geo.where(geo.lte(2), 0).selfMask()
///////########################################################//////////
///////  TEMPORARY TO KEEP ALIGNED WITH CURRENT ATLAS VERSION ///////////
         .updateMask(v1_geo.gt(2));
benthic = benthic.updateMask(geo.gt(0)).selfMask();

// make reef/non-reef layer 
var reef_top = geo.eq([11,13,14,15,16,25,26]).reduce(ee.Reducer.sum());
var reef_all = geo.eq([11,12,13,14,15,16,21,22,23,24,25,26]).reduce(ee.Reducer.sum());
var reef_layer = reef_top.addBands(reef_all).reduce(ee.Reducer.sum());

// check before export 
//Map.addLayer(lowtide_sr, {"opacity":1,"bands":["b3","b2","b1"],"min":1,"max":1514,"gamma":1}, 'lowtide_sr', false);
Map.addLayer(reef_layer.selfMask(), {min:0, max:2}, "reef layer", false);
Map.addLayer(geo, map_palettes.geo, "geomorphic map", false);
Map.addLayer(benthic, map_palettes.benthic, "benthic map", false);
Map.addLayer(depth, {min: -3, max: 1200, palette:['#d0d1e6','#a6bddb','#74a9cf','#3690c0','#0570b0','#045a8d','#023858']}, "depth layer", false);

// combine into single stack
var export_stack = depth.updateMask(geo.gt(2)).rename('depth')
                    .addBands(reef_layer.rename('reef'))
                    .addBands(geo.rename('geomorphic'))
                    .addBands(benthic.rename('benthic'))
                    .toInt16()

Map.addLayer(export_stack, {}, "export raster stack", false);

// run the export
Map.addLayer(reef_boundary, {}, "Reef Boundary", false)

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3_redo/indo_stack_',
  region: reef_boundary, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

/*Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack1',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack1_',
  region: ex1, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack2',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack2_',
  region: ex2, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack3',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack3_',
  region: ex3, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack4',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack4_',
  region: ex4, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack5',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack5_',
  region: ex5, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack6',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack6_',
  region: ex6, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack7',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack7_',
  region: ex7, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack8',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack8_',
  region: ex8, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack9',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack9_',
  region: ex9, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack10',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack10_',
  region: ex10, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack11',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack11_',
  region: ex11, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack12',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack12_',
  region: ex12, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack13',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack13_',
  region: ex13, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack14',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack14_',
  region: ex14, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack15',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack15_',
  region: ex15, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack16',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack16_',
  region: ex16, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack17',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack17_',
  region: ex17, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack18',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack18_',
  region: ex18, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack19',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack19_',
  region: ex19, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});

Export.image.toCloudStorage({
  image: export_stack,
  description: 'indonesia_stack20',
  bucket: 'coral-atlas-data-pipeline',
  fileNamePrefix: 'coral-gee-export-bucket/indonesia/v1_3/indo_stack20_',
  region: ex20, 
  scale: 5,
  crs: 'EPSG:4326',
  maxPixels: 1e13, 
  skipEmptyTiles: true
});*/